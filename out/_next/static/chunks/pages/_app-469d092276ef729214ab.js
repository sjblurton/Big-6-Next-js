(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[888],{4258:function(e,t,n){"use strict";n.d(t,{Jn:function(){return w},qX:function(){return m},Xd:function(){return p},Mq:function(){return I},ZF:function(){return b},KN:function(){return T}});var r=n(909),i=n(4594),s=n(4589);class o{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const a="@firebase/app",c=new i.Yd("@firebase/app"),u="[DEFAULT]",h={[a]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},l=new Map,d=new Map;function f(e,t){try{e.container.addComponent(t)}catch(n){c.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function p(e){const t=e.name;if(d.has(t))return c.debug(`There were multiple attempts to register component ${t}.`),!1;d.set(t,e);for(const n of l.values())f(n,e);return!0}function m(e,t){return e.container.getProvider(t)}const g={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."},y=new s.LL("app","Firebase",g);class v{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new r.wA("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw y.create("app-deleted",{appName:this._name})}}const w="9.0.0";function b(e,t={}){if("object"!==typeof t){t={name:t}}const n=Object.assign({name:u,automaticDataCollectionEnabled:!1},t),i=n.name;if("string"!==typeof i||!i)throw y.create("bad-app-name",{appName:String(i)});const o=l.get(i);if(o){if((0,s.vZ)(e,o.options)&&(0,s.vZ)(n,o.config))return o;throw y.create("duplicate-app",{appName:i})}const a=new r.H0(i);for(const r of d.values())a.addComponent(r);const c=new v(e,n,a);return l.set(i,c),c}function I(e="[DEFAULT]"){const t=l.get(e);if(!t)throw y.create("no-app",{appName:e});return t}function T(e,t,n){var i;let s=null!==(i=h[e])&&void 0!==i?i:e;n&&(s+=`-${n}`);const o=s.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const e=[`Unable to register library "${s}" with version "${t}":`];return o&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void c.warn(e.join(" "))}p(new r.wA(`${s}-version`,(()=>({library:s,version:t})),"VERSION"))}var E;p(new r.wA("platform-logger",(e=>new o(e)),"PRIVATE")),T(a,"0.7.0",E),T("fire-js","")},909:function(e,t,n){"use strict";n.d(t,{wA:function(){return s},H0:function(){return c}});var r=n(655),i=n(4589),s=function(){function e(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return e.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},e.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},e.prototype.setServiceProps=function(e){return this.serviceProps=e,this},e.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},e}(),o="[DEFAULT]",a=function(){function e(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return e.prototype.get=function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new i.BH;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(s){}}return this.instancesDeferred.get(t).promise},e.prototype.getImmediate=function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:o})}catch(d){}try{for(var i=(0,r.XA)(this.instancesDeferred.entries()),s=i.next();!s.done;s=i.next()){var a=(0,r.CR)(s.value,2),c=a[0],u=a[1],h=this.normalizeInstanceIdentifier(c);try{var l=this.getOrInitializeService({instanceIdentifier:h});u.resolve(l)}catch(d){}}}catch(f){t={error:f}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}}},e.prototype.clearInstance=function(e){void 0===e&&(e=o),this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)},e.prototype.delete=function(){return(0,r.mG)(this,void 0,void 0,(function(){var e;return(0,r.Jh)(this,(function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all((0,r.ev)((0,r.ev)([],(0,r.CR)(e.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()})))),(0,r.CR)(e.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))))];case 1:return t.sent(),[2]}}))}))},e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.isInitialized=function(e){return void 0===e&&(e=o),this.instances.has(e)},e.prototype.getOptions=function(e){return void 0===e&&(e=o),this.instancesOptions.get(e)||{}},e.prototype.initialize=function(e){var t,n;void 0===e&&(e={});var i=e.options,s=void 0===i?{}:i,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var a=this.getOrInitializeService({instanceIdentifier:o,options:s});try{for(var c=(0,r.XA)(this.instancesDeferred.entries()),u=c.next();!u.done;u=c.next()){var h=(0,r.CR)(u.value,2),l=h[0],d=h[1];o===this.normalizeInstanceIdentifier(l)&&d.resolve(a)}}catch(f){t={error:f}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}return a},e.prototype.onInit=function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var s=this.instances.get(r);return s&&e(s,r),function(){i.delete(e)}},e.prototype.invokeOnInitCallbacks=function(e,t){var n,i,s=this.onInitCallbacks.get(t);if(s)try{for(var o=(0,r.XA)(s),a=o.next();!a.done;a=o.next()){var c=a.value;try{c(e,t)}catch(u){}}}catch(h){n={error:h}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},e.prototype.getOrInitializeService=function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,s=this.instances.get(n);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===o?void 0:t),options:i}),this.instances.set(n,s),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(s,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,s)}catch(a){}return s||null},e.prototype.normalizeInstanceIdentifier=function(e){return void 0===e&&(e=o),this.component?this.component.multipleInstances?e:o:e},e.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},e}();var c=function(){function e(e){this.name=e,this.providers=new Map}return e.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},e.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},e.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new a(e,this);return this.providers.set(e,t),t},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}()},4594:function(e,t,n){"use strict";function r(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}var i;n.d(t,{in:function(){return s},Yd:function(){return l}});var s,o=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(s||(s={}));var a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},c=s.INFO,u=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),h=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(t<e.logLevel)){var s=(new Date).toISOString(),o=u[t];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+t+")");console[o].apply(console,r(["["+s+"]  "+e.name+":"],n))}},l=function(){function e(e){this.name=e,this._logLevel=c,this._logHandler=h,this._userLogHandler=null,o.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in s))throw new TypeError('Invalid value "'+e+'" assigned to `logLevel`');this._logLevel=e},enumerable:!1,configurable:!0}),e.prototype.setLogLevel=function(e){this._logLevel="string"===typeof e?a[e]:e},Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],e)),this._logHandler.apply(this,r([this,s.DEBUG],e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],e)),this._logHandler.apply(this,r([this,s.VERBOSE],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],e)),this._logHandler.apply(this,r([this,s.INFO],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],e)),this._logHandler.apply(this,r([this,s.WARN],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],e)),this._logHandler.apply(this,r([this,s.ERROR],e))},e}()},4589:function(e,t,n){"use strict";n.d(t,{BH:function(){return a},LL:function(){return y},ZR:function(){return g},tV:function(){return o},ne:function(){return k},vZ:function(){return I},pd:function(){return _},m9:function(){return N},z$:function(){return c},ru:function(){return h},d:function(){return d},xb:function(){return b},w1:function(){return f},uI:function(){return u},b$:function(){return l},G6:function(){return m},Mn:function(){return p},xO:function(){return E},zd:function(){return S}});var r=n(655),i=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},s={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var s=e[i],o=i+1<e.length,a=o?e[i+1]:0,c=i+2<e.length,u=c?e[i+2]:0,h=s>>2,l=(3&s)<<4|a>>4,d=(15&a)<<2|u>>6,f=63&u;c||(f=64,o||(d=64)),r.push(n[h],n[l],n[d],n[f])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(i(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){var o=((7&i)<<18|(63&(s=e[n++]))<<12|(63&(a=e[n++]))<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{s=e[n++];var a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var s=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,a=++i<e.length?n[e.charAt(i)]:64,c=++i<e.length?n[e.charAt(i)]:64;if(++i,null==s||null==o||null==a||null==c)throw Error();var u=s<<2|o>>4;if(r.push(u),64!==a){var h=o<<4&240|a>>2;if(r.push(h),64!==c){var l=a<<6&192|c;r.push(l)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},o=function(e){try{return s.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};var a=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}},e}();function c(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function u(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(c())}function h(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function l(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function d(){return c().indexOf("Electron/")>=0}function f(){var e=c();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function p(){return c().indexOf("MSAppHost/")>=0}function m(){return!function(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}var g=function(e){function t(n,r,i){var s=e.call(this,r)||this;return s.code=n,s.customData=i,s.name="FirebaseError",Object.setPrototypeOf(s,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(s,y.prototype.create),s}return(0,r.ZT)(t,e),t}(Error),y=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t[0]||{},i=this.service+"/"+e,s=this.errors[e],o=s?v(s,r):"Error",a=this.serviceName+": "+o+" ("+i+").",c=new g(i,a,r);return c},e}();function v(e,t){return e.replace(w,(function(e,n){var r=t[n];return null!=r?String(r):"<"+n+"?>"}))}var w=/\{\$([^}]+)}/g;function b(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function I(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,s=n;i<s.length;i++){var o=s[i];if(!r.includes(o))return!1;var a=e[o],c=t[o];if(T(a)&&T(c)){if(!I(a,c))return!1}else if(a!==c)return!1}for(var u=0,h=r;u<h.length;u++){o=h[u];if(!n.includes(o))return!1}return!0}function T(e){return null!==e&&"object"===typeof e}function E(e){for(var t=[],n=function(e,n){Array.isArray(n)?n.forEach((function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))})):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))},r=0,i=Object.entries(e);r<i.length;r++){var s=i[r];n(s[0],s[1])}return t.length?"&"+t.join("&"):""}function S(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=e.split("="),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function _(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}!function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var s,o,a=this.chain_[0],c=this.chain_[1],u=this.chain_[2],h=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(s=h^c&(u^h),o=1518500249):(s=c^u^h,o=1859775393):r<60?(s=c&u|h&(c|u),o=2400959708):(s=c^u^h,o=3395469782);i=(a<<5|a>>>27)+s+l+o+n[r]&4294967295;l=h,h=u,u=4294967295&(c<<30|c>>>2),c=a,a=i}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+c&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,s=this.inbuf_;r<t;){if(0===s)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[s]=e.charCodeAt(r),++r,++s===this.blockSize){this.compress_(i),s=0;break}}else for(;r<t;)if(i[s]=e[r],++r,++s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e}}();function k(e,t){var n=new A(e,t);return n.subscribe.bind(n)}var A=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((function(){e(n)})).catch((function(e){n.error(e)}))}return e.prototype.next=function(e){this.forEachObserver((function(t){t.next(e)}))},e.prototype.error=function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)},e.prototype.complete=function(){this.forEachObserver((function(e){e.complete()})),this.close()},e.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i in e&&"function"===typeof e[i])return!0}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=C),void 0===r.error&&(r.error=C),void 0===r.complete&&(r.complete=C);var s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),s},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))},e}();function C(){}function N(e){return e&&e._delegate?e._delegate:e}},2571:function(e,t,n){"use strict";n.d(t,{hJ:function(){return be},v0:function(){return qt},Aj:function(){return Oe},rh:function(){return lt},w7:function(){return xe}});var r=n(4589),i=n(4258),s=n(655),o=n(4594),a=n(909);const c=new r.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),u=new o.Yd("@firebase/auth");function h(e,...t){u.logLevel<=o.in.ERROR&&u.error(`Auth (${i.Jn}): ${e}`,...t)}function l(e,...t){throw f(e,...t)}function d(e,...t){return f(e,...t)}function f(e,...t){if("string"!==typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return c.create(e,...t)}function p(e,t,...n){if(!e)throw f(t,...n)}function m(e){const t="INTERNAL ASSERTION FAILED: "+e;throw h(t),new Error(t)}function g(e,t){e||m(t)}const y=new Map;function v(e){g(e instanceof Function,"Expected a class definition");let t=y.get(e);return t?(g(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,y.set(e,t),t)}function w(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function b(){return"http:"===I()||"https:"===I()}function I(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class T{constructor(e,t){this.shortDelay=e,this.longDelay=t,g(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,r.uI)()||(0,r.b$)()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(b()||(0,r.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function E(e,t){g(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class S{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void m("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void m("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void m("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const _={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded"},k=new T(3e4,6e4);function A(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function C(e,t,n,i,s={}){return N(e,s,(()=>{let s={},o={};i&&("GET"===t?o=i:s={body:JSON.stringify(i)});const a=(0,r.xO)(Object.assign({key:e.config.apiKey},o)).slice(1),c=new(S.headers());return c.set("Content-Type","application/json"),c.set("X-Client-Version",e._getSdkClientVersion()),e.languageCode&&c.set("X-Firebase-Locale",e.languageCode),S.fetch()(x(e,e.config.apiHost,n,a),Object.assign({method:t,headers:c,referrerPolicy:"no-referrer"},s))}))}async function N(e,t,n){e._canInitEmulator=!1;const i=Object.assign(Object.assign({},_),t);try{const t=new D(e),r=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await r.json();if("needConfirmation"in s)throw R(e,"account-exists-with-different-credential",s);if(r.ok&&!("errorMessage"in s))return s;{const t=(r.ok?s.errorMessage:s.error.message).split(" : ")[0];if("FEDERATED_USER_ID_ALREADY_LINKED"===t)throw R(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===t)throw R(e,"email-already-in-use",s);l(e,i[t]||t.toLowerCase().replace(/[_\s]+/g,"-"))}}catch(s){if(s instanceof r.ZR)throw s;l(e,"network-request-failed")}}async function O(e,t,n,r,i={}){const s=await C(e,t,n,r,i);return"mfaPendingCredential"in s&&l(e,"multi-factor-auth-required",{serverResponse:s}),s}function x(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?E(e.config,i):`${e.config.apiScheme}://${i}`}class D{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(d(this.auth,"timeout"))),k.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function R(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=d(e,t,r);return i.customData._tokenResponse=n,i}function P(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function L(e){return 1e3*Number(e)}function M(e){const[t,n,i]=e.split(".");if(void 0===t||void 0===n||void 0===i)return h("JWT malformed, contained fewer than 3 sections"),null;try{const e=(0,r.tV)(n);return e?JSON.parse(e):(h("Failed to decode base64 JWT payload"),null)}catch(s){return h("Caught error parsing JWT payload as JSON",s),null}}async function F(e,t,n=!1){if(n)return t;try{return await t}catch(i){throw i instanceof r.ZR&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(i)&&e.auth.currentUser===e&&await e.auth.signOut(),i}}class U{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===e.code&&this.schedule(!0))}this.schedule()}}class j{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=P(this.lastLoginAt),this.creationTime=P(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function V(e){var t;const n=e.auth,r=await e.getIdToken(),i=await F(e,async function(e,t){return C(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));p(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const o=i.users[0];e._notifyReloadListener(o);const a=(null===(t=o.providerUserInfo)||void 0===t?void 0:t.length)?o.providerUserInfo.map((e=>{var{providerId:t}=e,n=(0,s._T)(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const c=(u=e.providerData,h=a,[...u.filter((e=>!h.some((t=>t.providerId===e.providerId)))),...h]);var u,h;const l=e.isAnonymous,d=!(e.email&&o.passwordHash)&&!(null===c||void 0===c?void 0:c.length),f=!!l&&d,m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new j(o.createdAt,o.lastLoginAt),isAnonymous:f};Object.assign(e,m)}class z{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){p(e.idToken,"internal-error"),p("undefined"!==typeof e.idToken,"internal-error"),p("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=M(e);return p(t,"internal-error"),p("undefined"!==typeof t.exp,"internal-error"),p("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return p(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:s}=await async function(e,t){const n=await N(e,{},(()=>{const n=(0,r.xO)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=x(e,i,"/v1/token",`key=${s}`);return S.fetch()(o,{method:"POST",headers:{"X-Client-Version":e._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,i,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new z;return n&&(p("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(p("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(p("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new z,this.toJSON())}_performRefresh(){return m("not implemented")}}function B(e,t){p("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class q{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=(0,s._T)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new U(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.metadata=new j(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await F(this,this.stsTokenManager.getToken(this.auth,e));return p(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=(0,r.m9)(e),i=await n.getIdToken(t),s=M(i);p(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o="object"===typeof s.firebase?s.firebase:void 0,a=null===o||void 0===o?void 0:o.sign_in_provider;return{claims:s,token:i,authTime:P(L(s.auth_time)),issuedAtTime:P(L(s.iat)),expirationTime:P(L(s.exp)),signInProvider:a||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=(0,r.m9)(e);await V(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(p(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new q(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){p(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await V(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await F(this,async function(e,t){return C(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,c,u;const h=null!==(n=t.displayName)&&void 0!==n?n:void 0,l=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,m=null!==(o=t.tenantId)&&void 0!==o?o:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,y=null!==(c=t.createdAt)&&void 0!==c?c:void 0,v=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:w,emailVerified:b,isAnonymous:I,providerData:T,stsTokenManager:E}=t;p(w&&E,e,"internal-error");const S=z.fromJSON(this.name,E);p("string"===typeof w,e,"internal-error"),B(h,e.name),B(l,e.name),p("boolean"===typeof b,e,"internal-error"),p("boolean"===typeof I,e,"internal-error"),B(d,e.name),B(f,e.name),B(m,e.name),B(g,e.name),B(y,e.name),B(v,e.name);const _=new q({uid:w,auth:e,email:l,emailVerified:b,displayName:h,isAnonymous:I,photoURL:f,phoneNumber:d,tenantId:m,stsTokenManager:S,createdAt:y,lastLoginAt:v});return T&&Array.isArray(T)&&(_.providerData=T.map((e=>Object.assign({},e)))),g&&(_._redirectEventId=g),_}static async _fromIdTokenResponse(e,t,n=!1){const r=new z;r.updateFromServerResponse(t);const i=new q({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await V(i),i}}class H{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}H.type="NONE";const K=H;function $(e,t,n){return`firebase:${e}:${t}:${n}`}class G{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=$(this.userKey,r.apiKey,i),this.fullPersistenceKey=$("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?q._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new G(v(K),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||v(K);const s=$(n,e.config.apiKey,e.name);let o=null;for(const u of t)try{const t=await u._get(s);if(t){const n=q._fromJSON(e,t);u!==i&&(o=n),i=u;break}}catch(c){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(c){}}))),new G(i,e,n)):new G(i,e,n)}}function W(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Q(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(X(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ee(t))return"Blackberry";if(te(t))return"Webos";if(J(t))return"Safari";if((t.includes("chrome/")||Y(t))&&!t.includes("edge/"))return"Chrome";if(Z(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function X(e=(0,r.z$)()){return/firefox\//i.test(e)}function J(e=(0,r.z$)()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Y(e=(0,r.z$)()){return/crios\//i.test(e)}function Q(e=(0,r.z$)()){return/iemobile/i.test(e)}function Z(e=(0,r.z$)()){return/android/i.test(e)}function ee(e=(0,r.z$)()){return/blackberry/i.test(e)}function te(e=(0,r.z$)()){return/webos/i.test(e)}function ne(e=(0,r.z$)()){return/iphone|ipad|ipod/i.test(e)}function re(e=(0,r.z$)()){return ne(e)||Z(e)||te(e)||ee(e)||/windows phone/i.test(e)||Q(e)}function ie(e,t=[]){let n;switch(e){case"Browser":n=W((0,r.z$)());break;case"Worker":n=`${W((0,r.z$)())}-${e}`;break;default:n=e}const s=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${i.Jn}/${s}`}class se{constructor(e,t){this.app=e,this.config=t,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ae(this),this.idTokenSubscription=new ae(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=c,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=t.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=v(t)),this._initializationPromise=this.queue((async()=>{var n;this._deleted||(this.persistenceManager=await G.create(this,e),this._deleted||((null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)&&await this._popupRedirectResolver._initialize(this),await this.initializeCurrentUser(t),this._deleted||(this._isInitialized=!0)))})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void(await this.currentUser.getIdToken())):void(await this._updateCurrentUser(e)):void 0}async initializeCurrentUser(e){var t;let n=await this.assertedPersistence.getCurrentUser();if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const r=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,i=null===n||void 0===n?void 0:n._redirectEventId,s=await this.tryRedirectSignIn(e);r&&r!==i||!(null===s||void 0===s?void 0:s.user)||(n=s.user)}return n?n._redirectEventId?(p(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)):this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await V(e)}catch(t){if("auth/network-request-failed"!==t.code)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?(0,r.m9)(e):null;return t&&p(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){if(!this._deleted)return e&&p(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(v(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new r.LL("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&v(e)||this._popupRedirectResolver;p(t,this,"argument-error"),this.redirectPersistenceManager=await G.create(this,[v(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return p(s,this,"internal-error"),s.then((()=>i(this.currentUser))),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&(this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh()),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return p(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ie(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}}function oe(e){return(0,r.m9)(e)}class ae{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,r.ne)((e=>this.observer=e))}get next(){return p(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}class ce{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return m("not implemented")}_getIdTokenResponse(e){return m("not implemented")}_linkToIdToken(e,t){return m("not implemented")}_getReauthenticationResolver(e){return m("not implemented")}}async function ue(e,t){return C(e,"POST","/v1/accounts:update",t)}class he extends ce{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new he(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new he(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return async function(e,t){return O(e,"POST","/v1/accounts:signInWithPassword",A(e,t))}(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return O(e,"POST","/v1/accounts:signInWithEmailLink",A(e,t))}(e,{email:this._email,oobCode:this._password});default:l(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return ue(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return O(e,"POST","/v1/accounts:signInWithEmailLink",A(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:l(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function le(e,t){return O(e,"POST","/v1/accounts:signInWithIdp",A(e,t))}class de extends ce{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new de(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):l("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=(0,s._T)(t,["providerId","signInMethod"]);if(!n||!r)return null;const o=new de(n,r);return Object.assign(o,i),o}_getIdTokenResponse(e){return le(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,le(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,le(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,r.xO)(t)}return e}}const fe={USER_NOT_FOUND:"user-not-found"};class pe extends ce{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new pe({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new pe({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return O(e,"POST","/v1/accounts:signInWithPhoneNumber",A(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await O(e,"POST","/v1/accounts:signInWithPhoneNumber",A(e,t));if(n.temporaryProof)throw R(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return O(e,"POST","/v1/accounts:signInWithPhoneNumber",A(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),fe)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new pe({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class me{constructor(e){var t,n,i,s,o,a;const c=(0,r.zd)((0,r.pd)(e)),u=null!==(t=c.apiKey)&&void 0!==t?t:null,h=null!==(n=c.oobCode)&&void 0!==n?n:null,l=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=c.mode)&&void 0!==i?i:null);p(u&&h&&l,"argument-error"),this.apiKey=u,this.operation=l,this.code=h,this.continueUrl=null!==(s=c.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(o=c.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=c.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=(0,r.zd)((0,r.pd)(e)).link,n=t?(0,r.zd)((0,r.pd)(t)).deep_link_id:null,i=(0,r.zd)((0,r.pd)(e)).deep_link_id;return(i?(0,r.zd)((0,r.pd)(i)).link:null)||i||n||t||e}(e);try{return new me(t)}catch(n){return null}}}class ge{constructor(){this.providerId=ge.PROVIDER_ID}static credential(e,t){return he._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=me.parseLink(t);return p(n,"argument-error"),he._fromEmailAndCode(e,n.code,n.tenantId)}}ge.PROVIDER_ID="password",ge.EMAIL_PASSWORD_SIGN_IN_METHOD="password",ge.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class ye{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ve extends ye{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class we extends ve{constructor(){super("facebook.com")}static credential(e){return de._fromParams({providerId:we.PROVIDER_ID,signInMethod:we.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return we.credentialFromTaggedObject(e)}static credentialFromError(e){return we.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return we.credential(e.oauthAccessToken)}catch(t){return null}}}we.FACEBOOK_SIGN_IN_METHOD="facebook.com",we.PROVIDER_ID="facebook.com";class be extends ve{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return de._fromParams({providerId:be.PROVIDER_ID,signInMethod:be.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return be.credentialFromTaggedObject(e)}static credentialFromError(e){return be.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return be.credential(t,n)}catch(r){return null}}}be.GOOGLE_SIGN_IN_METHOD="google.com",be.PROVIDER_ID="google.com";class Ie extends ve{constructor(){super("github.com")}static credential(e){return de._fromParams({providerId:Ie.PROVIDER_ID,signInMethod:Ie.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ie.credentialFromTaggedObject(e)}static credentialFromError(e){return Ie.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Ie.credential(e.oauthAccessToken)}catch(t){return null}}}Ie.GITHUB_SIGN_IN_METHOD="github.com",Ie.PROVIDER_ID="github.com";class Te extends ve{constructor(){super("twitter.com")}static credential(e,t){return de._fromParams({providerId:Te.PROVIDER_ID,signInMethod:Te.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Te.credentialFromTaggedObject(e)}static credentialFromError(e){return Te.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return Te.credential(t,n)}catch(r){return null}}}Te.TWITTER_SIGN_IN_METHOD="twitter.com",Te.PROVIDER_ID="twitter.com";class Ee{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const i=await q._fromIdTokenResponse(e,n,r),s=Se(n);return new Ee({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Se(n);return new Ee({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Se(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class _e extends r.ZR{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,this.name="FirebaseError",Object.setPrototypeOf(this,_e.prototype),this.appName=e.name,this.code=t.code,this.tenantId=null!==(i=e.tenantId)&&void 0!==i?i:void 0,this.serverResponse=t.customData.serverResponse}static _fromErrorAndOperation(e,t,n,r){return new _e(e,t,n,r)}}function ke(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw _e._fromErrorAndOperation(e,n,t,r);throw n}))}async function Ae(e,t,n=!1){const r=await F(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Ee._forOperation(e,"link",r)}async function Ce(e,t,n=!1){const{auth:r}=e,i="reauthenticate";try{const s=await F(e,ke(r,i,t,e),n);p(s.idToken,r,"internal-error");const o=M(s.idToken);p(o,r,"internal-error");const{sub:a}=o;return p(e.uid===a,r,"user-mismatch"),Ee._forOperation(e,i,s)}catch(s){throw"auth/user-not-found"===(null===s||void 0===s?void 0:s.code)&&l(r,"user-mismatch"),s}}async function Ne(e,t,n=!1){const r="signIn",i=await ke(e,r,t),s=await Ee._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function Oe(e,t,n,i){return(0,r.m9)(e).onAuthStateChanged(t,n,i)}function xe(e){return(0,r.m9)(e).signOut()}new WeakMap;const De="__sak";class Re{constructor(e,t){this.storage=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(De,"1"),this.storage.removeItem(De),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}}class Pe extends Re{constructor(){super(window.localStorage,"LOCAL"),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=(0,r.z$)();return J(e)||ne(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=re(),this._shouldAllowMigration=!0,this.boundEventHandler=this.onStorageEvent.bind(this)}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const i=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);(0,r.w1)()&&10===document.documentMode&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,10):i()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Pe.type="LOCAL";const Le=Pe;class Me extends Re{constructor(){super(window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Me.type="SESSION";const Fe=Me;class Ue{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Ue(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function je(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Ue.receivers=[];class Ve{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const c=je("",20);r.port1.start();const u=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(u),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(u),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function ze(){return window}function Be(){return"undefined"!==typeof ze().WorkerGlobalScope&&"function"===typeof ze().importScripts}const qe="firebaseLocalStorageDb",He="firebaseLocalStorage",Ke="fbase_key";class $e{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function Ge(e,t){return e.transaction([He],t?"readwrite":"readonly").objectStore(He)}function We(){const e=indexedDB.open(qe,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(He,{keyPath:Ke})}catch(r){n(r)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(He)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(qe);return new $e(e).toPromise()}(),t(await We()))}))}))}async function Xe(e,t,n){const r=Ge(e,!0).put({[Ke]:t,value:n});return new $e(r).toPromise()}function Je(e,t){const n=Ge(e,!0).delete(t);return new $e(n).toPromise()}class Ye{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await We()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Be()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ue._getInstance(Be()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Ve(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await We();return await Xe(e,De,"1"),await Je(e,De),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Xe(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=Ge(e,!1).get(t),r=await new $e(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Je(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=Ge(e,!1).getAll();return new $e(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Ye.type="LOCAL";const Qe=Ye;function Ze(e){return new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=d("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function et(e){return`__${e}${Math.floor(1e6*Math.random())}`}et("rcb"),new T(3e4,6e4);const tt="recaptcha";async function nt(e,t,n){var r;const i=await n.verify();try{let s;if(p("string"===typeof i,e,"argument-error"),p(n.type===tt,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){p("enroll"===t.type,e,"internal-error");return(await function(e,t){return C(e,"POST","/v2/accounts/mfaEnrollment:start",Object.assign({tenantId:e.tenantId},t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo}{p("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;p(n,e,"missing-multi-factor-info");return(await function(e,t){return C(e,"POST","/v2/accounts/mfaSignIn:start",Object.assign({tenantId:e.tenantId},t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return C(e,"POST","/v1/accounts:sendVerificationCode",A(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class rt{constructor(e){this.providerId=rt.PROVIDER_ID,this.auth=oe(e)}verifyPhoneNumber(e,t){return nt(this.auth,e,(0,r.m9)(t))}static credential(e,t){return pe._fromVerification(e,t)}static credentialFromResult(e){const t=e;return rt.credentialFromTaggedObject(t)}static credentialFromError(e){return rt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?pe._fromTokenResponse(t,n):null}}function it(e,t){return t?v(t):(p(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}rt.PROVIDER_ID="phone",rt.PHONE_SIGN_IN_METHOD="phone";class st extends ce{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return le(e,this._buildIdpRequest())}_linkToIdToken(e,t){return le(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return le(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ot(e){return Ne(e.auth,new st(e),e.bypassAuthState)}function at(e){const{auth:t,user:n}=e;return p(n,t,"internal-error"),Ce(n,new st(e),e.bypassAuthState)}async function ct(e){const{auth:t,user:n}=e;return p(n,t,"internal-error"),Ae(n,new st(e),e.bypassAuthState)}class ut{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ot;case"linkViaPopup":case"linkViaRedirect":return ct;case"reauthViaPopup":case"reauthViaRedirect":return at;default:l(this.auth,"internal-error")}}resolve(e){g(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){g(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ht=new T(2e3,1e4);async function lt(e,t,n){const r=oe(e);p(t instanceof ye,e,"argument-error");const i=it(r,n);return new dt(r,"signInViaPopup",t,i).executeNotNull()}class dt extends ut{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,dt.currentPopupAction&&dt.currentPopupAction.cancel(),dt.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return p(e,this.auth,"internal-error"),e}async onExecution(){g(1===this.filter.length,"Popup operations only handle one event");const e=je();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(d(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(d(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,dt.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(d(this.auth,"popup-closed-by-user"))}),2e3):this.pollId=window.setTimeout(e,ht.get())};e()}}dt.currentPopupAction=null;const ft=new Map;class pt extends ut{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=ft.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=gt(t),r="true"===await mt(e)._get(n);return await mt(e)._remove(n),r}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}ft.set(this.auth._key(),e)}return e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function mt(e){return v(e._redirectPersistence)}function gt(e){return $("pendingRedirect",e.config.apiKey,e.name)}async function yt(e,t,n=!1){const r=oe(e),i=it(r,t),s=new pt(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}class vt{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bt(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!bt(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(d(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(wt(e))}saveEventToCache(e){this.cachedEventUids.add(wt(e)),this.lastProcessedEventTime=Date.now()}}function wt(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function bt({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null===t||void 0===t?void 0:t.code)}const It=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Tt=/^https?/;async function Et(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e,t={}){return C(e,"GET","/v1/projects",t)}(e);for(const r of t)try{if(St(r))return}catch(n){}l(e,"unauthorized-domain")}function St(e){const t=w(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Tt.test(n))return!1;if(It.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const _t=new T(3e4,6e4);function kt(){const e=ze().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let At=null;function Ct(e){return At=At||function(e){return new Promise(((t,n)=>{var r,i,s;function o(){kt(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{kt(),n(d(e,"network-request-failed"))},timeout:_t.get()})}if(null===(i=null===(r=ze().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=ze().gapi)||void 0===s?void 0:s.load)){const t=et("iframefcb");return ze()[t]=()=>{gapi.load?o():n(d(e,"network-request-failed"))},Ze(`https://apis.google.com/js/api.js?onload=${t}`)}o()}})).catch((e=>{throw At=null,e}))}(e),At}const Nt=new T(5e3,15e3),Ot={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},xt=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Dt(e){const t=e.config;p(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?E(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,s={apiKey:t.apiKey,appName:e.name,v:i.Jn},o=xt.get(e.config.apiHost);o&&(s.eid=o);const a=e._getFrameworks();return a.length&&(s.fw=a.join(",")),`${n}?${(0,r.xO)(s).slice(1)}`}const Rt={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Pt{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Lt(e,t,n,i=500,s=600){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let c="";const u=Object.assign(Object.assign({},Rt),{width:i.toString(),height:s.toString(),top:o,left:a}),h=(0,r.z$)().toLowerCase();n&&(c=Y(h)?"_blank":n),X(h)&&(t=t||"http://localhost",u.scrollbars="yes");const l=Object.entries(u).reduce(((e,[t,n])=>`${e}${t}=${n},`),"");if(function(e=(0,r.z$)()){var t;return ne(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(h)&&"_self"!==c)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",c),new Pt(null);const d=window.open(t||"",c,l);p(d,e,"popup-blocked");try{d.focus()}catch(f){}return new Pt(d)}const Mt="__/auth/handler",Ft="emulator/auth/handler";function Ut(e,t,n,s,o,a){p(e.config.authDomain,e,"auth-domain-config-required"),p(e.config.apiKey,e,"invalid-api-key");const c={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:s,v:i.Jn,eventId:o};if(t instanceof ye){t.setDefaultLanguage(e.languageCode),c.providerId=t.providerId||"",(0,r.xb)(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(a||{}))c[e]=t}if(t instanceof ve){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(c.scopes=e.join(","))}e.tenantId&&(c.tid=e.tenantId);const u=c;for(const r of Object.keys(u))void 0===u[r]&&delete u[r];return`${function({config:e}){if(!e.emulator)return`https://${e.authDomain}/${Mt}`;return E(e,Ft)}(e)}?${(0,r.xO)(u).slice(1)}`}const jt="webStorageSupport";const Vt=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Fe,this._completeRedirectFn=yt}async _openPopup(e,t,n,r){var i;g(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Lt(e,Ut(e,t,n,w(),r),je())}async _openRedirect(e,t,n,r){var i;return await this._originValidation(e),i=Ut(e,t,n,w(),r),ze().location.href=i,new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(g(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n}async initAndGetManager(e){const t=await async function(e){const t=await Ct(e),n=ze().gapi;return p(n,e,"internal-error"),t.open({where:document.body,url:Dt(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ot,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=d(e,"network-request-failed"),s=ze().setTimeout((()=>{r(i)}),Nt.get());function o(){ze().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}(e),n=new vt(e);return t.register("authEvent",(t=>{p(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(jt,{type:jt},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),l(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Et(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return re()||J()||ne()}};var zt;class Bt{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){p(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function qt(e=(0,i.Mq)()){const t=(0,i.qX)(e,"auth");return t.isInitialized()?t.getImmediate():function(e,t){const n=(0,i.qX)(e,"auth");if(n.isInitialized()){const e=n.getImmediate(),i=n.getOptions();if((0,r.vZ)(i,null!==t&&void 0!==t?t:{}))return e;l(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Vt,persistence:[Qe,Le,Fe]})}zt="Browser",(0,i.Xd)(new a.wA("auth",((e,{options:t})=>{const n=e.getProvider("app").getImmediate(),{apiKey:r,authDomain:i}=n.options;return(e=>{p(r&&!r.includes(":"),"invalid-api-key",{appName:e.name}),p(!(null===i||void 0===i?void 0:i.includes(":")),"argument-error",{appName:e.name});const n={apiKey:r,authDomain:i,clientPlatform:zt,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ie(zt)},s=new se(e,n);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(v);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(s,t),s})(n)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),(0,i.Xd)(new a.wA("auth-internal",(e=>(e=>new Bt(e))(oe(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,i.KN)("@firebase/auth","0.17.1",function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(zt))},4956:function(e,t,n){"use strict";n.d(t,{EK:function(){return Wr},ET:function(){return sd},hJ:function(){return al},oe:function(){return id},JU:function(){return cl},ST:function(){return ml},ad:function(){return dl},b9:function(){return Ql},cf:function(){return od},Xo:function(){return Jl},IO:function(){return Wl},pl:function(){return rd}});var r=n(4258),i=n(909),s=n(4594),o=n(4589),a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function c(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var u,h="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},l=l||{},d=h||self;function f(){}function p(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function m(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var g="closure_uid_"+(1e9*Math.random()>>>0),y=0;function v(e,t,n){return e.call.apply(e.bind,arguments)}function w(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function b(e,t,n){return(b=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?v:w).apply(null,arguments)}function I(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function T(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function E(){this.s=this.s,this.o=this.o}var S={};E.prototype.s=!1,E.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,g)&&e[g]||(e[g]=++y)}(this);delete S[e]}},E.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var _=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},k=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,s=0;s<r;s++)s in i&&t.call(n,i[s],s,e)};function A(e){return Array.prototype.concat.apply([],arguments)}function C(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function N(e){return/^[\s\xa0]*$/.test(e)}var O,x=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function D(e,t){return-1!=e.indexOf(t)}function R(e,t){return e<t?-1:e>t?1:0}e:{var P=d.navigator;if(P){var L=P.userAgent;if(L){O=L;break e}}O=""}function M(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function F(e){var t={};for(var n in e)t[n]=e[n];return t}var U="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var s=0;s<U.length;s++)n=U[s],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function V(e){return V[" "](e),e}V[" "]=f;var z,B=D(O,"Opera"),q=D(O,"Trident")||D(O,"MSIE"),H=D(O,"Edge"),K=H||q,$=D(O,"Gecko")&&!(D(O.toLowerCase(),"webkit")&&!D(O,"Edge"))&&!(D(O,"Trident")||D(O,"MSIE"))&&!D(O,"Edge"),G=D(O.toLowerCase(),"webkit")&&!D(O,"Edge");function W(){var e=d.document;return e?e.documentMode:void 0}e:{var X="",J=function(){var e=O;return $?/rv:([^\);]+)(\)|;)/.exec(e):H?/Edge\/([\d\.]+)/.exec(e):q?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):G?/WebKit\/(\S+)/.exec(e):B?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(J&&(X=J?J[1]:""),q){var Y=W();if(null!=Y&&Y>parseFloat(X)){z=String(Y);break e}}z=X}var Q,Z={};function ee(){return function(e){var t=Z;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=x(String(z)).split("."),n=x("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var s=t[i]||"",o=n[i]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==s[0].length&&0==o[0].length)break;e=R(0==s[1].length?0:parseInt(s[1],10),0==o[1].length?0:parseInt(o[1],10))||R(0==s[2].length,0==o[2].length)||R(s[2],o[2]),s=s[3],o=o[3]}while(0==e)}return 0<=e}))}if(d.document&&q){var te=W();Q=te||(parseInt(z,10)||void 0)}else Q=void 0;var ne=Q,re=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{d.addEventListener("test",f,t),d.removeEventListener("test",f,t)}catch(n){}return e}();function ie(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function se(e,t){if(ie.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if($){e:{try{V(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:oe[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&se.Z.h.call(this)}}ie.prototype.h=function(){this.defaultPrevented=!0},T(se,ie);var oe={2:"touch",3:"pen",4:"mouse"};se.prototype.h=function(){se.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var ae="closure_listenable_"+(1e6*Math.random()|0),ce=0;function ue(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++ce,this.ca=this.fa=!1}function he(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function le(e){this.src=e,this.g={},this.h=0}function de(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=_(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(he(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function fe(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.ca&&s.listener==t&&s.capture==!!n&&s.ia==r)return i}return-1}le.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=fe(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new ue(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var pe="closure_lm_"+(1e6*Math.random()|0),me={};function ge(e,t,n,r,i){if(r&&r.once)return ve(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)ge(e,t[s],n,r,i);return null}return n=_e(n),e&&e[ae]?e.N(t,n,m(r)?!!r.capture:!!r,i):ye(e,t,n,!1,r,i)}function ye(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=m(i)?!!i.capture:!!i,a=Ee(e);if(a||(e[pe]=a=new le(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Te;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)re||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Ie(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ve(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)ve(e,t[s],n,r,i);return null}return n=_e(n),e&&e[ae]?e.O(t,n,m(r)?!!r.capture:!!r,i):ye(e,t,n,!0,r,i)}function we(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)we(e,t[s],n,r,i);else r=m(r)?!!r.capture:!!r,n=_e(n),e&&e[ae]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=fe(s=e.g[t],n,r,i))&&(he(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Ee(e))&&(t=e.g[t.toString()],e=-1,t&&(e=fe(t,n,r,i)),(n=-1<e?t[e]:null)&&be(n))}function be(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[ae])de(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Ie(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Ee(t))?(de(n,e),0==n.h&&(n.src=null,t[pe]=null)):he(e)}}}function Ie(e){return e in me?me[e]:me[e]="on"+e}function Te(e,t){if(e.ca)e=!0;else{t=new se(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&be(e),e=n.call(r,t)}return e}function Ee(e){return(e=e[pe])instanceof le?e:null}var Se="__closure_events_fn_"+(1e9*Math.random()>>>0);function _e(e){return"function"===typeof e?e:(e[Se]||(e[Se]=function(t){return e.handleEvent(t)}),e[Se])}function ke(){E.call(this),this.i=new le(this),this.P=this,this.I=null}function Ae(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new ie(t,e);else if(t instanceof ie)t.target=t.target||e;else{var i=t;j(t=new ie(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=Ce(o,r,!0,t)&&i}if(i=Ce(o=t.g=e,r,!0,t)&&i,i=Ce(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=Ce(o=t.g=n[s],r,!1,t)&&i}function Ce(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.ca&&o.capture==n){var a=o.listener,c=o.ia||o.src;o.fa&&de(e.i,o),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}T(ke,E),ke.prototype[ae]=!0,ke.prototype.removeEventListener=function(e,t,n,r){we(this,e,t,n,r)},ke.prototype.M=function(){if(ke.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)he(n[r]);delete t.g[e],t.h--}}this.I=null},ke.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ke.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Ne=d.JSON.stringify;function Oe(){var e=Ue,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var xe,De=function(){function e(){this.h=this.g=null}return e.prototype.add=function(e,t){var n=Re.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n},e}(),Re=new(function(){function e(e,t){this.i=e,this.j=t,this.h=0,this.g=null}return e.prototype.get=function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e},e}())((function(){return new Pe}),(function(e){return e.reset()})),Pe=function(){function e(){this.next=this.g=this.h=null}return e.prototype.set=function(e,t){this.h=e,this.g=t,this.next=null},e.prototype.reset=function(){this.next=this.g=this.h=null},e}();function Le(e){d.setTimeout((function(){throw e}),0)}function Me(e,t){xe||function(){var e=d.Promise.resolve(void 0);xe=function(){e.then(je)}}(),Fe||(xe(),Fe=!0),Ue.add(e,t)}var Fe=!1,Ue=new De;function je(){for(var e;e=Oe();){try{e.h.call(e.g)}catch(n){Le(n)}var t=Re;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Fe=!1}function Ve(e,t){ke.call(this),this.h=e||1,this.g=t||d,this.j=b(this.kb,this),this.l=Date.now()}function ze(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function Be(e,t,n){if("function"===typeof e)n&&(e=b(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=b(e.handleEvent,e)}return 2147483647<Number(t)?-1:d.setTimeout(e,t||0)}function qe(e){e.g=Be((function(){e.g=null,e.i&&(e.i=!1,qe(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}T(Ve,ke),(u=Ve.prototype).da=!1,u.S=null,u.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Ae(this,"tick"),this.da&&(ze(this),this.start()))}},u.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},u.M=function(){Ve.Z.M.call(this),ze(this),delete this.g};var He=function(e){function t(t,n){var r=e.call(this)||this;return r.m=t,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.l=function(e){this.h=arguments,this.g?this.i=!0:qe(this)},t.prototype.M=function(){e.prototype.M.call(this),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},t}(E);function Ke(e){E.call(this),this.h=e,this.g={}}T(Ke,E);var $e=[];function Ge(e,t,n,r){Array.isArray(n)||(n&&($e[0]=n.toString()),n=$e);for(var i=0;i<n.length;i++){var s=ge(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function We(e){M(e.g,(function(e,t){this.g.hasOwnProperty(t)&&be(e)}),e),e.g={}}function Xe(){this.g=!0}function Je(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return Ne(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}Ke.prototype.M=function(){Ke.Z.M.call(this),We(this)},Ke.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Xe.prototype.Aa=function(){this.g=!1},Xe.prototype.info=function(){};var Ye={},Qe=null;function Ze(){return Qe=Qe||new ke}function et(e){ie.call(this,Ye.Ma,e)}function tt(e){var t=Ze();Ae(t,new et(t,e))}function nt(e,t){ie.call(this,Ye.STAT_EVENT,e),this.stat=t}function rt(e){var t=Ze();Ae(t,new nt(t,e))}function it(e,t){ie.call(this,Ye.Na,e),this.size=t}function st(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return d.setTimeout((function(){e()}),t)}Ye.Ma="serverreachability",T(et,ie),Ye.STAT_EVENT="statevent",T(nt,ie),Ye.Na="timingevent",T(it,ie);var ot={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},at={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function ct(){}function ut(e){return e.h||(e.h=e.i())}function ht(){}ct.prototype.h=null;var lt,dt={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function ft(){ie.call(this,"d")}function pt(){ie.call(this,"c")}function mt(){}function gt(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Ke(this),this.P=vt,e=K?125:void 0,this.W=new Ve(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new yt}function yt(){this.i=null,this.g="",this.h=!1}T(ft,ie),T(pt,ie),T(mt,ct),mt.prototype.g=function(){return new XMLHttpRequest},mt.prototype.i=function(){return{}},lt=new mt;var vt=45e3,wt={},bt={};function It(e,t,n){e.K=1,e.v=Ht(Ut(t)),e.s=n,e.U=!0,Tt(e,null)}function Tt(e,t){e.F=Date.now(),kt(e),e.A=Ut(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),rn(n.h,"t",r),e.C=0,n=e.l.H,e.h=new yt,e.g=or(e.l,n?t:null,!e.s),0<e.O&&(e.L=new He(b(e.Ia,e,e.g),e.O)),Ge(e.V,e.g,"readystatechange",e.gb),t=e.H?F(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),tt(1),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var h=u[0];u=u[1];var l=h.split("_");o=2<=l.length&&"type"==l[1]?o+(h+"=")+u+"&":o+(h+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function Et(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function St(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=_t(e,n))==bt){4==t&&(e.o=4,rt(14),i=!1),Je(e.j,e.m,null,"[Incomplete Response]");break}if(r==wt){e.o=4,rt(15),Je(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Je(e.j,e.m,r,null),xt(e,r)}Et(e)&&r!=bt&&r!=wt&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,rt(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Qn(t),t.L=!0,rt(11))):(Je(e.j,e.m,n,"[Invalid Chunked Response]"),Ot(e),Nt(e))}function _t(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?bt:(n=Number(t.substring(n,r)),isNaN(n)?wt:(r+=1)+n>t.length?bt:(t=t.substr(r,n),e.C=r+n,t))}function kt(e){e.Y=Date.now()+e.P,At(e,e.P)}function At(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=st(b(e.eb,e),t)}function Ct(e){e.B&&(d.clearTimeout(e.B),e.B=null)}function Nt(e){0==e.l.G||e.I||tr(e.l,e)}function Ot(e){Ct(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,ze(e.W),We(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function xt(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||dn(n.i,e)))if(n.I=e.N,!e.J&&dn(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(s){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;er(n),qn(n)}Yn(n),rt(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=st(b(n.ab,n),6e3));if(1>=ln(n.i)&&n.ka){try{n.ka()}catch(s){}n.ka=void 0}}else rr(n,11)}else if((e.J||n.g==e)&&er(n),!N(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var s=i[t];if(n.U=s[0],s=s[1],2==n.G)if("c"==s[0]){n.J=s[1],n.la=s[2];var o=s[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var a=s[4];null!=a&&(n.za=a,n.h.info("SVER="+n.za));var c=s[5];null!=c&&"number"===typeof c&&0<c&&(r=1.5*c,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var u=e.g;if(u){var h=u.g?u.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var l=r.i;!l.g&&(D(h,"spdy")||D(h,"quic")||D(h,"h2"))&&(l.j=l.l,l.g=new Set,l.h&&(fn(l,l.h),l.h=null))}if(r.D){var d=u.g?u.g.getResponseHeader("X-HTTP-Session-Id"):null;d&&(r.sa=d,qt(r.F,r.D,d))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var f=e;if((r=n).oa=sr(r,r.H?r.la:null,r.W),f.J){pn(r.i,f);var p=f,m=r.K;m&&p.setTimeout(m),p.B&&(Ct(p),kt(p)),r.g=f}else Jn(r);0<n.l.length&&$n(n)}else"stop"!=s[0]&&"close"!=s[0]||rr(n,7);else 3==n.G&&("stop"==s[0]||"close"==s[0]?"stop"==s[0]?rr(n,7):Bn(n):"noop"!=s[0]&&n.j&&n.j.wa(s),n.A=0)}tt(4)}catch(s){}}function Dt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(p(e)||"string"===typeof e)k(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(p(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;i=(r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(p(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e)).length;for(var s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}}function Rt(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Rt)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Pt(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Lt(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)Lt(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function Lt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(u=gt.prototype).setTimeout=function(e){this.P=e},u.gb=function(e){e=e.target;var t=this.L;t&&3==Fn(e)?t.l():this.Ia(e)},u.Ia=function(e){try{if(e==this.g)e:{var t=Fn(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||K||this.g&&(this.h.h||this.g.ga()||Un(this.g)))){this.I||4!=t||7==n||tt(8==n||0>=r?3:2),Ct(this);var i=this.g.ba();this.N=i;t:if(Et(this)){var s=Un(this.g);e="";var o=s.length,a=4==Fn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ot(this),Nt(this);var c="";break t}this.h.i=new d.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(s[n],{stream:a&&n==o-1});s.splice(0,o),this.h.g+=e,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var u,h=this.g;if((u=h.g?h.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(u)){var l=u;break t}}l=null}if(!(i=l)){this.i=!1,this.o=3,rt(12),Ot(this),Nt(this);break e}Je(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,xt(this,i)}this.U?(St(this,t,c),K&&this.i&&3==t&&(Ge(this.V,this.W,"tick",this.fb),this.W.start())):(Je(this.j,this.m,c,null),xt(this,c)),4==t&&Ot(this),this.i&&!this.I&&(4==t?tr(this.l,this):(this.i=!1,kt(this)))}else 400==i&&0<c.indexOf("Unknown SID")?(this.o=3,rt(12)):(this.o=0,rt(13)),Ot(this),Nt(this)}}}catch(t){}},u.fb=function(){if(this.g){var e=Fn(this.g),t=this.g.ga();this.C<t.length&&(Ct(this),St(this,e,t),this.i&&4!=e&&kt(this))}},u.cancel=function(){this.I=!0,Ot(this)},u.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(tt(3),rt(17)),Ot(this),this.o=2,Nt(this)):At(this,this.Y-e)},(u=Rt.prototype).R=function(){Pt(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},u.T=function(){return Pt(this),this.g.concat()},u.get=function(e,t){return Lt(this.h,e)?this.h[e]:t},u.set=function(e,t){Lt(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},u.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);e.call(t,s,i,this)}};var Mt=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ft(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Ft){this.g=void 0!==t?t:e.g,jt(this,e.j),this.s=e.s,Vt(this,e.i),zt(this,e.m),this.l=e.l,t=e.h;var n=new Zt;n.i=t.i,t.g&&(n.g=new Rt(t.g),n.h=t.h),Bt(this,n),this.o=e.o}else e&&(n=String(e).match(Mt))?(this.g=!!t,jt(this,n[1]||"",!0),this.s=Kt(n[2]||""),Vt(this,n[3]||"",!0),zt(this,n[4]),this.l=Kt(n[5]||"",!0),Bt(this,n[6]||"",!0),this.o=Kt(n[7]||"")):(this.g=!!t,this.h=new Zt(null,this.g))}function Ut(e){return new Ft(e)}function jt(e,t,n){e.j=n?Kt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Vt(e,t,n){e.i=n?Kt(t,!0):t}function zt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Bt(e,t,n){t instanceof Zt?(e.h=t,function(e,t){t&&!e.j&&(en(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(tn(this,t),rn(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=$t(t,Yt)),e.h=new Zt(t,e.g))}function qt(e,t,n){e.h.set(t,n)}function Ht(e){return qt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Kt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function $t(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Gt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Gt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ft.prototype.toString=function(){var e=[],t=this.j;t&&e.push($t(t,Wt,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push($t(t,Wt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push($t(n,"/"==n.charAt(0)?Jt:Xt,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",$t(n,Qt)),e.join("")};var Wt=/[#\/\?@]/g,Xt=/[#\?:]/g,Jt=/[#\?]/g,Yt=/[#\?@]/g,Qt=/#/g;function Zt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function en(e){e.g||(e.g=new Rt,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function tn(e,t){en(e),t=sn(e,t),Lt(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,Lt((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Pt(e)))}function nn(e,t){return en(e),t=sn(e,t),Lt(e.g.h,t)}function rn(e,t,n){tn(e,t),0<n.length&&(e.i=null,e.g.set(sn(e,t),C(n)),e.h+=n.length)}function sn(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(u=Zt.prototype).add=function(e,t){en(this),this.i=null,e=sn(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},u.forEach=function(e,t){en(this),this.g.forEach((function(n,r){k(n,(function(n){e.call(t,n,r,this)}),this)}),this)},u.T=function(){en(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],s=0;s<i.length;s++)n.push(t[r]);return n},u.R=function(e){en(this);var t=[];if("string"===typeof e)nn(this,e)&&(t=A(t,this.g.get(sn(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=A(t,e[n])}return t},u.set=function(e,t){return en(this),this.i=null,nn(this,e=sn(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},u.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},u.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var o=i;""!==r[s]&&(o+="="+encodeURIComponent(String(r[s]))),e.push(o)}}return this.i=e.join("&")};var on=function(e,t){this.h=e,this.g=t};function an(e){this.l=e||un,d.PerformanceNavigationTiming?e=0<(e=d.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(d.g&&d.g.Ea&&d.g.Ea()&&d.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var cn,un=10;function hn(e){return!!e.h||!!e.g&&e.g.size>=e.j}function ln(e){return e.h?1:e.g?e.g.size:0}function dn(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function fn(e,t){e.g?e.g.add(t):e.h=t}function pn(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function mn(e){var t,n;if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var r=e.i;try{for(var i=c(e.g.values()),s=i.next();!s.done;s=i.next()){var o=s.value;r=r.concat(o.D)}}catch(a){t={error:a}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}return C(e.i)}function gn(){}function yn(){this.g=new gn}function vn(e,t,n){var r=n||"";try{Dt(e,(function(e,n){var i=e;m(e)&&(i=Ne(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function wn(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(s){}}function bn(e){this.l=e.$b||null,this.j=e.ib||!1}function In(e,t){ke.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Tn,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}an.prototype.cancel=function(){var e,t;if(this.i=mn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=c(this.g.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(i){e={error:i}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.g.clear()}},gn.prototype.stringify=function(e){return d.JSON.stringify(e,void 0)},gn.prototype.parse=function(e){return d.JSON.parse(e,void 0)},T(bn,ct),bn.prototype.g=function(){return new In(this.l,this.j)},bn.prototype.i=(cn={},function(){return cn}),T(In,ke);var Tn=0;function En(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function Sn(e){e.readyState=4,e.l=null,e.j=null,e.A=null,_n(e)}function _n(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(u=In.prototype).open=function(e,t){if(this.readyState!=Tn)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,_n(this)},u.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||d).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},u.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Sn(this)),this.readyState=Tn},u.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,_n(this)),this.g&&(this.readyState=3,_n(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof d.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;En(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},u.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Sn(this):_n(this),3==this.readyState&&En(this)}},u.Ua=function(e){this.g&&(this.response=this.responseText=e,Sn(this))},u.Ta=function(e){this.g&&(this.response=e,Sn(this))},u.ha=function(){this.g&&Sn(this)},u.setRequestHeader=function(e,t){this.v.append(e,t)},u.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},u.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(In.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var kn=d.JSON.parse;function An(e){ke.call(this),this.headers=new Rt,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Cn,this.K=this.L=!1}T(An,ke);var Cn="",Nn=/^https?$/i,On=["POST","PUT"];function xn(e){return"content-type"==e.toLowerCase()}function Dn(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Rn(e),Ln(e)}function Rn(e){e.D||(e.D=!0,Ae(e,"complete"),Ae(e,"error"))}function Pn(e){if(e.h&&"undefined"!=typeof l&&(!e.C[1]||4!=Fn(e)||2!=e.ba()))if(e.v&&4==Fn(e))Be(e.Fa,0,e);else if(Ae(e,"readystatechange"),4==Fn(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var s=String(e.H).match(Mt)[1]||null;if(!s&&d.self&&d.self.location){var o=d.self.location.protocol;s=o.substr(0,o.length-1)}i=!Nn.test(s?s.toLowerCase():"")}t=i}if(t)Ae(e,"complete"),Ae(e,"success");else{e.m=6;try{var a=2<Fn(e)?e.g.statusText:""}catch(c){a=""}e.j=a+" ["+e.ba()+"]",Rn(e)}}finally{Ln(e)}}}function Ln(e,t){if(e.g){Mn(e);var n=e.g,r=e.C[0]?f:null;e.g=null,e.C=null,t||Ae(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Mn(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(d.clearTimeout(e.A),e.A=null)}function Fn(e){return e.g?e.g.readyState:0}function Un(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Cn:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function jn(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return M(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):qt(e,t,n))}function Vn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function zn(e){this.za=0,this.l=[],this.h=new Xe,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Vn("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Vn("baseRetryDelayMs",5e3,e),this.$a=Vn("retryDelaySeedMs",1e4,e),this.Ya=Vn("forwardChannelMaxRetries",2,e),this.ra=Vn("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new an(e&&e.concurrentRequestLimit),this.Ca=new yn,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function Bn(e){if(Hn(e),3==e.G){var t=e.V++,n=Ut(e.F);qt(n,"SID",e.J),qt(n,"RID",t),qt(n,"TYPE","terminate"),Wn(e,n),(t=new gt(e,e.h,t,void 0)).K=2,t.v=Ht(Ut(n)),n=!1,d.navigator&&d.navigator.sendBeacon&&(n=d.navigator.sendBeacon(t.v.toString(),"")),!n&&d.Image&&((new Image).src=t.v,n=!0),n||(t.g=or(t.l,null),t.g.ea(t.v)),t.F=Date.now(),kt(t)}ir(e)}function qn(e){e.g&&(Qn(e),e.g.cancel(),e.g=null)}function Hn(e){qn(e),e.u&&(d.clearTimeout(e.u),e.u=null),er(e),e.i.cancel(),e.m&&("number"===typeof e.m&&d.clearTimeout(e.m),e.m=null)}function Kn(e,t){e.l.push(new on(e.Za++,t)),3==e.G&&$n(e)}function $n(e){hn(e.i)||e.m||(e.m=!0,Me(e.Ha,e),e.C=0)}function Gn(e,t){var n;n=t?t.m:e.V++;var r=Ut(e.F);qt(r,"SID",e.J),qt(r,"RID",n),qt(r,"AID",e.U),Wn(e,r),e.o&&e.s&&jn(r,e.o,e.s),n=new gt(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Xn(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),fn(e.i,n),It(n,r,t)}function Wn(e,t){e.j&&Dt({},(function(e,n){qt(t,n,e)}))}function Xn(e,t,n){n=Math.min(e.l.length,n);var r=e.j?b(e.j.Oa,e.j,e):null;e:for(var i=e.l,s=-1;;){var o=["count="+n];-1==s?0<n?(s=i[0].h,o.push("ofs="+s)):s=0:o.push("ofs="+s);for(var a=!0,c=0;c<n;c++){var u=i[c].h,h=i[c].g;if(0>(u-=s))s=Math.max(0,i[c].h-100),a=!1;else try{vn(h,o,"req"+u+"_")}catch(l){r&&r(h)}}if(a){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Jn(e){e.g||e.u||(e.Y=1,Me(e.Ga,e),e.A=0)}function Yn(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=st(b(e.Ga,e),nr(e,e.A)),e.A++,!0)}function Qn(e){null!=e.B&&(d.clearTimeout(e.B),e.B=null)}function Zn(e){e.g=new gt(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Ut(e.oa);qt(t,"RID","rpc"),qt(t,"SID",e.J),qt(t,"CI",e.N?"0":"1"),qt(t,"AID",e.U),Wn(e,t),qt(t,"TYPE","xmlhttp"),e.o&&e.s&&jn(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Ht(Ut(t)),n.s=null,n.U=!0,Tt(n,e)}function er(e){null!=e.v&&(d.clearTimeout(e.v),e.v=null)}function tr(e,t){var n=null;if(e.g==t){er(e),Qn(e),e.g=null;var r=2}else{if(!dn(e.i,t))return;n=t.D,pn(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Ae(r=Ze(),new it(r,n,t,i)),$n(e)}else Jn(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(ln(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=st(b(e.Ha,e,t),nr(e,e.C)),e.C++,!0))}(e,t)||2==r&&Yn(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:rr(e,5);break;case 4:rr(e,10);break;case 3:rr(e,6);break;default:rr(e,2)}}function nr(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function rr(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=b(e.jb,e);n||(n=new Ft("//www.google.com/images/cleardot.gif"),d.location&&"http"==d.location.protocol||jt(n,"https"),Ht(n)),function(e,t){var n=new Xe;if(d.Image){var r=new Image;r.onload=I(wn,n,r,"TestLoadImage: loaded",!0,t),r.onerror=I(wn,n,r,"TestLoadImage: error",!1,t),r.onabort=I(wn,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=I(wn,n,r,"TestLoadImage: timeout",!1,t),d.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else rt(2);e.G=0,e.j&&e.j.va(t),ir(e),Hn(e)}function ir(e){e.G=0,e.I=-1,e.j&&(0==mn(e.i).length&&0==e.l.length||(e.i.i.length=0,C(e.l),e.l.length=0),e.j.ua())}function sr(e,t,n){var r=function(e){return e instanceof Ft?Ut(e):new Ft(e,void 0)}(n);if(""!=r.i)t&&Vt(r,t+"."+r.i),zt(r,r.m);else{var i=d.location;r=function(e,t,n,r){var i=new Ft(null,void 0);return e&&jt(i,e),t&&Vt(i,t),n&&zt(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&M(e.aa,(function(e,t){qt(r,t,e)})),t=e.D,n=e.sa,t&&n&&qt(r,t,n),qt(r,"VER",e.ma),Wn(e,r),r}function or(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new An(new bn({ib:!0})):new An(e.qa)).L=e.H,t}function ar(){}function cr(){if(q&&!(10<=Number(ne)))throw Error("Environmental error: no available transport.")}function ur(e,t){ke.call(this),this.g=new zn(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!N(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!N(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new dr(this)}function hr(e){ft.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function lr(){pt.call(this),this.status=1}function dr(e){this.g=e}(u=An.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():lt.g(),this.C=this.u?ut(this.u):ut(lt),this.g.onreadystatechange=b(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(s){return void Dn(this,s)}e=n||"";var i=new Rt(this.headers);r&&Dt(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=xn,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=d.FormData&&e instanceof d.FormData,!(0<=_(On,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Mn(this),0<this.B&&((this.K=function(e){return q&&ee()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=b(this.pa,this)):this.A=Be(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){Dn(this,s)}},u.pa=function(){"undefined"!=typeof l&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ae(this,"timeout"),this.abort(8))},u.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Ae(this,"complete"),Ae(this,"abort"),Ln(this))},u.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ln(this,!0)),An.Z.M.call(this)},u.Fa=function(){this.s||(this.F||this.v||this.l?Pn(this):this.cb())},u.cb=function(){Pn(this)},u.ba=function(){try{return 2<Fn(this)?this.g.status:-1}catch(cn){return-1}},u.ga=function(){try{return this.g?this.g.responseText:""}catch(cn){return""}},u.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),kn(t)}},u.Da=function(){return this.m},u.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(u=zn.prototype).ma=8,u.G=1,u.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},u.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new gt(this,this.h,e,void 0),n=this.s;if(this.P&&(n?j(n=F(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var s=this.l[i];if(void 0===(s="__data__"in s.g&&"string"===typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(r+=s)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Xn(this,t,r),qt(i=Ut(this.F),"RID",e),qt(i,"CVER",22),this.D&&qt(i,"X-HTTP-Session-Id",this.D),Wn(this,i),this.o&&n&&jn(i,this.o,n),fn(this.i,t),this.Ra&&qt(i,"TYPE","init"),this.ja?(qt(i,"$req",r),qt(i,"SID","null"),t.$=!0,It(t,i,null)):It(t,i,r),this.G=2}}else 3==this.G&&(e?Gn(this,e):0==this.l.length||hn(this.i)||Gn(this))},u.Ga=function(){if(this.u=null,Zn(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=st(b(this.bb,this),e)}},u.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,rt(10),qn(this),Zn(this))},u.ab=function(){null!=this.v&&(this.v=null,qn(this),Yn(this),rt(19))},u.jb=function(e){e?(this.h.info("Successfully pinged google.com"),rt(2)):(this.h.info("Failed to ping google.com"),rt(1))},(u=ar.prototype).xa=function(){},u.wa=function(){},u.va=function(){},u.ua=function(){},u.Oa=function(){},cr.prototype.g=function(e,t){return new ur(e,t)},T(ur,ke),ur.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Me(b(e.hb,e,t))),rt(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=sr(e,null,e.W),$n(e)},ur.prototype.close=function(){Bn(this.g)},ur.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,Kn(this.g,t)}else this.v?((t={}).__data__=Ne(e),Kn(this.g,t)):Kn(this.g,e)},ur.prototype.M=function(){this.g.j=null,delete this.j,Bn(this.g),delete this.g,ur.Z.M.call(this)},T(hr,ft),T(lr,pt),T(dr,ar),dr.prototype.xa=function(){Ae(this.g,"a")},dr.prototype.wa=function(e){Ae(this.g,new hr(e))},dr.prototype.va=function(e){Ae(this.g,new lr(e))},dr.prototype.ua=function(){Ae(this.g,"b")},cr.prototype.createWebChannel=cr.prototype.g,ur.prototype.send=ur.prototype.u,ur.prototype.open=ur.prototype.m,ur.prototype.close=ur.prototype.close,ot.NO_ERROR=0,ot.TIMEOUT=8,ot.HTTP_ERROR=6,at.COMPLETE="complete",ht.EventType=dt,dt.OPEN="a",dt.CLOSE="b",dt.ERROR="c",dt.MESSAGE="d",ke.prototype.listen=ke.prototype.N,An.prototype.listenOnce=An.prototype.O,An.prototype.getLastError=An.prototype.La,An.prototype.getLastErrorCode=An.prototype.Da,An.prototype.getStatus=An.prototype.ba,An.prototype.getResponseJson=An.prototype.Qa,An.prototype.getResponseText=An.prototype.ga,An.prototype.send=An.prototype.ea;var fr=function(){return new cr},pr=function(){return Ze()},mr=ot,gr=at,yr=Ye,vr={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},wr=bn,br=ht,Ir=An,Tr=n(4155);class Er{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Er.UNAUTHENTICATED=new Er(null),Er.GOOGLE_CREDENTIALS=new Er("google-credentials-uid"),Er.FIRST_PARTY=new Er("first-party-uid"),Er.MOCK_USER=new Er("mock-user");let Sr="9.0.1";const _r=new s.Yd("@firebase/firestore");function kr(){return _r.logLevel}function Ar(e,...t){if(_r.logLevel<=s.in.DEBUG){const n=t.map(Or);_r.debug(`Firestore (${Sr}): ${e}`,...n)}}function Cr(e,...t){if(_r.logLevel<=s.in.ERROR){const n=t.map(Or);_r.error(`Firestore (${Sr}): ${e}`,...n)}}function Nr(e,...t){if(_r.logLevel<=s.in.WARN){const n=t.map(Or);_r.warn(`Firestore (${Sr}): ${e}`,...n)}}function Or(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function xr(e="Unexpected state"){const t=`FIRESTORE (${Sr}) INTERNAL ASSERTION FAILED: `+e;throw Cr(t),new Error(t)}function Dr(e,t){e||xr()}function Rr(e,t){return e}const Pr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Lr extends Error{constructor(e,t){super(t),this.code=e,this.message=t,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Mr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Fr{constructor(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${e}`}}class Ur{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Er.UNAUTHENTICATED)))}shutdown(){}}class jr{constructor(e){this.t=e,this.currentUser=Er.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Mr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Mr,e.enqueueRetryable((()=>r(this.currentUser)))};const s=t=>{e.enqueueRetryable((async()=>{Ar("FirebaseCredentialsProvider","Auth detected"),this.auth=t,this.auth.addAuthTokenListener(this.o),await i.promise,await r(this.currentUser)}))};this.t.onInit((e=>s(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?s(e):(Ar("FirebaseCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Mr)}}),0),e.enqueueRetryable((async()=>{0===this.i&&(await i.promise,await r(this.currentUser))}))}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Ar("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Dr("string"==typeof t.accessToken),new Fr(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Dr(null===e||"string"==typeof e),new Er(e)}}class Vr{constructor(e,t,n){this.h=e,this.l=t,this.m=n,this.type="FirstParty",this.user=Er.FIRST_PARTY}get authHeaders(){const e={"X-Goog-AuthUser":this.l},t=this.h.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),this.m&&(e["X-Goog-Iam-Authorization-Token"]=this.m),e}}class zr{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new Vr(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable((()=>t(Er.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Br{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.g(e),this.p=e=>t.writeSequenceNumber(e))}g(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.p&&this.p(e),e}}function qr(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}Br.T=-1;class Hr{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const r=qr(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length))}return n}}function Kr(e,t){return e<t?-1:e>t?1:0}function $r(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function Gr(e){return e+"\0"}class Wr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Lr(Pr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Lr(Pr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Lr(Pr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Lr(Pr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Wr.fromMillis(Date.now())}static fromDate(e){return Wr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Wr(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Kr(this.nanoseconds,e.nanoseconds):Kr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Xr{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Xr(e)}static min(){return new Xr(new Wr(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Jr(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Yr(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Qr(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Zr{constructor(e,t,n){void 0===t?t=0:t>e.length&&xr(),void 0===n?n=e.length-t:n>e.length-t&&xr(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Zr.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Zr?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ei extends Zr{construct(e,t,n){return new ei(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Lr(Pr.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((e=>e.length>0)))}return new ei(t)}static emptyPath(){return new ei([])}}const ti=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ni extends Zr{construct(e,t,n){return new ni(e,t,n)}static isValidIdentifier(e){return ti.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ni.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ni(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Lr(Pr.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Lr(Pr.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Lr(Pr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Lr(Pr.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ni(t)}static emptyPath(){return new ni([])}}class ri{constructor(e){this.fields=e,e.sort(ni.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return $r(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class ii{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new ii(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new ii(t)}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Kr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ii.EMPTY_BYTE_STRING=new ii("");const si=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function oi(e){if(Dr(!!e),"string"==typeof e){let t=0;const n=si.exec(e);if(Dr(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:ai(e.seconds),nanos:ai(e.nanos)}}function ai(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function ci(e){return"string"==typeof e?ii.fromBase64String(e):ii.fromUint8Array(e)}function ui(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function hi(e){const t=e.mapValue.fields.__previous_value__;return ui(t)?hi(t):t}function li(e){const t=oi(e.mapValue.fields.__local_write_time__.timestampValue);return new Wr(t.seconds,t.nanos)}function di(e){return null==e}function fi(e){return 0===e&&1/e==-1/0}function pi(e){return"number"==typeof e&&Number.isInteger(e)&&!fi(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}class mi{constructor(e){this.path=e}static fromPath(e){return new mi(ei.fromString(e))}static fromName(e){return new mi(ei.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return null!==e&&0===ei.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ei.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new mi(new ei(e.slice()))}}function gi(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ui(e)?4:10:xr()}function yi(e,t){const n=gi(e);if(n!==gi(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return li(e).isEqual(li(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=oi(e.timestampValue),r=oi(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return ci(e.bytesValue).isEqual(ci(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return ai(e.geoPointValue.latitude)===ai(t.geoPointValue.latitude)&&ai(e.geoPointValue.longitude)===ai(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return ai(e.integerValue)===ai(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=ai(e.doubleValue),r=ai(t.doubleValue);return n===r?fi(n)===fi(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return $r(e.arrayValue.values||[],t.arrayValue.values||[],yi);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Jr(n)!==Jr(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!yi(n[i],r[i])))return!1;return!0}(e,t);default:return xr()}}function vi(e,t){return void 0!==(e.values||[]).find((e=>yi(e,t)))}function wi(e,t){const n=gi(e),r=gi(t);if(n!==r)return Kr(n,r);switch(n){case 0:return 0;case 1:return Kr(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=ai(e.integerValue||e.doubleValue),r=ai(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return bi(e.timestampValue,t.timestampValue);case 4:return bi(li(e),li(t));case 5:return Kr(e.stringValue,t.stringValue);case 6:return function(e,t){const n=ci(e),r=ci(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Kr(n[i],r[i]);if(0!==e)return e}return Kr(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Kr(ai(e.latitude),ai(t.latitude));return 0!==n?n:Kr(ai(e.longitude),ai(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=wi(n[i],r[i]);if(e)return e}return Kr(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=Kr(r[o],s[o]);if(0!==e)return e;const t=wi(n[r[o]],i[s[o]]);if(0!==t)return t}return Kr(r.length,s.length)}(e.mapValue,t.mapValue);default:throw xr()}}function bi(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Kr(e,t);const n=oi(e),r=oi(t),i=Kr(n.seconds,r.seconds);return 0!==i?i:Kr(n.nanos,r.nanos)}function Ii(e){return Ti(e)}function Ti(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=oi(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?ci(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,mi.fromName(n).toString()):"geoPointValue"in e?`geo(${(t=e.geoPointValue).latitude},${t.longitude})`:"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Ti(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${Ti(e.fields[i])}`;return n+"}"}(e.mapValue):xr();var t,n}function Ei(e){return!!e&&"integerValue"in e}function Si(e){return!!e&&"arrayValue"in e}function _i(e){return!!e&&"nullValue"in e}function ki(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ai(e){return!!e&&"mapValue"in e}function Ci(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Yr(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Ci(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Ci(e.arrayValue.values[n]);return t}return Object.assign({},e)}class Ni{constructor(e){this.value=e}static empty(){return new Ni({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Ai(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ci(t)}setAll(e){let t=ni.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Ci(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Ai(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return yi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Ai(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Yr(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new Ni(Ci(this.value))}}function Oi(e){const t=[];return Yr(e.fields,((e,n)=>{const r=new ni([e]);if(Ai(n)){const e=Oi(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new ri(t)}class xi{constructor(e,t,n,r,i){this.key=e,this.documentType=t,this.version=n,this.data=r,this.documentState=i}static newInvalidDocument(e){return new xi(e,0,Xr.min(),Ni.empty(),0)}static newFoundDocument(e,t,n){return new xi(e,1,t,n,0)}static newNoDocument(e,t){return new xi(e,2,t,Ni.empty(),0)}static newUnknownDocument(e,t){return new xi(e,3,t,Ni.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ni.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ni.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof xi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}clone(){return new xi(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Di{constructor(e,t=null,n=[],r=[],i=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.A=null}}function Ri(e,t=null,n=[],r=[],i=null,s=null,o=null){return new Di(e,t,n,r,i,s,o)}function Pi(e){const t=Rr(e);if(null===t.A){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>function(e){return e.field.canonicalString()+e.op.toString()+Ii(e.value)}(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),di(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=Gi(t.startAt)),t.endAt&&(e+="|ub:",e+=Gi(t.endAt)),t.A=e}return t.A}function Li(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<e.orderBy.length;i++)if(!Xi(e.orderBy[i],t.orderBy[i]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let i=0;i<e.filters.length;i++)if(n=e.filters[i],r=t.filters[i],n.op!==r.op||!n.field.isEqual(r.field)||!yi(n.value,r.value))return!1;var n,r;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Yi(e.startAt,t.startAt)&&Yi(e.endAt,t.endAt)}function Mi(e){return mi.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Fi extends class{}{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.R(e,t,n):new Ui(e,t,n):"array-contains"===t?new Bi(e,n):"in"===t?new qi(e,n):"not-in"===t?new Hi(e,n):"array-contains-any"===t?new Ki(e,n):new Fi(e,t,n)}static R(e,t,n){return"in"===t?new ji(e,n):new Vi(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.P(wi(t,this.value)):null!==t&&gi(this.value)===gi(t)&&this.P(wi(t,this.value))}P(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return xr()}}v(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Ui extends Fi{constructor(e,t,n){super(e,t,n),this.key=mi.fromName(n.referenceValue)}matches(e){const t=mi.comparator(e.key,this.key);return this.P(t)}}class ji extends Fi{constructor(e,t){super(e,"in",t),this.keys=zi("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Vi extends Fi{constructor(e,t){super(e,"not-in",t),this.keys=zi("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function zi(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>mi.fromName(e.referenceValue)))}class Bi extends Fi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Si(t)&&vi(t.arrayValue,this.value)}}class qi extends Fi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&vi(this.value.arrayValue,t)}}class Hi extends Fi{constructor(e,t){super(e,"not-in",t)}matches(e){if(vi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!vi(this.value.arrayValue,t)}}class Ki extends Fi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Si(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>vi(this.value.arrayValue,e)))}}class $i{constructor(e,t){this.position=e,this.before=t}}function Gi(e){return`${e.before?"b":"a"}:${e.position.map((e=>Ii(e))).join(",")}`}class Wi{constructor(e,t="asc"){this.field=e,this.dir=t}}function Xi(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Ji(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?mi.comparator(mi.fromName(o.referenceValue),n.key):wi(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return e.before?r<=0:r<0}function Yi(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.before!==t.before||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!yi(e.position[n],t.position[n]))return!1;return!0}class Qi{constructor(e,t=null,n=[],r=[],i=null,s="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.V=null,this.S=null,this.startAt,this.endAt}}function Zi(e,t,n,r,i,s,o,a){return new Qi(e,t,n,r,i,s,o,a)}function es(e){return new Qi(e)}function ts(e){return!di(e.limit)&&"F"===e.limitType}function ns(e){return!di(e.limit)&&"L"===e.limitType}function rs(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function is(e){for(const t of e.filters)if(t.v())return t.field;return null}function ss(e){return null!==e.collectionGroup}function os(e){const t=Rr(e);if(null===t.V){t.V=[];const e=is(t),n=rs(t);if(null!==e&&null===n)e.isKeyField()||t.V.push(new Wi(e)),t.V.push(new Wi(ni.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.V.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.V.push(new Wi(ni.keyField(),e))}}}return t.V}function as(e){const t=Rr(e);if(!t.S)if("F"===t.limitType)t.S=Ri(t.path,t.collectionGroup,os(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const i of os(t)){const t="desc"===i.dir?"asc":"desc";e.push(new Wi(i.field,t))}const n=t.endAt?new $i(t.endAt.position,!t.endAt.before):null,r=t.startAt?new $i(t.startAt.position,!t.startAt.before):null;t.S=Ri(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t.S}function cs(e,t,n){return new Qi(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function us(e,t){return Li(as(e),as(t))&&e.limitType===t.limitType}function hs(e){return`${Pi(as(e))}|lt:${e.limitType}`}function ls(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>{return`${(t=e).field.canonicalString()} ${t.op} ${Ii(t.value)}`;var t})).join(", ")}]`),di(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: "+Gi(e.startAt)),e.endAt&&(t+=", endAt: "+Gi(e.endAt)),`Target(${t})`}(as(e))}; limitType=${e.limitType})`}function ds(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):mi.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of e.explicitOrderBy)if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!Ji(e.startAt,os(e),t))&&(!e.endAt||!Ji(e.endAt,os(e),t))}(e,t)}function fs(e){return(t,n)=>{let r=!1;for(const i of os(e)){const e=ps(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function ps(e,t,n){const r=e.field.isKeyField()?mi.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?wi(r,i):xr()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return xr()}}function ms(e,t){if(e.D){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fi(t)?"-0":t}}function gs(e){return{integerValue:""+e}}function ys(e,t){return pi(t)?gs(t):ms(e,t)}class vs{constructor(){this._=void 0}}function ws(e,t,n){return e instanceof Ts?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Es?Ss(e,t):e instanceof _s?ks(e,t):function(e,t){const n=Is(e,t),r=Cs(n)+Cs(e.C);return Ei(n)&&Ei(e.C)?gs(r):ms(e.N,r)}(e,t)}function bs(e,t,n){return e instanceof Es?Ss(e,t):e instanceof _s?ks(e,t):n}function Is(e,t){return e instanceof As?Ei(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class Ts extends vs{}class Es extends vs{constructor(e){super(),this.elements=e}}function Ss(e,t){const n=Ns(t);for(const r of e.elements)n.some((e=>yi(e,r)))||n.push(r);return{arrayValue:{values:n}}}class _s extends vs{constructor(e){super(),this.elements=e}}function ks(e,t){let n=Ns(t);for(const r of e.elements)n=n.filter((e=>!yi(e,r)));return{arrayValue:{values:n}}}class As extends vs{constructor(e,t){super(),this.N=e,this.C=t}}function Cs(e){return ai(e.integerValue||e.doubleValue)}function Ns(e){return Si(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Os{constructor(e,t){this.field=e,this.transform=t}}class xs{constructor(e,t){this.version=e,this.transformResults=t}}class Ds{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ds}static exists(e){return new Ds(void 0,e)}static updateTime(e){return new Ds(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Rs(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Ps{}function Ls(e,t,n){e instanceof Vs?function(e,t,n){const r=e.value.clone(),i=qs(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof zs?function(e,t,n){if(!Rs(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=qs(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Bs(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Ms(e,t,n){e instanceof Vs?function(e,t,n){if(!Rs(e.precondition,t))return;const r=e.value.clone(),i=Hs(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(js(t),r).setHasLocalMutations()}(e,t,n):e instanceof zs?function(e,t,n){if(!Rs(e.precondition,t))return;const r=Hs(e.fieldTransforms,n,t),i=t.data;i.setAll(Bs(e)),i.setAll(r),t.convertToFoundDocument(js(t),i).setHasLocalMutations()}(e,t,n):function(e,t){Rs(e.precondition,t)&&t.convertToNoDocument(Xr.min())}(e,t)}function Fs(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Is(r.transform,e||null);null!=i&&(null==n&&(n=Ni.empty()),n.set(r.field,i))}return n||null}function Us(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&$r(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Es&&t instanceof Es||e instanceof _s&&t instanceof _s?$r(e.elements,t.elements,yi):e instanceof As&&t instanceof As?yi(e.C,t.C):e instanceof Ts&&t instanceof Ts}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function js(e){return e.isFoundDocument()?e.version:Xr.min()}class Vs extends Ps{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}}class zs extends Ps{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}}function Bs(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function qs(e,t,n){const r=new Map;Dr(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,bs(o,a,n[i]))}return r}function Hs(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,ws(e,s,t))}return r}class Ks extends Ps{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class $s extends Ps{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class Gs{constructor(e){this.count=e}}var Ws,Xs;function Js(e){switch(e){case Pr.OK:return xr();case Pr.CANCELLED:case Pr.UNKNOWN:case Pr.DEADLINE_EXCEEDED:case Pr.RESOURCE_EXHAUSTED:case Pr.INTERNAL:case Pr.UNAVAILABLE:case Pr.UNAUTHENTICATED:return!1;case Pr.INVALID_ARGUMENT:case Pr.NOT_FOUND:case Pr.ALREADY_EXISTS:case Pr.PERMISSION_DENIED:case Pr.FAILED_PRECONDITION:case Pr.ABORTED:case Pr.OUT_OF_RANGE:case Pr.UNIMPLEMENTED:case Pr.DATA_LOSS:return!0;default:return xr()}}function Ys(e){if(void 0===e)return Cr("GRPC error has no .code"),Pr.UNKNOWN;switch(e){case Ws.OK:return Pr.OK;case Ws.CANCELLED:return Pr.CANCELLED;case Ws.UNKNOWN:return Pr.UNKNOWN;case Ws.DEADLINE_EXCEEDED:return Pr.DEADLINE_EXCEEDED;case Ws.RESOURCE_EXHAUSTED:return Pr.RESOURCE_EXHAUSTED;case Ws.INTERNAL:return Pr.INTERNAL;case Ws.UNAVAILABLE:return Pr.UNAVAILABLE;case Ws.UNAUTHENTICATED:return Pr.UNAUTHENTICATED;case Ws.INVALID_ARGUMENT:return Pr.INVALID_ARGUMENT;case Ws.NOT_FOUND:return Pr.NOT_FOUND;case Ws.ALREADY_EXISTS:return Pr.ALREADY_EXISTS;case Ws.PERMISSION_DENIED:return Pr.PERMISSION_DENIED;case Ws.FAILED_PRECONDITION:return Pr.FAILED_PRECONDITION;case Ws.ABORTED:return Pr.ABORTED;case Ws.OUT_OF_RANGE:return Pr.OUT_OF_RANGE;case Ws.UNIMPLEMENTED:return Pr.UNIMPLEMENTED;case Ws.DATA_LOSS:return Pr.DATA_LOSS;default:return xr()}}(Xs=Ws||(Ws={}))[Xs.OK=0]="OK",Xs[Xs.CANCELLED=1]="CANCELLED",Xs[Xs.UNKNOWN=2]="UNKNOWN",Xs[Xs.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xs[Xs.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xs[Xs.NOT_FOUND=5]="NOT_FOUND",Xs[Xs.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xs[Xs.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xs[Xs.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xs[Xs.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xs[Xs.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xs[Xs.ABORTED=10]="ABORTED",Xs[Xs.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xs[Xs.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xs[Xs.INTERNAL=13]="INTERNAL",Xs[Xs.UNAVAILABLE=14]="UNAVAILABLE",Xs[Xs.DATA_LOSS=15]="DATA_LOSS";class Qs{constructor(e,t){this.comparator=e,this.root=t||eo.EMPTY}insert(e,t){return new Qs(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,eo.BLACK,null,null))}remove(e){return new Qs(this.comparator,this.root.remove(e,this.comparator).copy(null,null,eo.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zs(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zs(this.root,e,this.comparator,!0)}}class Zs{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class eo{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:eo.RED,this.left=null!=r?r:eo.EMPTY,this.right=null!=i?i:eo.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new eo(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return eo.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return eo.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,eo.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,eo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw xr();if(this.right.isRed())throw xr();const e=this.left.check();if(e!==this.right.check())throw xr();return e+(this.isRed()?0:1)}}eo.EMPTY=null,eo.RED=!0,eo.BLACK=!1,eo.EMPTY=new class{constructor(){this.size=0}get key(){throw xr()}get value(){throw xr()}get color(){throw xr()}get left(){throw xr()}get right(){throw xr()}copy(e,t,n,r,i){return this}insert(e,t,n){return new eo(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class to{constructor(e){this.comparator=e,this.data=new Qs(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new no(this.data.getIterator())}getIteratorFrom(e){return new no(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof to))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new to(this.comparator);return t.data=e,t}}class no{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const ro=new Qs(mi.comparator);function io(){return ro}const so=new Qs(mi.comparator);function oo(){return so}const ao=new Qs(mi.comparator);function co(){return ao}const uo=new to(mi.comparator);function ho(...e){let t=uo;for(const n of e)t=t.add(n);return t}const lo=new to(Kr);function fo(){return lo}class po{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t){const n=new Map;return n.set(e,mo.createSynthesizedTargetChangeForCurrentChange(e,t)),new po(Xr.min(),n,fo(),io(),ho())}}class mo{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t){return new mo(ii.EMPTY_BYTE_STRING,t,ho(),ho(),ho())}}class go{constructor(e,t,n,r){this.k=e,this.removedTargetIds=t,this.key=n,this.$=r}}class yo{constructor(e,t){this.targetId=e,this.O=t}}class vo{constructor(e,t,n=ii.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class wo{constructor(){this.F=0,this.M=To(),this.L=ii.EMPTY_BYTE_STRING,this.B=!1,this.U=!0}get current(){return this.B}get resumeToken(){return this.L}get q(){return 0!==this.F}get K(){return this.U}j(e){e.approximateByteSize()>0&&(this.U=!0,this.L=e)}W(){let e=ho(),t=ho(),n=ho();return this.M.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:xr()}})),new mo(this.L,this.B,e,t,n)}G(){this.U=!1,this.M=To()}H(e,t){this.U=!0,this.M=this.M.insert(e,t)}J(e){this.U=!0,this.M=this.M.remove(e)}Y(){this.F+=1}X(){this.F-=1}Z(){this.U=!0,this.B=!0}}class bo{constructor(e){this.tt=e,this.et=new Map,this.nt=io(),this.st=Io(),this.it=new to(Kr)}rt(e){for(const t of e.k)e.$&&e.$.isFoundDocument()?this.ot(t,e.$):this.at(t,e.key,e.$);for(const t of e.removedTargetIds)this.at(t,e.key,e.$)}ct(e){this.forEachTarget(e,(t=>{const n=this.ut(t);switch(e.state){case 0:this.ht(t)&&n.j(e.resumeToken);break;case 1:n.X(),n.q||n.G(),n.j(e.resumeToken);break;case 2:n.X(),n.q||this.removeTarget(t);break;case 3:this.ht(t)&&(n.Z(),n.j(e.resumeToken));break;case 4:this.ht(t)&&(this.lt(t),n.j(e.resumeToken));break;default:xr()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.et.forEach(((e,n)=>{this.ht(n)&&t(n)}))}ft(e){const t=e.targetId,n=e.O.count,r=this.dt(t);if(r){const e=r.target;if(Mi(e))if(0===n){const n=new mi(e.path);this.at(t,n,xi.newNoDocument(n,Xr.min()))}else Dr(1===n);else this.wt(t)!==n&&(this.lt(t),this.it=this.it.add(t))}}_t(e){const t=new Map;this.et.forEach(((n,r)=>{const i=this.dt(r);if(i){if(n.current&&Mi(i.target)){const t=new mi(i.target.path);null!==this.nt.get(t)||this.gt(r,t)||this.at(r,t,xi.newNoDocument(t,e))}n.K&&(t.set(r,n.W()),n.G())}}));let n=ho();this.st.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.dt(e);return!t||2===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))}));const r=new po(e,t,this.it,this.nt,n);return this.nt=io(),this.st=Io(),this.it=new to(Kr),r}ot(e,t){if(!this.ht(e))return;const n=this.gt(e,t.key)?2:0;this.ut(e).H(t.key,n),this.nt=this.nt.insert(t.key,t),this.st=this.st.insert(t.key,this.yt(t.key).add(e))}at(e,t,n){if(!this.ht(e))return;const r=this.ut(e);this.gt(e,t)?r.H(t,1):r.J(t),this.st=this.st.insert(t,this.yt(t).delete(e)),n&&(this.nt=this.nt.insert(t,n))}removeTarget(e){this.et.delete(e)}wt(e){const t=this.ut(e).W();return this.tt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Y(e){this.ut(e).Y()}ut(e){let t=this.et.get(e);return t||(t=new wo,this.et.set(e,t)),t}yt(e){let t=this.st.get(e);return t||(t=new to(Kr),this.st=this.st.insert(e,t)),t}ht(e){const t=null!==this.dt(e);return t||Ar("WatchChangeAggregator","Detected inactive target",e),t}dt(e){const t=this.et.get(e);return t&&t.q?null:this.tt.Et(e)}lt(e){this.et.set(e,new wo),this.tt.getRemoteKeysForTarget(e).forEach((t=>{this.at(e,t,null)}))}gt(e,t){return this.tt.getRemoteKeysForTarget(e).has(t)}}function Io(){return new Qs(mi.comparator)}function To(){return new Qs(mi.comparator)}const Eo={asc:"ASCENDING",desc:"DESCENDING"},So={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class _o{constructor(e,t){this.databaseId=e,this.D=t}}function ko(e,t){return e.D?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Ao(e,t){return e.D?t.toBase64():t.toUint8Array()}function Co(e,t){return ko(e,t.toTimestamp())}function No(e){return Dr(!!e),Xr.fromTimestamp(function(e){const t=oi(e);return new Wr(t.seconds,t.nanos)}(e))}function Oo(e,t){return function(e){return new ei(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function xo(e){const t=ei.fromString(e);return Dr(ta(t)),t}function Do(e,t){return Oo(e.databaseId,t.path)}function Ro(e,t){const n=xo(t);if(n.get(1)!==e.databaseId.projectId)throw new Lr(Pr.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Lr(Pr.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new mi(Fo(n))}function Po(e,t){return Oo(e.databaseId,t)}function Lo(e){const t=xo(e);return 4===t.length?ei.emptyPath():Fo(t)}function Mo(e){return new ei(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Fo(e){return Dr(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Uo(e,t,n){return{name:Do(e,t),fields:n.value.mapValue.fields}}function jo(e,t,n){const r=Ro(e,t.name),i=No(t.updateTime),s=new Ni({mapValue:{fields:t.fields}}),o=xi.newFoundDocument(r,i,s);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Vo(e,t){let n;if(t instanceof Vs)n={update:Uo(e,t.key,t.value)};else if(t instanceof Ks)n={delete:Do(e,t.key)};else if(t instanceof zs)n={update:Uo(e,t.key,t.data),updateMask:ea(t.fieldMask)};else{if(!(t instanceof $s))return xr();n={verify:Do(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Ts)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Es)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof _s)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof As)return{fieldPath:t.field.canonicalString(),increment:n.C};throw xr()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Co(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:xr()}(e,t.precondition)),n}function zo(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Ds.updateTime(No(e.updateTime)):void 0!==e.exists?Ds.exists(e.exists):Ds.none()}(t.currentDocument):Ds.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)Dr("REQUEST_TIME"===t.setToServerValue),n=new Ts;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new Es(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new _s(e)}else"increment"in t?n=new As(e,t.increment):xr();const r=ni.fromServerFormat(t.fieldPath);return new Os(r,n)}(e,t))):[];if(t.update){t.update.name;const i=Ro(e,t.update.name),s=new Ni({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new ri(t.map((e=>ni.fromServerFormat(e))))}(t.updateMask);return new zs(i,s,e,n,r)}return new Vs(i,s,n,r)}if(t.delete){const r=Ro(e,t.delete);return new Ks(r,n)}if(t.verify){const r=Ro(e,t.verify);return new $s(r,n)}return xr()}function Bo(e,t){return{documents:[Po(e,t.path)]}}function qo(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Po(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Po(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0===e.length)return;const t=e.map((e=>function(e){if("=="===e.op){if(ki(e.value))return{unaryFilter:{field:Jo(e.field),op:"IS_NAN"}};if(_i(e.value))return{unaryFilter:{field:Jo(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(ki(e.value))return{unaryFilter:{field:Jo(e.field),op:"IS_NOT_NAN"}};if(_i(e.value))return{unaryFilter:{field:Jo(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jo(e.field),op:Xo(e.op),value:e.value}}}(e)));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}(t.filters);i&&(n.structuredQuery.where=i);const s=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Jo(e.field),direction:Wo(e.dir)}}(e)))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=function(e,t){return e.D||di(t)?t:{value:t}}(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=$o(t.startAt)),t.endAt&&(n.structuredQuery.endAt=$o(t.endAt)),n}function Ho(e){let t=Lo(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Dr(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=Ko(n.where));let o=[];n.orderBy&&(o=n.orderBy.map((e=>function(e){return new Wi(Yo(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,di(t)?null:t}(n.limit));let c=null;n.startAt&&(c=Go(n.startAt));let u=null;return n.endAt&&(u=Go(n.endAt)),Zi(t,i,o,s,a,"F",c,u)}function Ko(e){return e?void 0!==e.unaryFilter?[Zo(e)]:void 0!==e.fieldFilter?[Qo(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((e=>Ko(e))).reduce(((e,t)=>e.concat(t))):xr():[]}function $o(e){return{before:e.before,values:e.position}}function Go(e){const t=!!e.before,n=e.values||[];return new $i(n,t)}function Wo(e){return Eo[e]}function Xo(e){return So[e]}function Jo(e){return{fieldPath:e.canonicalString()}}function Yo(e){return ni.fromServerFormat(e.fieldPath)}function Qo(e){return Fi.create(Yo(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return xr()}}(e.fieldFilter.op),e.fieldFilter.value)}function Zo(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Yo(e.unaryFilter.field);return Fi.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Yo(e.unaryFilter.field);return Fi.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Yo(e.unaryFilter.field);return Fi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Yo(e.unaryFilter.field);return Fi.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return xr()}}function ea(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function ta(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function na(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=ia(t)),t=ra(e.get(n),t);return ia(t)}function ra(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function ia(e){return e+"\x01\x01"}function sa(e){const t=e.length;if(Dr(t>=2),2===t)return Dr("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),ei.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&xr(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:xr()}s=t+2}return new ei(r)}class oa{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class aa{constructor(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n}}aa.store="owner",aa.key="owner";class ca{constructor(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n}}ca.store="mutationQueues",ca.keyPath="userId";class ua{constructor(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}}ua.store="mutations",ua.keyPath="batchId",ua.userMutationsIndex="userMutationsIndex",ua.userMutationsKeyPath=["userId","batchId"];class ha{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,na(t)]}static key(e,t,n){return[e,na(t),n]}}ha.store="documentMutations",ha.PLACEHOLDER=new ha;class la{constructor(e,t){this.path=e,this.readTime=t}}class da{constructor(e,t){this.path=e,this.version=t}}class fa{constructor(e,t,n,r,i,s){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=s}}fa.store="remoteDocuments",fa.readTimeIndex="readTimeIndex",fa.readTimeIndexPath="readTime",fa.collectionReadTimeIndex="collectionReadTimeIndex",fa.collectionReadTimeIndexPath=["parentPath","readTime"];class pa{constructor(e){this.byteSize=e}}pa.store="remoteDocumentGlobal",pa.key="remoteDocumentGlobalKey";class ma{constructor(e,t,n,r,i,s,o){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=s,this.query=o}}ma.store="targets",ma.keyPath="targetId",ma.queryTargetsIndexName="queryTargetsIndex",ma.queryTargetsKeyPath=["canonicalId","targetId"];class ga{constructor(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n}}ga.store="targetDocuments",ga.keyPath=["targetId","path"],ga.documentTargetsIndex="documentTargetsIndex",ga.documentTargetsKeyPath=["path","targetId"];class ya{constructor(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r}}ya.key="targetGlobalKey",ya.store="targetGlobal";class va{constructor(e,t){this.collectionId=e,this.parent=t}}va.store="collectionParents",va.keyPath=["collectionId","parent"];class wa{constructor(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r}}wa.store="clientMetadata",wa.keyPath="clientId";class ba{constructor(e,t,n){this.bundleId=e,this.createTime=t,this.version=n}}ba.store="bundles",ba.keyPath="bundleId";class Ia{constructor(e,t,n){this.name=e,this.readTime=t,this.bundledQuery=n}}Ia.store="namedQueries",Ia.keyPath="name";const Ta=[ca.store,ua.store,ha.store,fa.store,ma.store,aa.store,ya.store,ga.store,wa.store,pa.store,va.store,ba.store,Ia.store],Ea="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Sa{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}class _a{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&xr(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new _a(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof _a?t:_a.resolve(t)}catch(e){return _a.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):_a.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):_a.reject(t)}static resolve(e){return new _a(((t,n)=>{t(e)}))}static reject(e){return new _a(((t,n)=>{n(e)}))}static waitFor(e){return new _a(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=_a.resolve(!1);for(const n of e)t=t.next((e=>e?_a.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}}class ka{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.Tt=new Mr,this.transaction.oncomplete=()=>{this.Tt.resolve()},this.transaction.onabort=()=>{t.error?this.Tt.reject(new Na(e,t.error)):this.Tt.resolve()},this.transaction.onerror=t=>{const n=Pa(t.target.error);this.Tt.reject(new Na(e,n))}}static open(e,t,n,r){try{return new ka(t,e.transaction(r,n))}catch(e){throw new Na(t,e)}}get It(){return this.Tt.promise}abort(e){e&&this.Tt.reject(e),this.aborted||(Ar("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(e){const t=this.transaction.objectStore(e);return new xa(t)}}class Aa{constructor(e,t,n){this.name=e,this.version=t,this.At=n,12.2===Aa.Rt((0,o.z$)())&&Cr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ar("SimpleDb","Removing database:",e),Da(window.indexedDB.deleteDatabase(e)).toPromise()}static Pt(){if("undefined"==typeof indexedDB)return!1;if(Aa.bt())return!0;const e=(0,o.z$)(),t=Aa.Rt(e),n=0<t&&t<10,r=Aa.vt(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static bt(){var e;return"undefined"!=typeof Tr&&"YES"===(null===(e=Tr.env)||void 0===e?void 0:e.Vt)}static St(e,t){return e.store(t)}static Rt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static vt(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async Dt(e){return this.db||(Ar("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new Na(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new Lr(Pr.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):n(new Na(e,r))},r.onupgradeneeded=e=>{Ar("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.At.Ct(t,r.transaction,e.oldVersion,this.version).next((()=>{Ar("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.Nt&&(this.db.onversionchange=e=>this.Nt(e)),this.db}xt(e){this.Nt=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.Dt(e);const t=ka.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).catch((e=>(t.abort(e),_a.reject(e)))).toPromise();return s.catch((()=>{})),await t.It,s}catch(e){const t="FirebaseError"!==e.name&&s<3;if(Ar("SimpleDb","Transaction failed with error:",e.message,"Retrying:",t),this.close(),!t)return Promise.reject(e)}}}close(){this.db&&this.db.close(),this.db=void 0}}class Ca{constructor(e){this.kt=e,this.$t=!1,this.Ot=null}get isDone(){return this.$t}get Ft(){return this.Ot}set cursor(e){this.kt=e}done(){this.$t=!0}Mt(e){this.Ot=e}delete(){return Da(this.kt.delete())}}class Na extends Lr{constructor(e,t){super(Pr.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Oa(e){return"IndexedDbTransactionError"===e.name}class xa{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(Ar("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Ar("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Da(n)}add(e){return Ar("SimpleDb","ADD",this.store.name,e,e),Da(this.store.add(e))}get(e){return Da(this.store.get(e)).next((t=>(void 0===t&&(t=null),Ar("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return Ar("SimpleDb","DELETE",this.store.name,e),Da(this.store.delete(e))}count(){return Ar("SimpleDb","COUNT",this.store.name),Da(this.store.count())}Lt(e,t){const n=this.cursor(this.options(e,t)),r=[];return this.Bt(n,((e,t)=>{r.push(t)})).next((()=>r))}Ut(e,t){Ar("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.qt=!1;const r=this.cursor(n);return this.Bt(r,((e,t,n)=>n.delete()))}Kt(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.Bt(r,t)}jt(e){const t=this.cursor({});return new _a(((n,r)=>{t.onerror=e=>{const t=Pa(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}Bt(e,t){const n=[];return new _a(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new Ca(i),o=t(i.primaryKey,i.value,s);if(o instanceof _a){const e=o.catch((e=>(s.done(),_a.reject(e))));n.push(e)}s.isDone?r():null===s.Ft?i.continue():i.continue(s.Ft)}})).next((()=>_a.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.qt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Da(e){return new _a(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=Pa(e.target.error);n(t)}}))}let Ra=!1;function Pa(e){const t=Aa.Rt((0,o.z$)());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Lr("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ra||(Ra=!0,setTimeout((()=>{throw e}),0)),e}}return e}class La extends Sa{constructor(e,t){super(),this.Qt=e,this.currentSequenceNumber=t}}function Ma(e,t){const n=Rr(e);return Aa.St(n.Qt,t)}class Fa{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Ls(t,e,n[r])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Ms(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Ms(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach((t=>{const n=e.get(t.key),r=n;this.applyToLocalView(r),n.isValidDocument()||r.convertToNoDocument(Xr.min())}))}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ho())}isEqual(e){return this.batchId===e.batchId&&$r(this.mutations,e.mutations,((e,t)=>Us(e,t)))&&$r(this.baseMutations,e.baseMutations,((e,t)=>Us(e,t)))}}class Ua{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Dr(e.mutations.length===n.length);let r=co();const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Ua(e,t,n,r)}}class ja{constructor(e,t,n,r,i=Xr.min(),s=Xr.min(),o=ii.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o}withSequenceNumber(e){return new ja(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new ja(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new ja(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Va{constructor(e){this.Wt=e}}function za(e,t){if(t.document)return jo(e.Wt,t.document,!!t.hasCommittedMutations);if(t.noDocument){const e=mi.fromSegments(t.noDocument.path),n=$a(t.noDocument.readTime),r=xi.newNoDocument(e,n);return t.hasCommittedMutations?r.setHasCommittedMutations():r}if(t.unknownDocument){const e=mi.fromSegments(t.unknownDocument.path),n=$a(t.unknownDocument.version);return xi.newUnknownDocument(e,n)}return xr()}function Ba(e,t,n){const r=qa(n),i=t.key.path.popLast().toArray();if(t.isFoundDocument()){const n=function(e,t){return{name:Do(e,t.key),fields:t.data.value.mapValue.fields,updateTime:ko(e,t.version.toTimestamp())}}(e.Wt,t),s=t.hasCommittedMutations;return new fa(null,null,n,s,r,i)}if(t.isNoDocument()){const e=t.key.path.toArray(),n=Ka(t.version),s=t.hasCommittedMutations;return new fa(null,new la(e,n),null,s,r,i)}if(t.isUnknownDocument()){const e=t.key.path.toArray(),n=Ka(t.version);return new fa(new da(e,n),null,null,!0,r,i)}return xr()}function qa(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Ha(e){const t=new Wr(e[0],e[1]);return Xr.fromTimestamp(t)}function Ka(e){const t=e.toTimestamp();return new oa(t.seconds,t.nanoseconds)}function $a(e){const t=new Wr(e.seconds,e.nanoseconds);return Xr.fromTimestamp(t)}function Ga(e,t){const n=(t.baseMutations||[]).map((t=>zo(e.Wt,t)));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];if(s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform){const n=t.mutations[s+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map((t=>zo(e.Wt,t))),i=Wr.fromMillis(t.localWriteTimeMs);return new Fa(t.batchId,i,n,r)}function Wa(e){const t=$a(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?$a(e.lastLimboFreeSnapshotVersion):Xr.min();let r;var i;return void 0!==e.query.documents?(Dr(1===(i=e.query).documents.length),r=as(es(Lo(i.documents[0])))):r=function(e){return as(Ho(e))}(e.query),new ja(r,e.targetId,0,e.lastListenSequenceNumber,t,n,ii.fromBase64String(e.resumeToken))}function Xa(e,t){const n=Ka(t.snapshotVersion),r=Ka(t.lastLimboFreeSnapshotVersion);let i;i=Mi(t.target)?Bo(e.Wt,t.target):qo(e.Wt,t.target);const s=t.resumeToken.toBase64();return new ma(t.targetId,Pi(t.target),n,s,t.sequenceNumber,r,i)}function Ja(e){const t=Ho({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?cs(t,t.limit,"L"):t}class Ya{getBundleMetadata(e,t){return Qa(e).get(t).next((e=>{if(e)return{id:(t=e).bundleId,createTime:$a(t.createTime),version:t.version};var t}))}saveBundleMetadata(e,t){return Qa(e).put({bundleId:(n=t).id,createTime:Ka(No(n.createTime)),version:n.version});var n}getNamedQuery(e,t){return Za(e).get(t).next((e=>{if(e)return{name:(t=e).name,query:Ja(t.bundledQuery),readTime:$a(t.readTime)};var t}))}saveNamedQuery(e,t){return Za(e).put(function(e){return{name:e.name,readTime:Ka(No(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function Qa(e){return Ma(e,ba.store)}function Za(e){return Ma(e,Ia.store)}class ec{constructor(){this.Gt=new tc}addToCollectionParentIndex(e,t){return this.Gt.add(t),_a.resolve()}getCollectionParents(e,t){return _a.resolve(this.Gt.getEntries(t))}}class tc{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new to(ei.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new to(ei.comparator)).toArray()}}class nc{constructor(){this.zt=new tc}addToCollectionParentIndex(e,t){if(!this.zt.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.zt.add(t)}));const i={collectionId:n,parent:na(r)};return rc(e).put(i)}return _a.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[Gr(t),""],!1,!0);return rc(e).Lt(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(sa(r.parent))}return n}))}}function rc(e){return Ma(e,va.store)}const ic={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class sc{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new sc(e,sc.DEFAULT_COLLECTION_PERCENTILE,sc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function oc(e,t,n){const r=e.store(ua.store),i=e.store(ha.store),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=r.Kt({range:o},((e,t,n)=>(a++,n.delete())));s.push(c.next((()=>{Dr(1===a)})));const u=[];for(const h of n.mutations){const e=ha.key(t,h.key.path,n.batchId);s.push(i.delete(e)),u.push(h.key)}return _a.waitFor(s).next((()=>u))}function ac(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw xr();t=e.noDocument}return JSON.stringify(t).length}sc.DEFAULT_COLLECTION_PERCENTILE=10,sc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sc.DEFAULT=new sc(41943040,sc.DEFAULT_COLLECTION_PERCENTILE,sc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sc.DISABLED=new sc(-1,0,0);class cc{constructor(e,t,n,r){this.userId=e,this.N=t,this.Ht=n,this.referenceDelegate=r,this.Jt={}}static Yt(e,t,n,r){Dr(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new cc(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return hc(e).Kt({index:ua.userMutationsIndex,range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=lc(e),s=hc(e);return s.add({}).next((o=>{Dr("number"==typeof o);const a=new Fa(o,t,n,r),c=function(e,t,n){const r=n.baseMutations.map((t=>Vo(e.Wt,t))),i=n.mutations.map((t=>Vo(e.Wt,t)));return new ua(t,n.batchId,n.localWriteTime.toMillis(),r,i)}(this.N,this.userId,a),u=[];let h=new to(((e,t)=>Kr(e.canonicalString(),t.canonicalString())));for(const e of r){const t=ha.key(this.userId,e.key.path,o);h=h.add(e.key.path.popLast()),u.push(s.put(c)),u.push(i.put(t,ha.PLACEHOLDER))}return h.forEach((t=>{u.push(this.Ht.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Jt[o]=a.keys()})),_a.waitFor(u).next((()=>a))}))}lookupMutationBatch(e,t){return hc(e).get(t).next((e=>e?(Dr(e.userId===this.userId),Ga(this.N,e)):null))}Xt(e,t){return this.Jt[t]?_a.resolve(this.Jt[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Jt[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return hc(e).Kt({index:ua.userMutationsIndex,range:r},((e,t,r)=>{t.userId===this.userId&&(Dr(t.batchId>=n),i=Ga(this.N,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return hc(e).Kt({index:ua.userMutationsIndex,range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return hc(e).Lt(ua.userMutationsIndex,t).next((e=>e.map((e=>Ga(this.N,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=ha.prefixForPath(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return lc(e).Kt({range:r},((n,r,s)=>{const[o,a,c]=n,u=sa(a);if(o===this.userId&&t.path.isEqual(u))return hc(e).get(c).next((e=>{if(!e)throw xr();Dr(e.userId===this.userId),i.push(Ga(this.N,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new to(Kr);const r=[];return t.forEach((t=>{const i=ha.prefixForPath(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=lc(e).Kt({range:s},((e,r,i)=>{const[s,o,a]=e,c=sa(o);s===this.userId&&t.path.isEqual(c)?n=n.add(a):i.done()}));r.push(o)})),_a.waitFor(r).next((()=>this.Zt(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=ha.prefixForPath(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new to(Kr);return lc(e).Kt({range:s},((e,t,i)=>{const[s,a,c]=e,u=sa(a);s===this.userId&&n.isPrefixOf(u)?u.length===r&&(o=o.add(c)):i.done()})).next((()=>this.Zt(e,o)))}Zt(e,t){const n=[],r=[];return t.forEach((t=>{r.push(hc(e).get(t).next((e=>{if(null===e)throw xr();Dr(e.userId===this.userId),n.push(Ga(this.N,e))})))})),_a.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return oc(e.Qt,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.te(t.batchId)})),_a.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}te(e){delete this.Jt[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return _a.resolve();const n=IDBKeyRange.lowerBound(ha.prefixForUser(this.userId)),r=[];return lc(e).Kt({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=sa(e[1]);r.push(t)}else n.done()})).next((()=>{Dr(0===r.length)}))}))}containsKey(e,t){return uc(e,this.userId,t)}ee(e){return dc(e).get(this.userId).next((e=>e||new ca(this.userId,-1,"")))}}function uc(e,t,n){const r=ha.prefixForPath(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return lc(e).Kt({range:s,qt:!0},((e,n,r)=>{const[s,a,c]=e;s===t&&a===i&&(o=!0),r.done()})).next((()=>o))}function hc(e){return Ma(e,ua.store)}function lc(e){return Ma(e,ha.store)}function dc(e){return Ma(e,ca.store)}class fc{constructor(e){this.ne=e}next(){return this.ne+=2,this.ne}static se(){return new fc(0)}static ie(){return new fc(-1)}}class pc{constructor(e,t){this.referenceDelegate=e,this.N=t}allocateTargetId(e){return this.re(e).next((t=>{const n=new fc(t.highestTargetId);return t.highestTargetId=n.next(),this.oe(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.re(e).next((e=>Xr.fromTimestamp(new Wr(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.re(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.re(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.oe(e,r))))}addTargetData(e,t){return this.ae(e,t).next((()=>this.re(e).next((n=>(n.targetCount+=1,this.ce(t,n),this.oe(e,n))))))}updateTargetData(e,t){return this.ae(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>mc(e).delete(t.targetId))).next((()=>this.re(e))).next((t=>(Dr(t.targetCount>0),t.targetCount-=1,this.oe(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return mc(e).Kt(((s,o)=>{const a=Wa(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>_a.waitFor(i))).next((()=>r))}forEachTarget(e,t){return mc(e).Kt(((e,n)=>{const r=Wa(n);t(r)}))}re(e){return gc(e).get(ya.key).next((e=>(Dr(null!==e),e)))}oe(e,t){return gc(e).put(ya.key,t)}ae(e,t){return mc(e).put(Xa(this.N,t))}ce(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.re(e).next((e=>e.targetCount))}getTargetData(e,t){const n=Pi(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return mc(e).Kt({range:r,index:ma.queryTargetsIndexName},((e,n,r)=>{const s=Wa(n);Li(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=yc(e);return t.forEach((t=>{const s=na(t.path);r.push(i.put(new ga(n,s))),r.push(this.referenceDelegate.addReference(e,n,t))})),_a.waitFor(r)}removeMatchingKeys(e,t,n){const r=yc(e);return _a.forEach(t,(t=>{const i=na(t.path);return _a.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=yc(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=yc(e);let i=ho();return r.Kt({range:n,qt:!0},((e,t,n)=>{const r=sa(e[1]),s=new mi(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=na(t.path),r=IDBKeyRange.bound([n],[Gr(n)],!1,!0);let i=0;return yc(e).Kt({index:ga.documentTargetsIndex,qt:!0,range:r},(([e,t],n,r)=>{0!==e&&(i++,r.done())})).next((()=>i>0))}Et(e,t){return mc(e).get(t).next((e=>e?Wa(e):null))}}function mc(e){return Ma(e,ma.store)}function gc(e){return Ma(e,ya.store)}function yc(e){return Ma(e,ga.store)}async function vc(e){if(e.code!==Pr.FAILED_PRECONDITION||e.message!==Ea)throw e;Ar("LocalStore","Unexpectedly lost primary lease")}function wc([e,t],[n,r]){const i=Kr(e,n);return 0===i?Kr(t,r):i}class bc{constructor(e){this.ue=e,this.buffer=new to(wc),this.he=0}le(){return++this.he}fe(e){const t=[e,this.le()];if(this.buffer.size<this.ue)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();wc(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Ic{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.de=!1,this.we=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this._e(e)}stop(){this.we&&(this.we.cancel(),this.we=null)}get started(){return null!==this.we}_e(e){const t=this.de?3e5:6e4;Ar("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.we=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.we=null,this.de=!0;try{await e.collectGarbage(this.garbageCollector)}catch(e){Oa(e)?Ar("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await vc(e)}await this._e(e)}))}}class Tc{constructor(e,t){this.me=e,this.params=t}calculateTargetCount(e,t){return this.me.ge(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return _a.resolve(Br.T);const n=new bc(t);return this.me.forEachTarget(e,(e=>n.fe(e.sequenceNumber))).next((()=>this.me.ye(e,(e=>n.fe(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.me.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.me.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ar("LruGarbageCollector","Garbage collection skipped; disabled"),_a.resolve(ic)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Ar("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ic):this.pe(e,t)))}getCacheSize(e){return this.me.getCacheSize(e)}pe(e,t){let n,r,i,o,a,c,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(Ar("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,o=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,a=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,c=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(u=Date.now(),kr()<=s.in.DEBUG&&Ar("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-h}ms\n\tDetermined least recently used ${r} in `+(a-o)+"ms\n"+`\tRemoved ${i} targets in `+(c-a)+"ms\n"+`\tRemoved ${e} documents in `+(u-c)+"ms\n"+`Total Duration: ${u-h}ms`),_a.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}class Ec{constructor(e,t){this.db=e,this.garbageCollector=function(e,t){return new Tc(e,t)}(this,t)}ge(e){const t=this.Ee(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Ee(e){let t=0;return this.ye(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}ye(e,t){return this.Te(e,((e,n)=>t(n)))}addReference(e,t,n){return Sc(e,n)}removeReference(e,t,n){return Sc(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Sc(e,t)}Ie(e,t){return function(e,t){let n=!1;return dc(e).jt((r=>uc(e,r,t).next((e=>(e&&(n=!0),_a.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Te(e,((s,o)=>{if(o<=t){const t=this.Ie(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s),yc(e).delete([0,na(s.path)]))))}));r.push(t)}})).next((()=>_a.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Sc(e,t)}Te(e,t){const n=yc(e);let r,i=Br.T;return n.Kt({index:ga.documentTargetsIndex},(([e,n],{path:s,sequenceNumber:o})=>{0===e?(i!==Br.T&&t(new mi(sa(r)),i),i=o,r=s):i=Br.T})).next((()=>{i!==Br.T&&t(new mi(sa(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Sc(e,t){return yc(e).put(function(e,t){return new ga(0,na(e.path),t)}(t,e.currentSequenceNumber))}class _c{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return void(r[n]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1}forEach(e){Yr(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return Qr(this.inner)}}class kc{constructor(){this.changes=new _c((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}getReadTime(e){const t=this.changes.get(e);return t?t.readTime:Xr.min()}addEntry(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}removeEntry(e,t=null){this.assertNotApplied(),this.changes.set(e,{document:xi.newInvalidDocument(e),readTime:t})}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?_a.resolve(n.document):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Ac{constructor(e,t){this.N=e,this.Ht=t}addEntry(e,t,n){return Oc(e).put(xc(t),n)}removeEntry(e,t){const n=Oc(e),r=xc(t);return n.delete(r)}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.Ae(e,n))))}getEntry(e,t){return Oc(e).get(xc(t)).next((e=>this.Re(t,e)))}Pe(e,t){return Oc(e).get(xc(t)).next((e=>({document:this.Re(t,e),size:ac(e)})))}getEntries(e,t){let n=io();return this.be(e,t,((e,t)=>{const r=this.Re(e,t);n=n.insert(e,r)})).next((()=>n))}ve(e,t){let n=io(),r=new Qs(mi.comparator);return this.be(e,t,((e,t)=>{const i=this.Re(e,t);n=n.insert(e,i),r=r.insert(e,ac(t))})).next((()=>({documents:n,Ve:r})))}be(e,t,n){if(t.isEmpty())return _a.resolve();const r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator();let s=i.getNext();return Oc(e).Kt({range:r},((e,t,r)=>{const o=mi.fromSegments(e);for(;s&&mi.comparator(s,o)<0;)n(s,null),s=i.getNext();s&&s.isEqual(o)&&(n(s,t),s=i.hasNext()?i.getNext():null),s?r.Mt(s.path.toArray()):r.done()})).next((()=>{for(;s;)n(s,null),s=i.hasNext()?i.getNext():null}))}getDocumentsMatchingQuery(e,t,n){let r=io();const i=t.path.length+1,s={};if(n.isEqual(Xr.min())){const e=t.path.toArray();s.range=IDBKeyRange.lowerBound(e)}else{const e=t.path.toArray(),r=qa(n);s.range=IDBKeyRange.lowerBound([e,r],!0),s.index=fa.collectionReadTimeIndex}return Oc(e).Kt(s,((e,n,s)=>{if(e.length!==i)return;const o=za(this.N,n);t.path.isPrefixOf(o.key.path)?ds(t,o)&&(r=r.insert(o.key,o)):s.done()})).next((()=>r))}newChangeBuffer(e){return new Cc(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return Nc(e).get(pa.key).next((e=>(Dr(!!e),e)))}Ae(e,t){return Nc(e).put(pa.key,t)}Re(e,t){if(t){const e=za(this.N,t);if(!e.isNoDocument()||!e.version.isEqual(Xr.min()))return e}return xi.newInvalidDocument(e)}}class Cc extends kc{constructor(e,t){super(),this.Se=e,this.trackRemovals=t,this.De=new _c((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new to(((e,t)=>Kr(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.De.get(i);if(s.document.isValidDocument()){const a=Ba(this.Se.N,s.document,this.getReadTime(i));r=r.add(i.path.popLast());const c=ac(a);n+=c-o,t.push(this.Se.addEntry(e,i,a))}else if(n-=o,this.trackRemovals){const n=Ba(this.Se.N,xi.newNoDocument(i,Xr.min()),this.getReadTime(i));t.push(this.Se.addEntry(e,i,n))}else t.push(this.Se.removeEntry(e,i))})),r.forEach((n=>{t.push(this.Se.Ht.addToCollectionParentIndex(e,n))})),t.push(this.Se.updateMetadata(e,n)),_a.waitFor(t)}getFromCache(e,t){return this.Se.Pe(e,t).next((e=>(this.De.set(t,e.size),e.document)))}getAllFromCache(e,t){return this.Se.ve(e,t).next((({documents:e,Ve:t})=>(t.forEach(((e,t)=>{this.De.set(e,t)})),e)))}}function Nc(e){return Ma(e,pa.store)}function Oc(e){return Ma(e,fa.store)}function xc(e){return e.path.toArray()}class Dc{constructor(e){this.N=e}Ct(e,t,n,r){Dr(n<r&&n>=0&&r<=11);const i=new ka("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(aa.store)}(e),function(e){e.createObjectStore(ca.store,{keyPath:ca.keyPath}),e.createObjectStore(ua.store,{keyPath:ua.keyPath,autoIncrement:!0}).createIndex(ua.userMutationsIndex,ua.userMutationsKeyPath,{unique:!0}),e.createObjectStore(ha.store)}(e),Rc(e),function(e){e.createObjectStore(fa.store)}(e));let s=_a.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(ga.store),e.deleteObjectStore(ma.store),e.deleteObjectStore(ya.store)}(e),Rc(e)),s=s.next((()=>function(e){const t=e.store(ya.store),n=new ya(0,0,Xr.min().toTimestamp(),0);return t.put(ya.key,n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store(ua.store).Lt().next((n=>{e.deleteObjectStore(ua.store),e.createObjectStore(ua.store,{keyPath:ua.keyPath,autoIncrement:!0}).createIndex(ua.userMutationsIndex,ua.userMutationsKeyPath,{unique:!0});const r=t.store(ua.store),i=n.map((e=>r.put(e)));return _a.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore(wa.store,{keyPath:wa.keyPath})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.Ce(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore(pa.store)}(e),this.Ne(i))))),n<7&&r>=7&&(s=s.next((()=>this.xe(i)))),n<8&&r>=8&&(s=s.next((()=>this.ke(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){const t=e.objectStore(fa.store);t.createIndex(fa.readTimeIndex,fa.readTimeIndexPath,{unique:!1}),t.createIndex(fa.collectionReadTimeIndex,fa.collectionReadTimeIndexPath,{unique:!1})}(t)}))),n<10&&r>=10&&(s=s.next((()=>this.$e(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore(ba.store,{keyPath:ba.keyPath})}(e),function(e){e.createObjectStore(Ia.store,{keyPath:Ia.keyPath})}(e)}))),s}Ne(e){let t=0;return e.store(fa.store).Kt(((e,n)=>{t+=ac(n)})).next((()=>{const n=new pa(t);return e.store(pa.store).put(pa.key,n)}))}Ce(e){const t=e.store(ca.store),n=e.store(ua.store);return t.Lt().next((t=>_a.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.Lt(ua.userMutationsIndex,r).next((n=>_a.forEach(n,(n=>{Dr(n.userId===t.userId);const r=Ga(this.N,n);return oc(e,t.userId,r).next((()=>{}))}))))}))))}xe(e){const t=e.store(ga.store),n=e.store(fa.store);return e.store(ya.store).get(ya.key).next((e=>{const r=[];return n.Kt(((n,i)=>{const s=new ei(n),o=function(e){return[0,na(e)]}(s);r.push(t.get(o).next((n=>n?_a.resolve():(n=>t.put(new ga(0,na(n),e.highestListenSequenceNumber)))(s))))})).next((()=>_a.waitFor(r)))}))}ke(e,t){e.createObjectStore(va.store,{keyPath:va.keyPath});const n=t.store(va.store),r=new tc,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:na(r)})}};return t.store(fa.store).Kt({qt:!0},((e,t)=>{const n=new ei(e);return i(n.popLast())})).next((()=>t.store(ha.store).Kt({qt:!0},(([e,t,n],r)=>{const s=sa(t);return i(s.popLast())}))))}$e(e){const t=e.store(ma.store);return t.Kt(((e,n)=>{const r=Wa(n),i=Xa(this.N,r);return t.put(i)}))}}function Rc(e){e.createObjectStore(ga.store,{keyPath:ga.keyPath}).createIndex(ga.documentTargetsIndex,ga.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(ma.store,{keyPath:ma.keyPath}).createIndex(ma.queryTargetsIndexName,ma.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(ya.store)}const Pc="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Lc{constructor(e,t,n,r,i,s,o,a,c,u){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Oe=i,this.window=s,this.document=o,this.Fe=c,this.Me=u,this.Le=null,this.Be=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ue=null,this.inForeground=!1,this.qe=null,this.Ke=null,this.je=Number.NEGATIVE_INFINITY,this.Qe=e=>Promise.resolve(),!Lc.Pt())throw new Lr(Pr.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Ec(this,r),this.We=t+"main",this.N=new Va(a),this.Ge=new Aa(this.We,11,new Dc(this.N)),this.ze=new pc(this.referenceDelegate,this.N),this.Ht=new nc,this.He=function(e,t){return new Ac(e,t)}(this.N,this.Ht),this.Je=new Ya,this.window&&this.window.localStorage?this.Ye=this.window.localStorage:(this.Ye=null,!1===u&&Cr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Xe().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Lr(Pr.FAILED_PRECONDITION,Pc);return this.Ze(),this.tn(),this.en(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.ze.getHighestSequenceNumber(e)))})).then((e=>{this.Le=new Br(e,this.Fe)})).then((()=>{this.Be=!0})).catch((e=>(this.Ge&&this.Ge.close(),Promise.reject(e))))}nn(e){return this.Qe=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ge.xt((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Oe.enqueueAndForget((async()=>{this.started&&await this.Xe()})))}Xe(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Fc(e).put(new wa(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next((()=>{if(this.isPrimary)return this.sn(e).next((e=>{e||(this.isPrimary=!1,this.Oe.enqueueRetryable((()=>this.Qe(!1))))}))})).next((()=>this.rn(e))).next((t=>this.isPrimary&&!t?this.on(e).next((()=>!1)):!!t&&this.an(e).next((()=>!0)))))).catch((e=>{if(Oa(e))return Ar("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ar("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Oe.enqueueRetryable((()=>this.Qe(e))),this.isPrimary=e}))}sn(e){return Mc(e).get(aa.key).next((e=>_a.resolve(this.cn(e))))}un(e){return Fc(e).delete(this.clientId)}async hn(){if(this.isPrimary&&!this.ln(this.je,18e5)){this.je=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=Ma(e,wa.store);return t.Lt().next((e=>{const n=this.fn(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return _a.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.Ye)for(const t of e)this.Ye.removeItem(this.dn(t.clientId))}}en(){this.Ke=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Xe().then((()=>this.hn())).then((()=>this.en()))))}cn(e){return!!e&&e.ownerId===this.clientId}rn(e){return this.Me?_a.resolve(!0):Mc(e).get(aa.key).next((t=>{if(null!==t&&this.ln(t.leaseTimestampMs,5e3)&&!this.wn(t.ownerId)){if(this.cn(t)&&this.networkEnabled)return!0;if(!this.cn(t)){if(!t.allowTabSynchronization)throw new Lr(Pr.FAILED_PRECONDITION,Pc);return!1}}return!(!this.networkEnabled||!this.inForeground)||Fc(e).Lt().next((e=>void 0===this.fn(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&Ar("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e)))}async shutdown(){this.Be=!1,this._n(),this.Ke&&(this.Ke.cancel(),this.Ke=null),this.mn(),this.gn(),await this.Ge.runTransaction("shutdown","readwrite",[aa.store,wa.store],(e=>{const t=new La(e,Br.T);return this.on(t).next((()=>this.un(t)))})),this.Ge.close(),this.yn()}fn(e,t){return e.filter((e=>this.ln(e.updateTimeMs,t)&&!this.wn(e.clientId)))}pn(){return this.runTransaction("getActiveClients","readonly",(e=>Fc(e).Lt().next((e=>this.fn(e,18e5).map((e=>e.clientId))))))}get started(){return this.Be}getMutationQueue(e){return cc.Yt(e,this.N,this.Ht,this.referenceDelegate)}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getIndexManager(){return this.Ht}getBundleCache(){return this.Je}runTransaction(e,t,n){Ar("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite";let i;return this.Ge.runTransaction(e,r,Ta,(r=>(i=new La(r,this.Le?this.Le.next():Br.T),"readwrite-primary"===t?this.sn(i).next((e=>!!e||this.rn(i))).next((t=>{if(!t)throw Cr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable((()=>this.Qe(!1))),new Lr(Pr.FAILED_PRECONDITION,Ea);return n(i)})).next((e=>this.an(i).next((()=>e)))):this.En(i).next((()=>n(i)))))).then((e=>(i.raiseOnCommittedEvent(),e)))}En(e){return Mc(e).get(aa.key).next((e=>{if(null!==e&&this.ln(e.leaseTimestampMs,5e3)&&!this.wn(e.ownerId)&&!this.cn(e)&&!(this.Me||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Lr(Pr.FAILED_PRECONDITION,Pc)}))}an(e){const t=new aa(this.clientId,this.allowTabSynchronization,Date.now());return Mc(e).put(aa.key,t)}static Pt(){return Aa.Pt()}on(e){const t=Mc(e);return t.get(aa.key).next((e=>this.cn(e)?(Ar("IndexedDbPersistence","Releasing primary lease."),t.delete(aa.key)):_a.resolve()))}ln(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Cr(`Detected an update time that is in the future: ${e} > ${n}`),!1))}Ze(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=()=>{this.Oe.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.Xe())))},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)}mn(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)}tn(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Ue=()=>{this._n(),(0,o.G6)()&&navigator.appVersion.match("Version/14")&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Ue))}gn(){this.Ue&&(this.window.removeEventListener("pagehide",this.Ue),this.Ue=null)}wn(e){var t;try{const n=null!==(null===(t=this.Ye)||void 0===t?void 0:t.getItem(this.dn(e)));return Ar("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(e){return Cr("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}_n(){if(this.Ye)try{this.Ye.setItem(this.dn(this.clientId),String(Date.now()))}catch(e){Cr("Failed to set zombie client id.",e)}}yn(){if(this.Ye)try{this.Ye.removeItem(this.dn(this.clientId))}catch(e){}}dn(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Mc(e){return Ma(e,aa.store)}function Fc(e){return Ma(e,wa.store)}function Uc(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class jc{constructor(e,t,n){this.He=e,this.In=t,this.Ht=n}An(e,t){return this.In.getAllMutationBatchesAffectingDocumentKey(e,t).next((n=>this.Rn(e,t,n)))}Rn(e,t,n){return this.He.getEntry(e,t).next((e=>{for(const t of n)t.applyToLocalView(e);return e}))}Pn(e,t){e.forEach(((e,n)=>{for(const r of t)r.applyToLocalView(n)}))}bn(e,t){return this.He.getEntries(e,t).next((t=>this.vn(e,t).next((()=>t))))}vn(e,t){return this.In.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>this.Pn(t,e)))}getDocumentsMatchingQuery(e,t,n){return function(e){return mi.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Vn(e,t.path):ss(t)?this.Sn(e,t,n):this.Dn(e,t,n)}Vn(e,t){return this.An(e,new mi(t)).next((e=>{let t=oo();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}Sn(e,t,n){const r=t.collectionGroup;let i=oo();return this.Ht.getCollectionParents(e,r).next((s=>_a.forEach(s,(s=>{const o=function(e,t){return new Qi(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(r));return this.Dn(e,o,n).next((e=>{e.forEach(((e,t)=>{i=i.insert(e,t)}))}))})).next((()=>i))))}Dn(e,t,n){let r,i;return this.He.getDocumentsMatchingQuery(e,t,n).next((n=>(r=n,this.In.getAllMutationBatchesAffectingQuery(e,t)))).next((t=>(i=t,this.Cn(e,i,r).next((e=>{r=e;for(const t of i)for(const e of t.mutations){const n=e.key;let i=r.get(n);null==i&&(i=xi.newInvalidDocument(n),r=r.insert(n,i)),Ms(e,i,t.localWriteTime),i.isFoundDocument()||(r=r.remove(n))}}))))).next((()=>(r.forEach(((e,n)=>{ds(t,n)||(r=r.remove(e))})),r)))}Cn(e,t,n){let r=ho();for(const s of t)for(const e of s.mutations)e instanceof zs&&null===n.get(e.key)&&(r=r.add(e.key));let i=n;return this.He.getEntries(e,r).next((e=>(e.forEach(((e,t)=>{t.isFoundDocument()&&(i=i.insert(e,t))})),i)))}}class Vc{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Nn=n,this.xn=r}static kn(e,t){let n=ho(),r=ho();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Vc(e,t.fromCache,n,r)}}class zc{$n(e){this.On=e}getDocumentsMatchingQuery(e,t,n,r){return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(Xr.min())?this.Fn(e,t):this.On.bn(e,r).next((i=>{const o=this.Mn(t,i);return(ts(t)||ns(t))&&this.Ln(t.limitType,o,r,n)?this.Fn(e,t):(kr()<=s.in.DEBUG&&Ar("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),ls(t)),this.On.getDocumentsMatchingQuery(e,t,n).next((e=>(o.forEach((t=>{e=e.insert(t.key,t)})),e))))}))}Mn(e,t){let n=new to(fs(e));return t.forEach(((t,r)=>{ds(e,r)&&(n=n.add(r))})),n}Ln(e,t,n,r){if(n.size!==t.size)return!0;const i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Fn(e,t){return kr()<=s.in.DEBUG&&Ar("QueryEngine","Using full collection scan to execute query:",ls(t)),this.On.getDocumentsMatchingQuery(e,t,Xr.min())}}class Bc{constructor(e,t,n,r){this.persistence=e,this.Bn=t,this.N=r,this.Un=new Qs(Kr),this.qn=new _c((e=>Pi(e)),Li),this.Kn=Xr.min(),this.In=e.getMutationQueue(n),this.jn=e.getRemoteDocumentCache(),this.ze=e.getTargetCache(),this.Qn=new jc(this.jn,this.In,this.persistence.getIndexManager()),this.Je=e.getBundleCache(),this.Bn.$n(this.Qn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Un)))}}function qc(e,t,n,r){return new Bc(e,t,n,r)}async function Hc(e,t){const n=Rr(e);let r=n.In,i=n.Qn;const s=await n.persistence.runTransaction("Handle user change","readonly",(e=>{let s;return n.In.getAllMutationBatches(e).next((o=>(s=o,r=n.persistence.getMutationQueue(t),i=new jc(n.jn,r,n.persistence.getIndexManager()),r.getAllMutationBatches(e)))).next((t=>{const n=[],r=[];let o=ho();for(const e of s){n.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){r.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return i.bn(e,o).next((e=>({Wn:e,removedBatchIds:n,addedBatchIds:r})))}))}));return n.In=r,n.Qn=i,n.Bn.$n(n.Qn),s}function Kc(e){const t=Rr(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.ze.getLastRemoteSnapshotVersion(e)))}function $c(e,t,n,r,i){let s=ho();return n.forEach((e=>s=s.add(e))),t.getEntries(e,s).next((e=>{let s=io();return n.forEach(((n,o)=>{const a=e.get(n),c=(null==i?void 0:i.get(n))||r;o.isNoDocument()&&o.version.isEqual(Xr.min())?(t.removeEntry(n,c),s=s.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(o,c),s=s.insert(n,o)):Ar("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)})),s}))}function Gc(e,t){const n=Rr(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.In.getNextMutationBatchAfterBatchId(e,t))))}function Wc(e,t){const n=Rr(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.ze.getTargetData(e,t).next((i=>i?(r=i,_a.resolve(r)):n.ze.allocateTargetId(e).next((i=>(r=new ja(t,i,0,e.currentSequenceNumber),n.ze.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.Un.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Un=n.Un.insert(e.targetId,e),n.qn.set(t,e.targetId)),e}))}async function Xc(e,t,n){const r=Rr(e),i=r.Un.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Oa(e))throw e;Ar("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.Un=r.Un.remove(t),r.qn.delete(i.target)}function Jc(e,t,n){const r=Rr(e);let i=Xr.min(),s=ho();return r.persistence.runTransaction("Execute query","readonly",(e=>function(e,t,n){const r=Rr(e),i=r.qn.get(n);return void 0!==i?_a.resolve(r.Un.get(i)):r.ze.getTargetData(t,n)}(r,e,as(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.ze.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.Bn.getDocumentsMatchingQuery(e,t,n?i:Xr.min(),n?s:ho()))).next((e=>({documents:e,Gn:s})))))}class Yc{constructor(e){this.N=e,this.Yn=new Map,this.Xn=new Map}getBundleMetadata(e,t){return _a.resolve(this.Yn.get(t))}saveBundleMetadata(e,t){var n;return this.Yn.set(t.id,{id:(n=t).id,version:n.version,createTime:No(n.createTime)}),_a.resolve()}getNamedQuery(e,t){return _a.resolve(this.Xn.get(t))}saveNamedQuery(e,t){return this.Xn.set(t.name,function(e){return{name:e.name,query:Ja(e.bundledQuery),readTime:No(e.readTime)}}(t)),_a.resolve()}}class Qc{constructor(){this.Zn=new to(Zc.ts),this.es=new to(Zc.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const n=new Zc(e,t);this.Zn=this.Zn.add(n),this.es=this.es.add(n)}ss(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.rs(new Zc(e,t))}os(e,t){e.forEach((e=>this.removeReference(e,t)))}cs(e){const t=new mi(new ei([])),n=new Zc(t,e),r=new Zc(t,e+1),i=[];return this.es.forEachInRange([n,r],(e=>{this.rs(e),i.push(e.key)})),i}us(){this.Zn.forEach((e=>this.rs(e)))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new mi(new ei([])),n=new Zc(t,e),r=new Zc(t,e+1);let i=ho();return this.es.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new Zc(e,0),n=this.Zn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Zc{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return mi.comparator(e.key,t.key)||Kr(e.ls,t.ls)}static ns(e,t){return Kr(e.ls,t.ls)||mi.comparator(e.key,t.key)}}class eu{constructor(e,t){this.Ht=e,this.referenceDelegate=t,this.In=[],this.fs=1,this.ds=new to(Zc.ts)}checkEmpty(e){return _a.resolve(0===this.In.length)}addMutationBatch(e,t,n,r){const i=this.fs;this.fs++,this.In.length>0&&this.In[this.In.length-1];const s=new Fa(i,t,n,r);this.In.push(s);for(const o of r)this.ds=this.ds.add(new Zc(o.key,i)),this.Ht.addToCollectionParentIndex(e,o.key.path.popLast());return _a.resolve(s)}lookupMutationBatch(e,t){return _a.resolve(this.ws(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this._s(n),i=r<0?0:r;return _a.resolve(this.In.length>i?this.In[i]:null)}getHighestUnacknowledgedBatchId(){return _a.resolve(0===this.In.length?-1:this.fs-1)}getAllMutationBatches(e){return _a.resolve(this.In.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Zc(t,0),r=new Zc(t,Number.POSITIVE_INFINITY),i=[];return this.ds.forEachInRange([n,r],(e=>{const t=this.ws(e.ls);i.push(t)})),_a.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new to(Kr);return t.forEach((e=>{const t=new Zc(e,0),r=new Zc(e,Number.POSITIVE_INFINITY);this.ds.forEachInRange([t,r],(e=>{n=n.add(e.ls)}))})),_a.resolve(this.gs(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;mi.isDocumentKey(i)||(i=i.child(""));const s=new Zc(new mi(i),0);let o=new to(Kr);return this.ds.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.ls)),!0)}),s),_a.resolve(this.gs(o))}gs(e){const t=[];return e.forEach((e=>{const n=this.ws(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Dr(0===this.ys(t.batchId,"removed")),this.In.shift();let n=this.ds;return _a.forEach(t.mutations,(r=>{const i=new Zc(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.ds=n}))}te(e){}containsKey(e,t){const n=new Zc(t,0),r=this.ds.firstAfterOrEqual(n);return _a.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.In.length,_a.resolve()}ys(e,t){return this._s(e)}_s(e){return 0===this.In.length?0:e-this.In[0].batchId}ws(e){const t=this._s(e);return t<0||t>=this.In.length?null:this.In[t]}}class tu{constructor(e,t){this.Ht=e,this.ps=t,this.docs=new Qs(mi.comparator),this.size=0}addEntry(e,t,n){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ps(t);return this.docs=this.docs.insert(r,{document:t.clone(),size:o,readTime:n}),this.size+=o-s,this.Ht.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return _a.resolve(n?n.document.clone():xi.newInvalidDocument(t))}getEntries(e,t){let n=io();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.clone():xi.newInvalidDocument(e))})),_a.resolve(n)}getDocumentsMatchingQuery(e,t,n){let r=io();const i=new mi(t.path.child("")),s=this.docs.getIteratorFrom(i);for(;s.hasNext();){const{key:e,value:{document:i,readTime:o}}=s.getNext();if(!t.path.isPrefixOf(e.path))break;o.compareTo(n)<=0||ds(t,i)&&(r=r.insert(i.key,i.clone()))}return _a.resolve(r)}Es(e,t){return _a.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new nu(this)}getSize(e){return _a.resolve(this.size)}}class nu extends kc{constructor(e){super(),this.Se=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.document.isValidDocument()?t.push(this.Se.addEntry(e,r.document,this.getReadTime(n))):this.Se.removeEntry(n)})),_a.waitFor(t)}getFromCache(e,t){return this.Se.getEntry(e,t)}getAllFromCache(e,t){return this.Se.getEntries(e,t)}}class ru{constructor(e){this.persistence=e,this.Ts=new _c((e=>Pi(e)),Li),this.lastRemoteSnapshotVersion=Xr.min(),this.highestTargetId=0,this.Is=0,this.As=new Qc,this.targetCount=0,this.Rs=fc.se()}forEachTarget(e,t){return this.Ts.forEach(((e,n)=>t(n))),_a.resolve()}getLastRemoteSnapshotVersion(e){return _a.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return _a.resolve(this.Is)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),_a.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Is&&(this.Is=t),_a.resolve()}ae(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new fc(t),this.highestTargetId=t),e.sequenceNumber>this.Is&&(this.Is=e.sequenceNumber)}addTargetData(e,t){return this.ae(t),this.targetCount+=1,_a.resolve()}updateTargetData(e,t){return this.ae(t),_a.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.cs(t.targetId),this.targetCount-=1,_a.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Ts.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Ts.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),_a.waitFor(i).next((()=>r))}getTargetCount(e){return _a.resolve(this.targetCount)}getTargetData(e,t){const n=this.Ts.get(t)||null;return _a.resolve(n)}addMatchingKeys(e,t,n){return this.As.ss(t,n),_a.resolve()}removeMatchingKeys(e,t,n){this.As.os(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),_a.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.As.cs(t),_a.resolve()}getMatchingKeysForTargetId(e,t){const n=this.As.hs(t);return _a.resolve(n)}containsKey(e,t){return _a.resolve(this.As.containsKey(t))}}class iu{constructor(e,t){this.Ps={},this.Le=new Br(0),this.Be=!1,this.Be=!0,this.referenceDelegate=e(this),this.ze=new ru(this),this.Ht=new ec,this.He=function(e,t){return new tu(e,t)}(this.Ht,(e=>this.referenceDelegate.bs(e))),this.N=new Va(t),this.Je=new Yc(this.N)}start(){return Promise.resolve()}shutdown(){return this.Be=!1,Promise.resolve()}get started(){return this.Be}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Ht}getMutationQueue(e){let t=this.Ps[e.toKey()];return t||(t=new eu(this.Ht,this.referenceDelegate),this.Ps[e.toKey()]=t),t}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getBundleCache(){return this.Je}runTransaction(e,t,n){Ar("MemoryPersistence","Starting transaction:",e);const r=new su(this.Le.next());return this.referenceDelegate.vs(),n(r).next((e=>this.referenceDelegate.Vs(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Ss(e,t){return _a.or(Object.values(this.Ps).map((n=>()=>n.containsKey(e,t))))}}class su extends Sa{constructor(e){super(),this.currentSequenceNumber=e}}class ou{constructor(e){this.persistence=e,this.Ds=new Qc,this.Cs=null}static Ns(e){return new ou(e)}get xs(){if(this.Cs)return this.Cs;throw xr()}addReference(e,t,n){return this.Ds.addReference(n,t),this.xs.delete(n.toString()),_a.resolve()}removeReference(e,t,n){return this.Ds.removeReference(n,t),this.xs.add(n.toString()),_a.resolve()}markPotentiallyOrphaned(e,t){return this.xs.add(t.toString()),_a.resolve()}removeTarget(e,t){this.Ds.cs(t.targetId).forEach((e=>this.xs.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.xs.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}vs(){this.Cs=new Set}Vs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _a.forEach(this.xs,(n=>{const r=mi.fromPath(n);return this.ks(e,r).next((e=>{e||t.removeEntry(r)}))})).next((()=>(this.Cs=null,t.apply(e))))}updateLimboDocument(e,t){return this.ks(e,t).next((e=>{e?this.xs.delete(t.toString()):this.xs.add(t.toString())}))}bs(e){return 0}ks(e,t){return _a.or([()=>_a.resolve(this.Ds.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ss(e,t)])}}class au{constructor(){this.activeTargetIds=fo()}Fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ms(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Os(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class cu{constructor(){this.yi=new au,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.yi.Fs(e),this.pi[e]||"not-current"}updateQueryState(e,t,n){this.pi[e]=t}removeLocalQueryTarget(e){this.yi.Ms(e)}isLocalQueryTarget(e){return this.yi.activeTargetIds.has(e)}clearQueryState(e){delete this.pi[e]}getAllActiveQueryTargets(){return this.yi.activeTargetIds}isActiveQueryTarget(e){return this.yi.activeTargetIds.has(e)}start(){return this.yi=new au,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class uu{Ei(e){}shutdown(){}}class hu{constructor(){this.Ti=()=>this.Ii(),this.Ai=()=>this.Ri(),this.Pi=[],this.bi()}Ei(e){this.Pi.push(e)}shutdown(){window.removeEventListener("online",this.Ti),window.removeEventListener("offline",this.Ai)}bi(){window.addEventListener("online",this.Ti),window.addEventListener("offline",this.Ai)}Ii(){Ar("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Pi)e(0)}Ri(){Ar("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Pi)e(1)}static Pt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const lu={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class du{constructor(e){this.vi=e.vi,this.Vi=e.Vi}Si(e){this.Di=e}Ci(e){this.Ni=e}onMessage(e){this.xi=e}close(){this.Vi()}send(e){this.vi(e)}ki(){this.Di()}$i(e){this.Ni(e)}Oi(e){this.xi(e)}}class fu extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.Fi=t+"://"+e.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Li(e,t,n,r){const i=this.Bi(e,t);Ar("RestConnection","Sending: ",i,n);const s={};return this.Ui(s,r),this.qi(e,i,s,n).then((e=>(Ar("RestConnection","Received: ",e),e)),(t=>{throw Nr("RestConnection",`${e} failed with error: `,t,"url: ",i,"request:",n),t}))}Ki(e,t,n,r){return this.Li(e,t,n,r)}Ui(e,t){if(e["X-Goog-Api-Client"]="gl-js/ fire/"+Sr,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t)for(const n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n])}Bi(e,t){const n=lu[e];return`${this.Fi}/v1/${t}:${n}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}qi(e,t,n,r){return new Promise(((i,s)=>{const o=new Ir;o.listenOnce(gr.COMPLETE,(()=>{try{switch(o.getLastErrorCode()){case mr.NO_ERROR:const t=o.getResponseJson();Ar("Connection","XHR received:",JSON.stringify(t)),i(t);break;case mr.TIMEOUT:Ar("Connection",'RPC "'+e+'" timed out'),s(new Lr(Pr.DEADLINE_EXCEEDED,"Request time out"));break;case mr.HTTP_ERROR:const n=o.getStatus();if(Ar("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){const e=o.getResponseJson().error;if(e&&e.status&&e.message){const t=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Pr).indexOf(t)>=0?t:Pr.UNKNOWN}(e.status);s(new Lr(t,e.message))}else s(new Lr(Pr.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new Lr(Pr.UNAVAILABLE,"Connection failed."));break;default:xr()}}finally{Ar("Connection",'RPC "'+e+'" completed.')}}));const a=JSON.stringify(r);o.send(t,"POST",a,n,15)}))}ji(e,t){const n=[this.Fi,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=fr(),i=pr(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(s.xmlHttpFactory=new wr({})),this.Ui(s.initMessageHeaders,t),(0,o.uI)()||(0,o.b$)()||(0,o.d)()||(0,o.w1)()||(0,o.Mn)()||(0,o.ru)()||(s.httpHeadersOverwriteParam="$httpHeaders");const a=n.join("");Ar("Connection","Creating WebChannel: "+a,s);const c=r.createWebChannel(a,s);let u=!1,h=!1;const l=new du({vi:e=>{h?Ar("Connection","Not sending because WebChannel is closed:",e):(u||(Ar("Connection","Opening WebChannel transport."),c.open(),u=!0),Ar("Connection","WebChannel sending:",e),c.send(e))},Vi:()=>c.close()}),d=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return d(c,br.EventType.OPEN,(()=>{h||Ar("Connection","WebChannel transport opened.")})),d(c,br.EventType.CLOSE,(()=>{h||(h=!0,Ar("Connection","WebChannel transport closed"),l.$i())})),d(c,br.EventType.ERROR,(e=>{h||(h=!0,Nr("Connection","WebChannel transport errored:",e),l.$i(new Lr(Pr.UNAVAILABLE,"The operation could not be completed")))})),d(c,br.EventType.MESSAGE,(e=>{var t;if(!h){const n=e.data[0];Dr(!!n);const r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){Ar("Connection","WebChannel received error:",i);const e=i.status;let t=function(e){const t=Ws[e];if(void 0!==t)return Ys(t)}(e),n=i.message;void 0===t&&(t=Pr.INTERNAL,n="Unknown error status: "+e+" with message "+i.message),h=!0,l.$i(new Lr(t,n)),c.close()}else Ar("Connection","WebChannel received:",n),l.Oi(n)}})),d(i,yr.STAT_EVENT,(e=>{e.stat===vr.PROXY?Ar("Connection","Detected buffering proxy"):e.stat===vr.NOPROXY&&Ar("Connection","Detected no buffering proxy")})),setTimeout((()=>{l.ki()}),0),l}}function pu(){return"undefined"!=typeof window?window:null}function mu(){return"undefined"!=typeof document?document:null}function gu(e){return new _o(e,!0)}class yu{constructor(e,t,n=1e3,r=1.5,i=6e4){this.Oe=e,this.timerId=t,this.Qi=n,this.Wi=r,this.Gi=i,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}reset(){this.zi=0}Yi(){this.zi=this.Gi}Xi(e){this.cancel();const t=Math.floor(this.zi+this.Zi()),n=Math.max(0,Date.now()-this.Ji),r=Math.max(0,t-n);r>0&&Ar("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.zi} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,r,(()=>(this.Ji=Date.now(),e()))),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}tr(){null!==this.Hi&&(this.Hi.skipDelay(),this.Hi=null)}cancel(){null!==this.Hi&&(this.Hi.cancel(),this.Hi=null)}Zi(){return(Math.random()-.5)*this.zi}}class vu{constructor(e,t,n,r,i,s){this.Oe=e,this.er=n,this.nr=r,this.credentialsProvider=i,this.listener=s,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new yu(e,t)}ar(){return 1===this.state||2===this.state||4===this.state}cr(){return 2===this.state}start(){3!==this.state?this.auth():this.ur()}async stop(){this.ar()&&await this.close(0)}hr(){this.state=0,this.rr.reset()}lr(){this.cr()&&null===this.ir&&(this.ir=this.Oe.enqueueAfterDelay(this.er,6e4,(()=>this.dr())))}wr(e){this._r(),this.stream.send(e)}async dr(){if(this.cr())return this.close(0)}_r(){this.ir&&(this.ir.cancel(),this.ir=null)}async close(e,t){this._r(),this.rr.cancel(),this.sr++,3!==e?this.rr.reset():t&&t.code===Pr.RESOURCE_EXHAUSTED?(Cr(t.toString()),Cr("Using maximum backoff delay to prevent overloading the backend."),this.rr.Yi()):t&&t.code===Pr.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.mr(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ci(t)}mr(){}auth(){this.state=1;const e=this.gr(this.sr),t=this.sr;this.credentialsProvider.getToken().then((e=>{this.sr===t&&this.yr(e)}),(t=>{e((()=>{const e=new Lr(Pr.UNKNOWN,"Fetching auth token failed: "+t.message);return this.pr(e)}))}))}yr(e){const t=this.gr(this.sr);this.stream=this.Er(e),this.stream.Si((()=>{t((()=>(this.state=2,this.listener.Si())))})),this.stream.Ci((e=>{t((()=>this.pr(e)))})),this.stream.onMessage((e=>{t((()=>this.onMessage(e)))}))}ur(){this.state=4,this.rr.Xi((async()=>{this.state=0,this.start()}))}pr(e){return Ar("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(3,e)}gr(e){return t=>{this.Oe.enqueueAndForget((()=>this.sr===e?t():(Ar("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class wu extends vu{constructor(e,t,n,r,i){super(e,"listen_stream_connection_backoff","listen_stream_idle",t,n,i),this.N=r}Er(e){return this.nr.ji("Listen",e)}onMessage(e){this.rr.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:xr()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.D?(Dr(void 0===t||"string"==typeof t),ii.fromBase64String(t||"")):(Dr(void 0===t||t instanceof Uint8Array),ii.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Pr.UNKNOWN:Ys(e.code);return new Lr(t,e.message||"")}(o);n=new vo(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ro(e,r.document.name),s=No(r.document.updateTime),o=new Ni({mapValue:{fields:r.document.fields}}),a=xi.newFoundDocument(i,s,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new go(c,u,a.key,a)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Ro(e,r.document),s=r.readTime?No(r.readTime):Xr.min(),o=xi.newNoDocument(i,s),a=r.removedTargetIds||[];n=new go([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Ro(e,r.document),s=r.removedTargetIds||[];n=new go([],s,i,null)}else{if(!("filter"in t))return xr();{t.filter;const e=t.filter;e.targetId;const r=e.count||0,i=new Gs(r),s=e.targetId;n=new yo(s,i)}}return n}(this.N,e),n=function(e){if(!("targetChange"in e))return Xr.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Xr.min():t.readTime?No(t.readTime):Xr.min()}(e);return this.listener.Tr(t,n)}Ir(e){const t={};t.database=Mo(this.N),t.addTarget=function(e,t){let n;const r=t.target;return n=Mi(r)?{documents:Bo(e,r)}:{query:qo(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Ao(e,t.resumeToken):t.snapshotVersion.compareTo(Xr.min())>0&&(n.readTime=ko(e,t.snapshotVersion.toTimestamp())),n}(this.N,e);const n=function(e,t){const n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return xr()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.N,e);n&&(t.labels=n),this.wr(t)}Ar(e){const t={};t.database=Mo(this.N),t.removeTarget=e,this.wr(t)}}class bu extends vu{constructor(e,t,n,r,i){super(e,"write_stream_connection_backoff","write_stream_idle",t,n,i),this.N=r,this.Rr=!1}get Pr(){return this.Rr}start(){this.Rr=!1,this.lastStreamToken=void 0,super.start()}mr(){this.Rr&&this.br([])}Er(e){return this.nr.ji("Write",e)}onMessage(e){if(Dr(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Rr){this.rr.reset();const t=function(e,t){return e&&e.length>0?(Dr(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?No(e.updateTime):No(t);return n.isEqual(Xr.min())&&(n=No(t)),new xs(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=No(e.commitTime);return this.listener.vr(n,t)}return Dr(!e.writeResults||0===e.writeResults.length),this.Rr=!0,this.listener.Vr()}Sr(){const e={};e.database=Mo(this.N),this.wr(e)}br(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Vo(this.N,e)))};this.wr(t)}}class Iu extends class{}{constructor(e,t,n){super(),this.credentials=e,this.nr=t,this.N=n,this.Dr=!1}Cr(){if(this.Dr)throw new Lr(Pr.FAILED_PRECONDITION,"The client has already been terminated.")}Li(e,t,n){return this.Cr(),this.credentials.getToken().then((r=>this.nr.Li(e,t,n,r))).catch((e=>{throw"FirebaseError"===e.name?(e.code===Pr.UNAUTHENTICATED&&this.credentials.invalidateToken(),e):new Lr(Pr.UNKNOWN,e.toString())}))}Ki(e,t,n){return this.Cr(),this.credentials.getToken().then((r=>this.nr.Ki(e,t,n,r))).catch((e=>{throw"FirebaseError"===e.name?(e.code===Pr.UNAUTHENTICATED&&this.credentials.invalidateToken(),e):new Lr(Pr.UNKNOWN,e.toString())}))}terminate(){this.Dr=!0}}class Tu{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Nr=0,this.kr=null,this.$r=!0}Or(){0===this.Nr&&(this.Fr("Unknown"),this.kr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.kr=null,this.Mr("Backend didn't respond within 10 seconds."),this.Fr("Offline"),Promise.resolve()))))}Lr(e){"Online"===this.state?this.Fr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Fr("Offline")))}set(e){this.Br(),this.Nr=0,"Online"===e&&(this.$r=!1),this.Fr(e)}Fr(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}Mr(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.$r?(Cr(t),this.$r=!1):Ar("OnlineStateTracker",t)}Br(){null!==this.kr&&(this.kr.cancel(),this.kr=null)}}class Eu{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ur=[],this.qr=new Map,this.Kr=new Set,this.jr=[],this.Qr=i,this.Qr.Ei((e=>{n.enqueueAndForget((async()=>{Du(this)&&(Ar("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Rr(e);t.Kr.add(4),await _u(t),t.Wr.set("Unknown"),t.Kr.delete(4),await Su(t)}(this))}))})),this.Wr=new Tu(n,r)}}async function Su(e){if(Du(e))for(const t of e.jr)await t(!0)}async function _u(e){for(const t of e.jr)await t(!1)}function ku(e,t){const n=Rr(e);n.qr.has(t.targetId)||(n.qr.set(t.targetId,t),xu(n)?Ou(n):Xu(n).cr()&&Cu(n,t))}function Au(e,t){const n=Rr(e),r=Xu(n);n.qr.delete(t),r.cr()&&Nu(n,t),0===n.qr.size&&(r.cr()?r.lr():Du(n)&&n.Wr.set("Unknown"))}function Cu(e,t){e.Gr.Y(t.targetId),Xu(e).Ir(t)}function Nu(e,t){e.Gr.Y(t),Xu(e).Ar(t)}function Ou(e){e.Gr=new bo({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>e.qr.get(t)||null}),Xu(e).start(),e.Wr.Or()}function xu(e){return Du(e)&&!Xu(e).ar()&&e.qr.size>0}function Du(e){return 0===Rr(e).Kr.size}function Ru(e){e.Gr=void 0}async function Pu(e){e.qr.forEach(((t,n)=>{Cu(e,t)}))}async function Lu(e,t){Ru(e),xu(e)?(e.Wr.Lr(t),Ou(e)):e.Wr.set("Unknown")}async function Mu(e,t,n){if(e.Wr.set("Online"),t instanceof vo&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.qr.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.qr.delete(r),e.Gr.removeTarget(r))}(e,t)}catch(n){Ar("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Fu(e,n)}else if(t instanceof go?e.Gr.rt(t):t instanceof yo?e.Gr.ft(t):e.Gr.ct(t),!n.isEqual(Xr.min()))try{const t=await Kc(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Gr._t(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.qr.get(r);i&&e.qr.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((t=>{const n=e.qr.get(t);if(!n)return;e.qr.set(t,n.withResumeToken(ii.EMPTY_BYTE_STRING,n.snapshotVersion)),Nu(e,t);const r=new ja(n.target,t,1,n.sequenceNumber);Cu(e,r)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Ar("RemoteStore","Failed to raise snapshot:",t),await Fu(e,t)}}async function Fu(e,t,n){if(!Oa(t))throw t;e.Kr.add(1),await _u(e),e.Wr.set("Offline"),n||(n=()=>Kc(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Ar("RemoteStore","Retrying IndexedDB access"),await n(),e.Kr.delete(1),await Su(e)}))}function Uu(e,t){return t().catch((n=>Fu(e,n,t)))}async function ju(e){const t=Rr(e),n=Ju(t);let r=t.Ur.length>0?t.Ur[t.Ur.length-1].batchId:-1;for(;Vu(t);)try{const e=await Gc(t.localStore,r);if(null===e){0===t.Ur.length&&n.lr();break}r=e.batchId,zu(t,e)}catch(e){await Fu(t,e)}Bu(t)&&qu(t)}function Vu(e){return Du(e)&&e.Ur.length<10}function zu(e,t){e.Ur.push(t);const n=Ju(e);n.cr()&&n.Pr&&n.br(t.mutations)}function Bu(e){return Du(e)&&!Ju(e).ar()&&e.Ur.length>0}function qu(e){Ju(e).start()}async function Hu(e){Ju(e).Sr()}async function Ku(e){const t=Ju(e);for(const n of e.Ur)t.br(n.mutations)}async function $u(e,t,n){const r=e.Ur.shift(),i=Ua.from(r,t,n);await Uu(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await ju(e)}async function Gu(e,t){t&&Ju(e).Pr&&await async function(e,t){if(Js(n=t.code)&&n!==Pr.ABORTED){const n=e.Ur.shift();Ju(e).hr(),await Uu(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await ju(e)}var n}(e,t),Bu(e)&&qu(e)}async function Wu(e,t){const n=Rr(e);t?(n.Kr.delete(2),await Su(n)):t||(n.Kr.add(2),await _u(n),n.Wr.set("Unknown"))}function Xu(e){return e.zr||(e.zr=function(e,t,n){const r=Rr(e);return r.Cr(),new wu(t,r.nr,r.credentials,r.N,n)}(e.datastore,e.asyncQueue,{Si:Pu.bind(null,e),Ci:Lu.bind(null,e),Tr:Mu.bind(null,e)}),e.jr.push((async t=>{t?(e.zr.hr(),xu(e)?Ou(e):e.Wr.set("Unknown")):(await e.zr.stop(),Ru(e))}))),e.zr}function Ju(e){return e.Hr||(e.Hr=function(e,t,n){const r=Rr(e);return r.Cr(),new bu(t,r.nr,r.credentials,r.N,n)}(e.datastore,e.asyncQueue,{Si:Hu.bind(null,e),Ci:Gu.bind(null,e),Vr:Ku.bind(null,e),vr:$u.bind(null,e)}),e.jr.push((async t=>{t?(e.Hr.hr(),await ju(e)):(await e.Hr.stop(),e.Ur.length>0&&(Ar("RemoteStore",`Stopping write stream with ${e.Ur.length} pending writes`),e.Ur=[]))}))),e.Hr}class Yu{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Mr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new Yu(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Lr(Pr.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Qu(e,t){if(Cr("AsyncQueue",`${t}: ${e}`),Oa(e))return new Lr(Pr.UNAVAILABLE,`${t}: ${e}`);throw e}class Zu{constructor(e){this.comparator=e?(t,n)=>e(t,n)||mi.comparator(t.key,n.key):(e,t)=>mi.comparator(e.key,t.key),this.keyedMap=oo(),this.sortedSet=new Qs(this.comparator)}static emptySet(e){return new Zu(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Zu))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Zu;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class eh{constructor(){this.Jr=new Qs(mi.comparator)}track(e){const t=e.doc.key,n=this.Jr.get(t);n?0!==e.type&&3===n.type?this.Jr=this.Jr.insert(t,e):3===e.type&&1!==n.type?this.Jr=this.Jr.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Jr=this.Jr.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Jr=this.Jr.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Jr=this.Jr.remove(t):1===e.type&&2===n.type?this.Jr=this.Jr.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Jr=this.Jr.insert(t,{type:2,doc:e.doc}):xr():this.Jr=this.Jr.insert(t,e)}Yr(){const e=[];return this.Jr.inorderTraversal(((t,n)=>{e.push(n)})),e}}class th{constructor(e,t,n,r,i,s,o,a){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a}static fromInitialDocuments(e,t,n,r){const i=[];return t.forEach((e=>{i.push({type:0,doc:e})})),new th(e,t,Zu.emptySet(t),i,n,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&us(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class nh{constructor(){this.Xr=void 0,this.listeners=[]}}class rh{constructor(){this.queries=new _c((e=>hs(e)),us),this.onlineState="Unknown",this.Zr=new Set}}async function ih(e,t){const n=Rr(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new nh),i)try{s.Xr=await n.onListen(r)}catch(e){const n=Qu(e,`Initialization of query '${ls(t.query)}' failed`);return void t.onError(n)}n.queries.set(r,s),s.listeners.push(t),t.eo(n.onlineState),s.Xr&&t.no(s.Xr)&&ch(n)}async function sh(e,t){const n=Rr(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function oh(e,t){const n=Rr(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.listeners)e.no(i)&&(r=!0);t.Xr=i}}r&&ch(n)}function ah(e,t,n){const r=Rr(e),i=r.queries.get(t);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(t)}function ch(e){e.Zr.forEach((e=>{e.next()}))}class uh{constructor(e,t,n){this.query=e,this.so=t,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=n||{}}no(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new th(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.io?this.oo(e)&&(this.so.next(e),t=!0):this.ao(e,this.onlineState)&&(this.co(e),t=!0),this.ro=e,t}onError(e){this.so.error(e)}eo(e){this.onlineState=e;let t=!1;return this.ro&&!this.io&&this.ao(this.ro,e)&&(this.co(this.ro),t=!0),t}ao(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.uo||!n)&&(!e.docs.isEmpty()||"Offline"===t)}oo(e){if(e.docChanges.length>0)return!0;const t=this.ro&&this.ro.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}co(e){e=th.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.io=!0,this.so.next(e)}}class hh{constructor(e){this.key=e}}class lh{constructor(e){this.key=e}}class dh{constructor(e,t){this.query=e,this._o=t,this.mo=null,this.current=!1,this.yo=ho(),this.mutatedKeys=ho(),this.po=fs(e),this.Eo=new Zu(this.po)}get To(){return this._o}Io(e,t){const n=t?t.Ao:new eh,r=t?t.Eo:this.Eo;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a=ts(this.query)&&r.size===this.query.limit?r.last():null,c=ns(this.query)&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const u=r.get(e),h=ds(this.query,t)?t:null,l=!!u&&this.mutatedKeys.has(u.key),d=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let f=!1;u&&h?u.data.isEqual(h.data)?l!==d&&(n.track({type:3,doc:h}),f=!0):this.Ro(u,h)||(n.track({type:2,doc:h}),f=!0,(a&&this.po(h,a)>0||c&&this.po(h,c)<0)&&(o=!0)):!u&&h?(n.track({type:0,doc:h}),f=!0):u&&!h&&(n.track({type:1,doc:u}),f=!0,(a||c)&&(o=!0)),f&&(h?(s=s.add(h),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),ts(this.query)||ns(this.query))for(;s.size>this.query.limit;){const e=ts(this.query)?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Eo:s,Ao:n,Ln:o,mutatedKeys:i}}Ro(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.Eo;this.Eo=e.Eo,this.mutatedKeys=e.mutatedKeys;const i=e.Ao.Yr();i.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xr()}};return n(e)-n(t)}(e.type,t.type)||this.po(e.doc,t.doc))),this.Po(n);const s=t?this.bo():[],o=0===this.yo.size&&this.current?1:0,a=o!==this.mo;return this.mo=o,0!==i.length||a?{snapshot:new th(this.query,e.Eo,r,i,e.mutatedKeys,0===o,a,!1),vo:s}:{vo:s}}eo(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Eo:this.Eo,Ao:new eh,mutatedKeys:this.mutatedKeys,Ln:!1},!1)):{vo:[]}}Vo(e){return!this._o.has(e)&&!!this.Eo.has(e)&&!this.Eo.get(e).hasLocalMutations}Po(e){e&&(e.addedDocuments.forEach((e=>this._o=this._o.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this._o=this._o.delete(e))),this.current=e.current)}bo(){if(!this.current)return[];const e=this.yo;this.yo=ho(),this.Eo.forEach((e=>{this.Vo(e.key)&&(this.yo=this.yo.add(e.key))}));const t=[];return e.forEach((e=>{this.yo.has(e)||t.push(new lh(e))})),this.yo.forEach((n=>{e.has(n)||t.push(new hh(n))})),t}So(e){this._o=e.Gn,this.yo=ho();const t=this.Io(e.documents);return this.applyChanges(t,!0)}Do(){return th.fromInitialDocuments(this.query,this.Eo,this.mutatedKeys,0===this.mo)}}class fh{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class ph{constructor(e){this.key=e,this.Co=!1}}class mh{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.No={},this.xo=new _c((e=>hs(e)),us),this.ko=new Map,this.$o=new Set,this.Oo=new Qs(mi.comparator),this.Fo=new Map,this.Mo=new Qc,this.Lo={},this.Bo=new Map,this.Uo=fc.ie(),this.onlineState="Unknown",this.qo=void 0}get isPrimaryClient(){return!0===this.qo}}async function gh(e,t){const n=Ph(e);let r,i;const s=n.xo.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Do();else{const e=await Wc(n.localStore,as(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await yh(n,t,r,"current"===s),n.isPrimaryClient&&ku(n.remoteStore,e)}return i}async function yh(e,t,n,r){e.Ko=(t,n,r)=>async function(e,t,n,r){let i=t.view.Io(n);i.Ln&&(i=await Jc(e.localStore,t.query,!1).then((({documents:e})=>t.view.Io(e,i))));const s=r&&r.targetChanges.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s);return Ch(e,t.targetId,o.vo),o.snapshot}(e,t,n,r);const i=await Jc(e.localStore,t,!0),s=new dh(t,i.Gn),o=s.Io(i.documents),a=mo.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState),c=s.applyChanges(o,e.isPrimaryClient,a);Ch(e,n,c.vo);const u=new fh(t,n,s);return e.xo.set(t,u),e.ko.has(n)?e.ko.get(n).push(t):e.ko.set(n,[t]),c.snapshot}async function vh(e,t){const n=Rr(e),r=n.xo.get(t),i=n.ko.get(r.targetId);if(i.length>1)return n.ko.set(r.targetId,i.filter((e=>!us(e,t)))),void n.xo.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Xc(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),Au(n.remoteStore,r.targetId),kh(n,r.targetId)})).catch(vc)):(kh(n,r.targetId),await Xc(n.localStore,r.targetId,!0))}async function wh(e,t){const n=Rr(e);try{const e=await function(e,t){const n=Rr(e),r=t.snapshotVersion;let i=n.Un;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.jn.newChangeBuffer({trackRemovals:!0});i=n.Un;const o=[];t.targetChanges.forEach(((t,s)=>{const a=i.get(s);if(!a)return;o.push(n.ze.removeMatchingKeys(e,t.removedDocuments,s).next((()=>n.ze.addMatchingKeys(e,t.addedDocuments,s))));const c=t.resumeToken;if(c.approximateByteSize()>0){const u=a.withResumeToken(c,r).withSequenceNumber(e.currentSequenceNumber);i=i.insert(s,u),function(e,t,n){return Dr(t.resumeToken.approximateByteSize()>0),0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,u,t)&&o.push(n.ze.updateTargetData(e,u))}}));let a=io();if(t.documentUpdates.forEach(((r,i)=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push($c(e,s,t.documentUpdates,r,void 0).next((e=>{a=e}))),!r.isEqual(Xr.min())){const t=n.ze.getLastRemoteSnapshotVersion(e).next((t=>n.ze.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return _a.waitFor(o).next((()=>s.apply(e))).next((()=>n.Qn.vn(e,a))).next((()=>a))})).then((e=>(n.Un=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Fo.get(t);r&&(Dr(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.Co=!0:e.modifiedDocuments.size>0?Dr(r.Co):e.removedDocuments.size>0&&(Dr(r.Co),r.Co=!1))})),await xh(n,e,t)}catch(e){await vc(e)}}function bh(e,t,n){const r=Rr(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.xo.forEach(((n,r)=>{const i=r.view.eo(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Rr(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.listeners)i.eo(t)&&(r=!0)})),r&&ch(n)}(r.eventManager,t),e.length&&r.No.Tr(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Ih(e,t,n){const r=Rr(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fo.get(t),s=i&&i.key;if(s){let e=new Qs(mi.comparator);e=e.insert(s,xi.newNoDocument(s,Xr.min()));const n=ho().add(s),i=new po(Xr.min(),new Map,new to(Kr),e,n);await wh(r,i),r.Oo=r.Oo.remove(s),r.Fo.delete(t),Oh(r)}else await Xc(r.localStore,t,!1).then((()=>kh(r,t,n))).catch(vc)}async function Th(e,t){const n=Rr(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Rr(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.jn.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=_a.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);Dr(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&r.addEntry(t,n.commitVersion))}))})),o.next((()=>e.In.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.In.performConsistencyCheck(e))).next((()=>n.Qn.bn(e,r)))}))}(n.localStore,t);_h(n,r,null),Sh(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await xh(n,e)}catch(e){await vc(e)}}async function Eh(e,t,n){const r=Rr(e);try{const e=await function(e,t){const n=Rr(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.In.lookupMutationBatch(e,t).next((t=>(Dr(null!==t),r=t.keys(),n.In.removeMutationBatch(e,t)))).next((()=>n.In.performConsistencyCheck(e))).next((()=>n.Qn.bn(e,r)))}))}(r.localStore,t);_h(r,t,n),Sh(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await xh(r,e)}catch(n){await vc(n)}}function Sh(e,t){(e.Bo.get(t)||[]).forEach((e=>{e.resolve()})),e.Bo.delete(t)}function _h(e,t,n){const r=Rr(e);let i=r.Lo[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Lo[r.currentUser.toKey()]=i}}function kh(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.ko.get(t))e.xo.delete(r),n&&e.No.jo(r,n);e.ko.delete(t),e.isPrimaryClient&&e.Mo.cs(t).forEach((t=>{e.Mo.containsKey(t)||Ah(e,t)}))}function Ah(e,t){e.$o.delete(t.path.canonicalString());const n=e.Oo.get(t);null!==n&&(Au(e.remoteStore,n),e.Oo=e.Oo.remove(t),e.Fo.delete(n),Oh(e))}function Ch(e,t,n){for(const r of n)r instanceof hh?(e.Mo.addReference(r.key,t),Nh(e,r)):r instanceof lh?(Ar("SyncEngine","Document no longer in limbo: "+r.key),e.Mo.removeReference(r.key,t),e.Mo.containsKey(r.key)||Ah(e,r.key)):xr()}function Nh(e,t){const n=t.key,r=n.path.canonicalString();e.Oo.get(n)||e.$o.has(r)||(Ar("SyncEngine","New document in limbo: "+n),e.$o.add(r),Oh(e))}function Oh(e){for(;e.$o.size>0&&e.Oo.size<e.maxConcurrentLimboResolutions;){const t=e.$o.values().next().value;e.$o.delete(t);const n=new mi(ei.fromString(t)),r=e.Uo.next();e.Fo.set(r,new ph(n)),e.Oo=e.Oo.insert(n,r),ku(e.remoteStore,new ja(as(es(n.path)),r,2,Br.T))}}async function xh(e,t,n){const r=Rr(e),i=[],s=[],o=[];r.xo.isEmpty()||(r.xo.forEach(((e,a)=>{o.push(r.Ko(a,t,n).then((e=>{if(e){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,e.fromCache?"not-current":"current"),i.push(e);const t=Vc.kn(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.No.Tr(i),await async function(e,t){const n=Rr(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>_a.forEach(t,(t=>_a.forEach(t.Nn,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>_a.forEach(t.xn,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Oa(e))throw e;Ar("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Un.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Un=n.Un.insert(e,i)}}}(r.localStore,s))}async function Dh(e,t){const n=Rr(e);if(!n.currentUser.isEqual(t)){Ar("SyncEngine","User change. New user:",t.toKey());const e=await Hc(n.localStore,t);n.currentUser=t,function(e,t){e.Bo.forEach((e=>{e.forEach((e=>{e.reject(new Lr(Pr.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Bo.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await xh(n,e.Wn)}}function Rh(e,t){const n=Rr(e),r=n.Fo.get(t);if(r&&r.Co)return ho().add(r.key);{let e=ho();const r=n.ko.get(t);if(!r)return e;for(const t of r){const r=n.xo.get(t);e=e.unionWith(r.view.To)}return e}}function Ph(e){const t=Rr(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=wh.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Rh.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Ih.bind(null,t),t.No.Tr=oh.bind(null,t.eventManager),t.No.jo=ah.bind(null,t.eventManager),t}function Lh(e){const t=Rr(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Th.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Eh.bind(null,t),t}class Mh{constructor(){this.synchronizeTabs=!1}async initialize(e){this.N=gu(e.databaseInfo.databaseId),this.sharedClientState=this.Wo(e),this.persistence=this.Go(e),await this.persistence.start(),this.gcScheduler=this.zo(e),this.localStore=this.Ho(e)}zo(e){return null}Ho(e){return qc(this.persistence,new zc,e.initialUser,this.N)}Go(e){return new iu(ou.Ns,this.N)}Wo(e){return new cu}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Fh extends Mh{constructor(e,t,n){super(),this.Jo=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await async function(e){const t=Rr(e);return t.persistence.runTransaction("Synchronize last document change read time","readonly",(e=>function(e){const t=Oc(e);let n=Xr.min();return t.Kt({index:fa.readTimeIndex,reverse:!0},((e,t,r)=>{t.readTime&&(n=Ha(t.readTime)),r.done()})).next((()=>n))}(e))).then((e=>{t.Kn=e}))}(this.localStore),await this.Jo.initialize(this,e),await Lh(this.Jo.syncEngine),await ju(this.Jo.remoteStore),await this.persistence.nn((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(this.localStore),Promise.resolve())))}Ho(e){return qc(this.persistence,new zc,e.initialUser,this.N)}zo(e){const t=this.persistence.referenceDelegate.garbageCollector;return new Ic(t,e.asyncQueue)}Go(e){const t=Uc(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?sc.withCacheSize(this.cacheSizeBytes):sc.DEFAULT;return new Lc(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,pu(),mu(),this.N,this.sharedClientState,!!this.forceOwnership)}Wo(e){return new cu}}class Uh{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>bh(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Dh.bind(null,this.syncEngine),await Wu(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new rh}createDatastore(e){const t=gu(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new fu(r));var r;return function(e,t,n){return new Iu(e,t,n)}(e.credentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>bh(this.syncEngine,e,0),s=hu.Pt()?new hu:new uu,new Eu(t,n,r,i,s);var t,n,r,i,s}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new mh(e,t,n,r,i,s);return o&&(a.qo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=Rr(e);Ar("RemoteStore","RemoteStore shutting down."),t.Kr.add(5),await _u(t),t.Qr.shutdown(),t.Wr.set("Unknown")}(this.remoteStore)}}class jh{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Yo(this.observer.next,e)}error(e){this.observer.error?this.Yo(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Xo(){this.muted=!0}Yo(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class Vh{constructor(e,t,n){this.credentials=e,this.asyncQueue=t,this.databaseInfo=n,this.user=Er.UNAUTHENTICATED,this.clientId=Hr.I(),this.credentialListener=()=>Promise.resolve(),this.credentials.start(t,(async e=>{Ar("FirestoreClient","Received user=",e.uid),await this.credentialListener(e),this.user=e}))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.credentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Lr(Pr.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Mr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.credentials.shutdown(),e.resolve()}catch(t){const n=Qu(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function zh(e,t){e.asyncQueue.verifyOperationInProgress(),Ar("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Hc(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e.offlineComponents=t}async function Bh(e,t){e.asyncQueue.verifyOperationInProgress();const n=await qh(e);Ar("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener((e=>async function(e,t){const n=Rr(e);n.asyncQueue.verifyOperationInProgress(),Ar("RemoteStore","RemoteStore received new credentials");const r=Du(n);n.Kr.add(3),await _u(n),r&&n.Wr.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Kr.delete(3),await Su(n)}(t.remoteStore,e))),e.onlineComponents=t}async function qh(e){return e.offlineComponents||(Ar("FirestoreClient","Using default OfflineComponentProvider"),await zh(e,new Mh)),e.offlineComponents}async function Hh(e){return e.onlineComponents||(Ar("FirestoreClient","Using default OnlineComponentProvider"),await Bh(e,new Uh)),e.onlineComponents}function Kh(e){return Hh(e).then((e=>e.syncEngine))}async function $h(e){const t=await Hh(e),n=t.eventManager;return n.onListen=gh.bind(null,t.syncEngine),n.onUnlisten=vh.bind(null,t.syncEngine),n}class Gh{constructor(e,t,n,r,i,s,o,a){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.useFetchStreams=a}}class Wh{constructor(e,t){this.projectId=e,this.database=t||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Wh&&e.projectId===this.projectId&&e.database===this.database}}const Xh=new Map;function Jh(e,t,n){if(!n)throw new Lr(Pr.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Yh(e){if(!mi.isDocumentKey(e))throw new Lr(Pr.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Qh(e){if(mi.isDocumentKey(e))throw new Lr(Pr.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Zh(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){if(e.constructor){const t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&t.length>1)return t[1]}return null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":xr()}function el(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Lr(Pr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Zh(e);throw new Lr(Pr.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function tl(e,t){if(t<=0)throw new Lr(Pr.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}class nl{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Lr(Pr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Lr(Pr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,function(e,t,n,r){if(!0===t&&!0===r)throw new Lr(Pr.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class rl{constructor(e,t){this._credentials=t,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nl({}),this._settingsFrozen=!1,e instanceof Wh?this._databaseId=e:(this._app=e,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Lr(Pr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wh(e.options.projectId)}(e))}get app(){if(!this._app)throw new Lr(Pr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Lr(Pr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nl(e),void 0!==e.credentials&&(this._credentials=function(e){if(!e)return new Ur;switch(e.type){case"gapi":const t=e.client;return Dr(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new zr(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Lr(Pr.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Xh.get(e);t&&(Ar("ComponentProvider","Removing Datastore"),Xh.delete(e),t.terminate())}(this),Promise.resolve()}}class il{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ol(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new il(this.firestore,e,this._key)}}class sl{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new sl(this.firestore,e,this._query)}}class ol extends sl{constructor(e,t,n){super(e,t,es(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new il(this.firestore,null,new mi(e))}withConverter(e){return new ol(this.firestore,e,this._path)}}function al(e,t,...n){if(e=(0,o.m9)(e),Jh("collection","path",t),e instanceof rl){const r=ei.fromString(t,...n);return Qh(r),new ol(e,null,r)}{if(!(e instanceof il||e instanceof ol))throw new Lr(Pr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=ei.fromString(e.path,...n).child(ei.fromString(t));return Qh(r),new ol(e.firestore,null,r)}}function cl(e,t,...n){if(e=(0,o.m9)(e),1===arguments.length&&(t=Hr.I()),Jh("doc","path",t),e instanceof rl){const r=ei.fromString(t,...n);return Yh(r),new il(e,null,new mi(r))}{if(!(e instanceof il||e instanceof ol))throw new Lr(Pr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ei.fromString(t,...n));return Yh(r),new il(e.firestore,e instanceof ol?e.converter:null,new mi(r))}}class ul{constructor(){this.fa=Promise.resolve(),this.da=[],this.wa=!1,this._a=[],this.ma=null,this.ga=!1,this.ya=!1,this.pa=[],this.rr=new yu(this,"async_queue_retry"),this.Ea=()=>{const e=mu();e&&Ar("AsyncQueue","Visibility state changed to "+e.visibilityState),this.rr.tr()};const e=mu();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ea)}get isShuttingDown(){return this.wa}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ta(),this.Ia(e)}enterRestrictedMode(e){if(!this.wa){this.wa=!0,this.ya=e||!1;const t=mu();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ea)}}enqueue(e){if(this.Ta(),this.wa)return new Promise((()=>{}));const t=new Mr;return this.Ia((()=>this.wa&&this.ya?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.da.push(e),this.Aa())))}async Aa(){if(0!==this.da.length){try{await this.da[0](),this.da.shift(),this.rr.reset()}catch(e){if(!Oa(e))throw e;Ar("AsyncQueue","Operation failed with retryable error: "+e)}this.da.length>0&&this.rr.Xi((()=>this.Aa()))}}Ia(e){const t=this.fa.then((()=>(this.ga=!0,e().catch((e=>{throw this.ma=e,this.ga=!1,Cr("INTERNAL UNHANDLED ERROR: ",function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e)),e})).then((e=>(this.ga=!1,e))))));return this.fa=t,t}enqueueAfterDelay(e,t,n){this.Ta(),this.pa.indexOf(e)>-1&&(t=0);const r=Yu.createAndSchedule(this,e,t,n,(e=>this.Ra(e)));return this._a.push(r),r}Ta(){this.ma&&xr()}verifyOperationInProgress(){}async Pa(){let e;do{e=this.fa,await e}while(e!==this.fa)}ba(e){for(const t of this._a)if(t.timerId===e)return!0;return!1}va(e){return this.Pa().then((()=>{this._a.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this._a)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Pa()}))}Va(e){this.pa.push(e)}Ra(e){const t=this._a.indexOf(e);this._a.splice(t,1)}}function hl(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of["next","error","complete"])if(r in n&&"function"==typeof n[r])return!0;return!1}(e)}class ll extends rl{constructor(e,t){super(e,t),this.type="firestore",this._queue=new ul,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||pl(this),this._firestoreClient.terminate()}}function dl(e=(0,r.Mq)()){return(0,r.qX)(e,"firestore").getImmediate()}function fl(e){return e._firestoreClient||pl(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function pl(e){var t;const n=e._freezeSettings(),r=function(e,t,n,r){return new Gh(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new Vh(e._credentials,e._queue,r)}function ml(e,t){yl(e=el(e,ll));const n=fl(e),r=e._freezeSettings(),i=new Uh;return gl(n,i,new Fh(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}function gl(e,t,n){const r=new Mr;return e.asyncQueue.enqueue((async()=>{try{await zh(e,n),await Bh(e,t),r.resolve()}catch(e){if(!function(e){return"FirebaseError"===e.name?e.code===Pr.FAILED_PRECONDITION||e.code===Pr.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(e))throw e;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),r.reject(e)}})).then((()=>r.promise))}function yl(e){if(e._initialized||e._terminated)throw new Lr(Pr.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class vl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Lr(Pr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ni(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class wl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wl(ii.fromBase64String(e))}catch(e){throw new Lr(Pr.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new wl(ii.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class bl{constructor(e){this._methodName=e}}class Il{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Lr(Pr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Lr(Pr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Kr(this._lat,e._lat)||Kr(this._long,e._long)}}const Tl=/^__.*__$/;class El{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new zs(e,this.data,this.fieldMask,t,this.fieldTransforms):new Vs(e,this.data,t,this.fieldTransforms)}}function Sl(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xr()}}class _l{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.N=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Sa(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Da(){return this.settings.Da}Ca(e){return new _l(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Na(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Ca({path:n,xa:!1});return r.ka(e),r}$a(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Ca({path:n,xa:!1});return r.Sa(),r}Oa(e){return this.Ca({path:void 0,xa:!0})}Fa(e){return Ml(e,this.settings.methodName,this.settings.Ma||!1,this.path,this.settings.La)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Sa(){if(this.path)for(let e=0;e<this.path.length;e++)this.ka(this.path.get(e))}ka(e){if(0===e.length)throw this.Fa("Document fields must not be empty");if(Sl(this.Da)&&Tl.test(e))throw this.Fa('Document fields cannot begin and end with "__"')}}class kl{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.N=n||gu(e)}Ba(e,t,n,r=!1){return new _l({Da:e,methodName:t,La:n,path:ni.emptyPath(),xa:!1,Ma:r},this.databaseId,this.N,this.ignoreUndefinedProperties)}}function Al(e){const t=e._freezeSettings(),n=gu(e._databaseId);return new kl(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Cl(e,t,n,r,i,s={}){const o=e.Ba(s.merge||s.mergeFields?2:0,t,n,i);Dl("Data must be an object, but it was:",o,r);const a=Ol(r,o);let c,u;if(s.merge)c=new ri(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Rl(t,r,n);if(!o.contains(i))throw new Lr(Pr.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);Fl(e,i)||e.push(i)}c=new ri(e),u=o.fieldTransforms.filter((e=>c.covers(e.field)))}else c=null,u=o.fieldTransforms;return new El(new Ni(a),c,u)}function Nl(e,t){if(xl(e=(0,o.m9)(e)))return Dl("Unsupported field value:",t,e),Ol(e,t);if(e instanceof bl)return function(e,t){if(!Sl(t.Da))throw t.Fa(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Fa(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xa&&4!==t.Da)throw t.Fa("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Nl(i,t.Oa(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,o.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return ys(t.N,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Wr.fromDate(e);return{timestampValue:ko(t.N,n)}}if(e instanceof Wr){const n=new Wr(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:ko(t.N,n)}}if(e instanceof Il)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof wl)return{bytesValue:Ao(t.N,e._byteString)};if(e instanceof il){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Fa(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Oo(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Fa(`Unsupported field value: ${Zh(e)}`)}(e,t)}function Ol(e,t){const n={};return Qr(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Yr(e,((e,r)=>{const i=Nl(r,t.Na(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function xl(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Wr||e instanceof Il||e instanceof wl||e instanceof il||e instanceof bl)}function Dl(e,t,n){if(!xl(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Zh(n);throw"an object"===r?t.Fa(e+" a custom object"):t.Fa(e+" "+r)}}function Rl(e,t,n){if((t=(0,o.m9)(t))instanceof vl)return t._internalPath;if("string"==typeof t)return Ll(e,t);throw Ml("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}const Pl=new RegExp("[~\\*/\\[\\]]");function Ll(e,t,n){if(t.search(Pl)>=0)throw Ml(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new vl(...t.split("."))._internalPath}catch(r){throw Ml(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Ml(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new Lr(Pr.INVALID_ARGUMENT,a+e+c)}function Fl(e,t){return e.some((e=>e.isEqual(t)))}class Ul{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new il(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new jl(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Vl("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class jl extends Ul{data(){return super.data()}}function Vl(e,t){return"string"==typeof t?Ll(e,t):t instanceof vl?t._internalPath:t._delegate._internalPath}class zl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Bl extends Ul{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ql(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(Vl("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class ql extends Bl{data(e={}){return super.data(e)}}class Hl{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new zl(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new ql(this._firestore,this._userDataWriter,n.key,n,new zl(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Lr(Pr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>({type:"added",doc:new ql(e._firestore,e._userDataWriter,n.doc.key,n.doc,new zl(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:t++})))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new ql(e._firestore,e._userDataWriter,t.doc.key,t.doc,new zl(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Kl(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Kl(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xr()}}function $l(e){if(ns(e)&&0===e.explicitOrderBy.length)throw new Lr(Pr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Gl{}function Wl(e,...t){for(const n of t)e=n._apply(e);return e}class Xl extends Gl{constructor(e,t){super(),this.Ka=e,this.Wa=t,this.type="orderBy"}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Lr(Pr.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Lr(Pr.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const r=new Wi(t,n);return function(e,t){if(null===rs(e)){const n=is(e);null!==n&&Zl(e,n,t.field)}}(e,r),r}(e._query,this.Ka,this.Wa);return new sl(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Qi(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Jl(e,t="asc"){const n=t,r=Vl("orderBy",e);return new Xl(r,n)}class Yl extends Gl{constructor(e,t,n){super(),this.type=e,this.Ga=t,this.za=n}_apply(e){return new sl(e.firestore,e.converter,cs(e._query,this.Ga,this.za))}}function Ql(e){return tl("limit",e),new Yl("limit",e,"F")}function Zl(e,t,n){if(!n.isEqual(t))throw new Lr(Pr.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class ed{convertValue(e,t="none"){switch(gi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ai(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ci(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw xr()}}convertObject(e,t){const n={};return Yr(e.fields,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new Il(ai(e.latitude),ai(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=hi(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(li(e));default:return null}}convertTimestamp(e){const t=oi(e);return new Wr(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ei.fromString(e);Dr(ta(n));const r=new Wh(n.get(1),n.get(3)),i=new mi(n.popFirst(5));return r.isEqual(t)||Cr(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function td(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class nd extends ed{constructor(e){super(),this.firestore=e}convertBytes(e){return new wl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new il(this.firestore,null,t)}}function rd(e,t,n){e=el(e,il);const r=el(e.firestore,ll),i=td(e.converter,t,n);return ad(r,[Cl(Al(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Ds.none())])}function id(e){return ad(el(e.firestore,ll),[new Ks(e._key,Ds.none())])}function sd(e,t){const n=el(e.firestore,ll),r=cl(e),i=td(e.converter,t);return ad(n,[Cl(Al(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Ds.exists(!1))]).then((()=>r))}function od(e,...t){var n,r,i;e=(0,o.m9)(e);let s={includeMetadataChanges:!1},a=0;"object"!=typeof t[a]||hl(t[a])||(s=t[a],a++);const c={includeMetadataChanges:s.includeMetadataChanges};if(hl(t[a])){const e=t[a];t[a]=null===(n=e.next)||void 0===n?void 0:n.bind(e),t[a+1]=null===(r=e.error)||void 0===r?void 0:r.bind(e),t[a+2]=null===(i=e.complete)||void 0===i?void 0:i.bind(e)}let u,h,l;if(e instanceof il)h=el(e.firestore,ll),l=es(e._key.path),u={next:n=>{t[a]&&t[a](cd(h,e,n))},error:t[a+1],complete:t[a+2]};else{const n=el(e,sl);h=el(n.firestore,ll),l=n._query;const r=new nd(h);u={next:e=>{t[a]&&t[a](new Hl(h,r,n,e))},error:t[a+1],complete:t[a+2]},$l(e._query)}return function(e,t,n,r){const i=new jh(r),s=new uh(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>ih(await $h(e),s))),()=>{i.Xo(),e.asyncQueue.enqueueAndForget((async()=>sh(await $h(e),s)))}}(fl(h),l,c,u)}function ad(e,t){return function(e,t){const n=new Mr;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=Lh(e);try{const e=await function(e,t){const n=Rr(e),r=Wr.now(),i=t.reduce(((e,t)=>e.add(t.key)),ho());let s;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>n.Qn.bn(e,i).next((i=>{s=i;const o=[];for(const e of t){const t=Fs(e,s.get(e.key));null!=t&&o.push(new zs(e.key,t,Oi(t.value.mapValue),Ds.exists(!0)))}return n.In.addMutationBatch(e,r,o,t)})))).then((e=>(e.applyToLocalDocumentSet(s),{batchId:e.batchId,changes:s})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Lo[e.currentUser.toKey()];r||(r=new Qs(Kr)),r=r.insert(t,n),e.Lo[e.currentUser.toKey()]=r}(r,e.batchId,n),await xh(r,e.changes),await ju(r.remoteStore)}catch(e){const t=Qu(e,"Failed to persist write");n.reject(t)}}(await Kh(e),t,n))),n.promise}(fl(e),t)}function cd(e,t,n){const r=n.docs.get(t._key),i=new nd(e);return new Bl(e,i,t._key,r,new zl(n.hasPendingWrites,n.fromCache),t.converter)}!function(e){Sr=e}(r.Jn),(0,r.Xd)(new i.wA("firestore",((e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=new ll(n,new jr(e.getProvider("auth-internal")));return t=Object.assign({useFetchStreams:!0},t),r._setSettings(t),r}),"PUBLIC")),(0,r.KN)("@firebase/firestore","3.0.1",undefined)},8679:function(e,t,n){"use strict";var r=n(9864),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function c(e){return r.isMemo(e)?o:a[e.$$typeof]||i}a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[r.Memo]=o;var u=Object.defineProperty,h=Object.getOwnPropertyNames,l=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=f(n);i&&i!==p&&e(t,i,r)}var o=h(n);l&&(o=o.concat(l(n)));for(var a=c(t),m=c(n),g=0;g<o.length;++g){var y=o[g];if(!s[y]&&(!r||!r[y])&&(!m||!m[y])&&(!a||!a[y])){var v=d(n,y);try{u(t,y,v)}catch(w){}}}}return t}},1659:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var r=n(5893),i=n(6265),s=n(4258);(0,s.KN)("firebase","9.0.1","app");var o;o||(o=(0,s.ZF)({apiKey:"AIzaSyDDHyqo-5i80tyCyyYNXWP-B03cp5WT4d8",authDomain:"bigsix-43e20.firebaseapp.com",projectId:"bigsix-43e20",storageBucket:"bigsix-43e20.appspot.com",messagingSenderId:"211825675385",appId:"1:211825675385:web:acad014bee1da80cf358a8",measurementId:"G-6P3BE2ZW42"}));var a=n(4770),c=n(7294),u=n(2571),h=n(2934),l=function(e){var t=e.children,n=(0,a.aC)().setUser,i=(0,c.useState)(!0),s=i[0],o=i[1];return(0,c.useEffect)((function(){var e=(0,u.v0)();(0,u.Aj)(e,(function(e){n(null!==e?e:null),o(!1)}))}),[]),s?(0,r.jsx)(h.r,{}):t},d=n(1565),f=(0,d.vJ)(["*,*::before,*::after{margin:0;padding:0;box-sizing:border-box;border:0;}a{text-decoration:none;}body{background-color:",";color:",";font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;width:100vw;min-height:100vh;overflow-x:hidden;}"],(function(e){return e.theme.color.bgDark}),(function(e){return e.theme.color.white})),p={color:{bgLight:"#34425D",bgDark:"#2B3953",linear:"linear-gradient(200deg, #f5af19 20%, #f12711 80%)",orange:"#f18701",white:"#fff",accent:"#ECF1F4",light:"#FAFCFE",success:"#31D0AA",error:"#EA2B2B"},text:{h1:{fontStyle:"normal",fontWeight:"bold",fontSize:"64px",lineHeight:"70px",letterSpacing:"-0.02em",textTransform:"capitalize"},h2:{fontStyle:"normal",fontWeight:"bold",fontSize:"32px",lineHeight:"47px",letterSpacing:"-0.02em",textTransform:"capitalize"},h3:{fontStyle:"normal",fontWeight:"bold",fontSize:"24px",lineHeight:"28px",letterSpacing:"-0.02em",textTransform:"capitalize"},body:{fontStyle:"normal",fontWeight:"500",fontSize:"16px",lineHeight:"140%",letterSpacing:"-0.02em"},bold:{fontStyle:"normal",fontWeight:"bold",fontSize:"16px",lineHeight:"19px"},small:{fontStyle:"normal",fontWeight:"500",fontSize:"14px",lineHeight:"140%"},preTitle:{fontStyle:"normal",fontWeight:"bold",fontSize:"12px",lineHeight:"14px",letterSpacing:"-0.03em",textTransform:"uppercase"},button:{fontStyle:"normal",fontWeight:"bold",fontSize:"16px",lineHeight:"19px",letterSpacing:"-0.04em",textTransform:"uppercase"},link:{fontStyle:"normal",fontWeight:"bold",fontSize:"16px",lineHeight:"19px",textDecorationLine:"underline"}},button:{shadow:'box-shadow: "0px 6px 2px -4px rgba(14, 14, 44, 0.1), inset 0px -1px 0px rgba(14, 14, 44, 0.4)'}};function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=function(e){var t=e.Component,n=e.pageProps;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(d.f6,{theme:p,children:[(0,r.jsx)(f,{}),(0,r.jsx)(a.Ho,{children:(0,r.jsx)(l,{children:(0,r.jsx)(a.Bs,{children:(0,r.jsx)(t,g({},n))})})})]})})}},2934:function(e,t,n){"use strict";n.d(t,{r:function(){return p},k:function(){return y}});var r=n(6265),i=n(5893),s=n(7294),o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};var a=function(e){var t=e.animate,n=e.backgroundColor,r=e.backgroundOpacity,i=e.baseUrl,a=e.children,c=e.foregroundColor,u=e.foregroundOpacity,h=e.gradientRatio,l=e.uniqueKey,d=e.interval,f=e.rtl,p=e.speed,m=e.style,g=e.title,y=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["animate","backgroundColor","backgroundOpacity","baseUrl","children","foregroundColor","foregroundOpacity","gradientRatio","uniqueKey","interval","rtl","speed","style","title"]),v=l||Math.random().toString(36).substring(6),w=v+"-diff",b=v+"-animated-diff",I=v+"-aria",T=f?{transform:"scaleX(-1)"}:null,E="0; "+d+"; 1",S=p+"s";return(0,s.createElement)("svg",o({"aria-labelledby":I,role:"img",style:o(o({},m),T)},y),g?(0,s.createElement)("title",{id:I},g):null,(0,s.createElement)("rect",{role:"presentation",x:"0",y:"0",width:"100%",height:"100%",clipPath:"url("+i+"#"+w+")",style:{fill:"url("+i+"#"+b+")"}}),(0,s.createElement)("defs",null,(0,s.createElement)("clipPath",{id:w},a),(0,s.createElement)("linearGradient",{id:b},(0,s.createElement)("stop",{offset:"0%",stopColor:n,stopOpacity:r},t&&(0,s.createElement)("animate",{attributeName:"offset",values:-h+"; "+-h+"; 1",keyTimes:E,dur:S,repeatCount:"indefinite"})),(0,s.createElement)("stop",{offset:"50%",stopColor:c,stopOpacity:u},t&&(0,s.createElement)("animate",{attributeName:"offset",values:-h/2+"; "+-h/2+"; "+(1+h/2),keyTimes:E,dur:S,repeatCount:"indefinite"})),(0,s.createElement)("stop",{offset:"100%",stopColor:n,stopOpacity:r},t&&(0,s.createElement)("animate",{attributeName:"offset",values:"0; 0; "+(1+h),keyTimes:E,dur:S,repeatCount:"indefinite"})))))};a.defaultProps={animate:!0,backgroundColor:"#f5f6f7",backgroundOpacity:1,baseUrl:"",foregroundColor:"#eee",foregroundOpacity:1,gradientRatio:2,id:null,interval:.25,rtl:!1,speed:1.2,style:{},title:"Loading..."};var c=function(e){return e.children?(0,s.createElement)(a,o({},e)):(0,s.createElement)(u,o({},e))},u=function(e){return(0,s.createElement)(c,o({viewBox:"0 0 476 124"},e),(0,s.createElement)("rect",{x:"48",y:"8",width:"88",height:"6",rx:"3"}),(0,s.createElement)("rect",{x:"48",y:"26",width:"52",height:"6",rx:"3"}),(0,s.createElement)("rect",{x:"0",y:"56",width:"410",height:"6",rx:"3"}),(0,s.createElement)("rect",{x:"0",y:"72",width:"380",height:"6",rx:"3"}),(0,s.createElement)("rect",{x:"0",y:"88",width:"178",height:"6",rx:"3"}),(0,s.createElement)("circle",{cx:"20",cy:"20",r:"20"}))},h=c,l=n(1565).ZP.div.withConfig({displayName:"styles__Wrapper",componentId:"sc-1fserbi-0"})(["position:fixed;top:0;bottom:0;left:0;right:0;background-color:",";display:flex;justify-content:center;align-items:center;"],(function(e){return e.theme.color.bgDark}));function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=function(e){return(0,i.jsx)(l,{children:(0,i.jsx)(h,f(f({speed:2,width:350,height:689,viewBox:"0 0 350 689",backgroundColor:"#2B3953",foregroundColor:"#34425D",uniqueKey:"my-random-value"},e),{},{children:(0,i.jsx)("path",{d:"M 0 0 h 207 v 57 H 0 z M 0 75 h 350 v 51 H 0 z M 0 158 h 307 v 35 H 0 z M 0 207 h 227 v 35 H 0 z M 0 266 h 325 v 16 H 0 z M 0 288 h 325 v 16 H 0 z M 0 310 h 325 v 16 H 0 z M 0 332 h 325 v 16 H 0 z M 0 354 h 325 v 16 H 0 z M 0 376 h 325 v 16 H 0 z M 0 398 h 325 v 16 H 0 z M 0 420 h 325 v 16 H 0 z M 0 442 h 176 v 16 H 0 z M 4 472 h 84 v 16 H 4 z M 4 500 h 84 v 16 H 4 z M 4 528 h 147 v 16 H 4 v -16 z M 4 556 h 84 v 16 H 4 z M 4 584 h 84 v 16 H 4 z M 4 612 h 84 v 16 H 4 z M 0 644 h 207 v 45 H 0 z"})}))})};function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=function(e){return(0,i.jsx)(l,{children:(0,i.jsxs)(h,g(g({speed:2,width:406,height:697,viewBox:"0 0 406 697",backgroundColor:"#2B3953",foregroundColor:"#34425D"},e),{},{children:[(0,i.jsx)("circle",{cx:"314",cy:"204",r:"70"}),(0,i.jsx)("path",{d:"M 30 163 h 95 v 25 H 30 z M 30 203 h 80 v 14 H 30 z M 30 232 h 103 v 14 H 30 z M 149 163 h 80 v 80 h -80 z"}),(0,i.jsx)("circle",{cx:"314",cy:"368",r:"70"}),(0,i.jsx)("path",{d:"M 30 327 h 95 v 25 H 30 z M 30 367 h 80 v 14 H 30 z M 30 396 h 103 v 14 H 30 z M 149 327 h 80 v 80 h -80 z"}),(0,i.jsx)("circle",{cx:"314",cy:"532",r:"70"}),(0,i.jsx)("path",{d:"M 30 491 h 95 v 25 H 30 z M 30 531 h 80 v 14 H 30 z M 30 560 h 103 v 14 H 30 z M 149 491 h 80 v 80 h -80 z M 30 0 h 100 v 100 H 30 z M 177 33 h 125 v 35 H 177 z"}),(0,i.jsx)("circle",{cx:"366",cy:"39",r:"6"}),(0,i.jsx)("circle",{cx:"366",cy:"54",r:"6"}),(0,i.jsx)("circle",{cx:"366",cy:"69",r:"6"}),(0,i.jsx)("circle",{cx:"204",cy:"667",r:"30"}),(0,i.jsx)("path",{d:"M 34 642 h 50 v 50 H 34 z M 104 642 h 50 v 50 h -50 z M 254 642 h 50 v 50 h -50 z M 324 642 h 50 v 50 h -50 z"}),(0,i.jsx)("path",{d:"M 0 112 h 406"})]}))})}},8465:function(e,t,n){"use strict";n.d(t,{H:function(){return m},Z:function(){return p}});var r=n(6265),i=n(5893),s=n(809),o=n.n(s),a=n(2447),c=n(7294),u=n(2571),h=n(3842),l={loginWithGoogle:function(){var e=(0,a.Z)(o().mark((function e(){var t,n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,u.v0)(),n=new u.hJ,e.prev=2,e.next=5,(0,u.rh)(t,n);case 5:return r=e.sent,e.abrupt("return",{user:r.user});case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",{error:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),logout:function(){var e=(0,a.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,u.v0)(),e.prev=1,e.next=4,(0,u.w7)(t);case 4:e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(1),e.abrupt("return",{error:e.t0.message});case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}()};function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var f=(0,c.createContext)();function p(){return(0,c.useContext)(f)}function m(e){var t=(0,c.useState)(null),n=t[0],s=t[1],u=(0,c.useState)(""),p=u[0],m=u[1],g=function(){var e=(0,a.Z)(o().mark((function e(){var t,n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.loginWithGoogle();case 2:t=e.sent,n=t.error,r=t.user,s(null!==r&&void 0!==r?r:null),m(null!==n&&void 0!==n?n:""),r&&h.C.createCollection(r);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y={user:n,error:p,loginWithGoogle:g,logout:function(){var e=(0,a.Z)(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.logout();case 2:n=e.sent,s(null),m(null!==(t=null===n||void 0===n?void 0:n.error)&&void 0!==t?t:"");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),setUser:s};return(0,i.jsx)(f.Provider,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({value:y},e))}},4770:function(e,t,n){"use strict";n.d(t,{Ho:function(){return r.H},Bs:function(){return p},aC:function(){return r.Z},CU:function(){return f},kG:function(){return b},bP:function(){return w}});var r=n(8465),i=n(6265),s=n(5893),o=n(809),a=n.n(o),c=n(2447),u=n(7294),h=n(3842);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var d=(0,u.createContext)();function f(){return(0,u.useContext)(d)}function p(e){var t=(0,u.useState)(!0),n=t[0],o=t[1],f=(0,u.useState)(null),p=f[0],m=f[1],g=(0,u.useState)(""),y=g[0],v=g[1],w=(0,r.Z)().user,b={setLoading:o,user:w,setCollections:m,setError:v};(0,u.useEffect)((0,c.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==p){e.next=13;break}return e.prev=1,o(!0),e.next=5,h.C.offLine;case 5:return e.next=7,h.C.listenForData(b);case 7:o(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),v(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[1,10]])}))),[]);var I={collections:p,error:y,loading:n,setLoading:o};return(0,s.jsx)(d.Provider,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({value:I},e))}var m=n(1163),g=n(2934);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e){return function(t){var n=(0,r.Z)(),i=(0,m.useRouter)();return n.user?(i.replace("/profile"),(0,s.jsx)(g.k,{})):(0,s.jsx)(e,v({auth:n},t))}}var b=function(e){return function(t){var n=(0,r.Z)(),i=(0,m.useRouter)();return n.user?(0,s.jsx)(e,v({},t)):(i.replace("/"),(0,s.jsx)(g.r,{}))}}},3842:function(e,t,n){"use strict";n.d(t,{C:function(){return h}});var r=n(809),i=n.n(r),s=n(6265),o=n(2447),a=n(4956);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h={addDocs:function(){var e=(0,o.Z)(i().mark((function e(t){var n,r,s,o,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,r=t.values,s=(0,a.ad)(),o=n.user.uid,c={workout:r.exercise,date:a.EK.fromDate(new Date(r.date)),level:Number(r.level)+1,reps:r.reps,comments:r.comments},e.next=6,(0,a.ET)((0,a.hJ)(s,o),u({},c));case 6:return e.sent,e.abrupt("return");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),offLine:function(){var e=(0,a.ad)();(0,a.ST)(e).catch((function(e){"failed-precondition"==e.code?console.log("failed-precondition"):"unimplemented"==e.code&&console.log("unimplemented")}))},listenForData:function(){var e=(0,o.Z)(i().mark((function e(t){var n,r,s,o,c,h;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.setLoading,r=t.user,s=t.setCollections,o=t.setError,c=(0,a.ad)(),n(!0),h=(0,a.IO)((0,a.hJ)(c,r.uid),(0,a.Xo)("date","desc"),(0,a.b9)(72)),e.prev=4,e.next=7,(0,a.cf)(h,(function(e){var t=[];e.forEach((function(e){t.push(u({docId:e.id},e.data()))})),s(t||{workout:"Pull Up",date:a.EK.fromDate(new Date),level:1,reps:[15,12],comments:"sample data, please log your first exercise."}),n(!1)}));case 7:e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),o(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}(),removeDoc:function(){var e=(0,o.Z)(i().mark((function e(t,n){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,a.ad)(),e.next=3,(0,a.oe)((0,a.JU)(r,t,n));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),createCollection:function(){var e=(0,o.Z)(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,a.ad)(),e.next=3,(0,a.pl)((0,a.JU)(n,t.uid,"user"),{name:t.displayName,email:t.email,image:t.photoURL});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},1780:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return n(1659)}])},2447:function(e,t,n){"use strict";function r(e,t,n,r,i,s,o){try{var a=e[s](o),c=a.value}catch(u){return void n(u)}a.done?t(c):Promise.resolve(c).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,s){var o=e.apply(t,n);function a(e){r(o,i,s,a,c,"next",e)}function c(e){r(o,i,s,a,c,"throw",e)}a(void 0)}))}}n.d(t,{Z:function(){return i}})},6265:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:function(){return r}})},1163:function(e,t,n){e.exports=n(2441)},4155:function(e){var t,n,r=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function o(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"===typeof setTimeout?setTimeout:i}catch(e){t=i}try{n="function"===typeof clearTimeout?clearTimeout:s}catch(e){n=s}}();var a,c=[],u=!1,h=-1;function l(){u&&a&&(u=!1,a.length?c=a.concat(c):h=-1,c.length&&d())}function d(){if(!u){var e=o(l);u=!0;for(var t=c.length;t;){for(a=c,c=[];++h<t;)a&&a[h].run();h=-1,t=c.length}a=null,u=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function p(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new f(e,t)),1!==c.length||u||o(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=p,r.addListener=p,r.once=p,r.off=p,r.removeListener=p,r.removeAllListeners=p,r.emit=p,r.prependListener=p,r.prependOnceListener=p,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},9921:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,s=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,c=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,h=n?Symbol.for("react.async_mode"):60111,l=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,v=n?Symbol.for("react.fundamental"):60117,w=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function I(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case h:case l:case s:case a:case o:case f:return e;default:switch(e=e&&e.$$typeof){case u:case d:case g:case m:case c:return e;default:return t}}case i:return t}}}function T(e){return I(e)===l}t.AsyncMode=h,t.ConcurrentMode=l,t.ContextConsumer=u,t.ContextProvider=c,t.Element=r,t.ForwardRef=d,t.Fragment=s,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=a,t.StrictMode=o,t.Suspense=f,t.isAsyncMode=function(e){return T(e)||I(e)===h},t.isConcurrentMode=T,t.isContextConsumer=function(e){return I(e)===u},t.isContextProvider=function(e){return I(e)===c},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return I(e)===d},t.isFragment=function(e){return I(e)===s},t.isLazy=function(e){return I(e)===g},t.isMemo=function(e){return I(e)===m},t.isPortal=function(e){return I(e)===i},t.isProfiler=function(e){return I(e)===a},t.isStrictMode=function(e){return I(e)===o},t.isSuspense=function(e){return I(e)===f},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===s||e===l||e===a||e===o||e===f||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===c||e.$$typeof===u||e.$$typeof===d||e.$$typeof===v||e.$$typeof===w||e.$$typeof===b||e.$$typeof===y)},t.typeOf=I},9864:function(e,t,n){"use strict";e.exports=n(9921)},6774:function(e){e.exports=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var s=Object.keys(e),o=Object.keys(t);if(s.length!==o.length)return!1;for(var a=Object.prototype.hasOwnProperty.bind(t),c=0;c<s.length;c++){var u=s[c];if(!a(u))return!1;var h=e[u],l=t[u];if(!1===(i=n?n.call(r,h,l,u):void 0)||void 0===i&&h!==l)return!1}return!0}},1565:function(e,t,n){"use strict";n.d(t,{f6:function(){return xe},vJ:function(){return Me},ZP:function(){return Fe}});var r=n(9864),i=n(7294),s=n(6774),o=n.n(s);var a=function(e){function t(e,r,c,u,d){for(var f,p,m,g,b,T=0,E=0,S=0,_=0,k=0,D=0,P=m=f=0,M=0,F=0,U=0,j=0,V=c.length,z=V-1,B="",q="",H="",K="";M<V;){if(p=c.charCodeAt(M),M===z&&0!==E+_+S+T&&(0!==E&&(p=47===E?10:47),_=S=T=0,V++,z++),0===E+_+S+T){if(M===z&&(0<F&&(B=B.replace(l,"")),0<B.trim().length)){switch(p){case 32:case 9:case 59:case 13:case 10:break;default:B+=c.charAt(M)}p=59}switch(p){case 123:for(f=(B=B.trim()).charCodeAt(0),m=1,j=++M;M<V;){switch(p=c.charCodeAt(M)){case 123:m++;break;case 125:m--;break;case 47:switch(p=c.charCodeAt(M+1)){case 42:case 47:e:{for(P=M+1;P<z;++P)switch(c.charCodeAt(P)){case 47:if(42===p&&42===c.charCodeAt(P-1)&&M+2!==P){M=P+1;break e}break;case 10:if(47===p){M=P+1;break e}}M=P}}break;case 91:p++;case 40:p++;case 34:case 39:for(;M++<z&&c.charCodeAt(M)!==p;);}if(0===m)break;M++}switch(m=c.substring(j,M),0===f&&(f=(B=B.replace(h,"").trim()).charCodeAt(0)),f){case 64:switch(0<F&&(B=B.replace(l,"")),p=B.charCodeAt(1)){case 100:case 109:case 115:case 45:F=r;break;default:F=x}if(j=(m=t(r,F,m,p,d+1)).length,0<R&&(b=a(3,m,F=n(x,B,U),r,C,A,j,p,d,u),B=F.join(""),void 0!==b&&0===(j=(m=b.trim()).length)&&(p=0,m="")),0<j)switch(p){case 115:B=B.replace(I,o);case 100:case 109:case 45:m=B+"{"+m+"}";break;case 107:m=(B=B.replace(y,"$1 $2"))+"{"+m+"}",m=1===O||2===O&&s("@"+m,3)?"@-webkit-"+m+"@"+m:"@"+m;break;default:m=B+m,112===u&&(q+=m,m="")}else m="";break;default:m=t(r,n(r,B,U),m,u,d+1)}H+=m,m=U=F=P=f=0,B="",p=c.charCodeAt(++M);break;case 125:case 59:if(1<(j=(B=(0<F?B.replace(l,""):B).trim()).length))switch(0===P&&(f=B.charCodeAt(0),45===f||96<f&&123>f)&&(j=(B=B.replace(" ",":")).length),0<R&&void 0!==(b=a(1,B,r,e,C,A,q.length,u,d,u))&&0===(j=(B=b.trim()).length)&&(B="\0\0"),f=B.charCodeAt(0),p=B.charCodeAt(1),f){case 0:break;case 64:if(105===p||99===p){K+=B+c.charAt(M);break}default:58!==B.charCodeAt(j-1)&&(q+=i(B,f,p,B.charCodeAt(2)))}U=F=P=f=0,B="",p=c.charCodeAt(++M)}}switch(p){case 13:case 10:47===E?E=0:0===1+f&&107!==u&&0<B.length&&(F=1,B+="\0"),0<R*L&&a(0,B,r,e,C,A,q.length,u,d,u),A=1,C++;break;case 59:case 125:if(0===E+_+S+T){A++;break}default:switch(A++,g=c.charAt(M),p){case 9:case 32:if(0===_+T+E)switch(k){case 44:case 58:case 9:case 32:g="";break;default:32!==p&&(g=" ")}break;case 0:g="\\0";break;case 12:g="\\f";break;case 11:g="\\v";break;case 38:0===_+E+T&&(F=U=1,g="\f"+g);break;case 108:if(0===_+E+T+N&&0<P)switch(M-P){case 2:112===k&&58===c.charCodeAt(M-3)&&(N=k);case 8:111===D&&(N=D)}break;case 58:0===_+E+T&&(P=M);break;case 44:0===E+S+_+T&&(F=1,g+="\r");break;case 34:case 39:0===E&&(_=_===p?0:0===_?p:_);break;case 91:0===_+E+S&&T++;break;case 93:0===_+E+S&&T--;break;case 41:0===_+E+T&&S--;break;case 40:if(0===_+E+T){if(0===f)switch(2*k+3*D){case 533:break;default:f=1}S++}break;case 64:0===E+S+_+T+P+m&&(m=1);break;case 42:case 47:if(!(0<_+T+S))switch(E){case 0:switch(2*p+3*c.charCodeAt(M+1)){case 235:E=47;break;case 220:j=M,E=42}break;case 42:47===p&&42===k&&j+2!==M&&(33===c.charCodeAt(j+2)&&(q+=c.substring(j,M+1)),g="",E=0)}}0===E&&(B+=g)}D=k,k=p,M++}if(0<(j=q.length)){if(F=r,0<R&&(void 0!==(b=a(2,q,F,e,C,A,j,u,d,u))&&0===(q=b).length))return K+q+H;if(q=F.join(",")+"{"+q+"}",0!==O*N){switch(2!==O||s(q,2)||(N=0),N){case 111:q=q.replace(w,":-moz-$1")+q;break;case 112:q=q.replace(v,"::-webkit-input-$1")+q.replace(v,"::-moz-$1")+q.replace(v,":-ms-input-$1")+q}N=0}}return K+q+H}function n(e,t,n){var i=t.trim().split(m);t=i;var s=i.length,o=e.length;switch(o){case 0:case 1:var a=0;for(e=0===o?"":e[0]+" ";a<s;++a)t[a]=r(e,t[a],n).trim();break;default:var c=a=0;for(t=[];a<s;++a)for(var u=0;u<o;++u)t[c++]=r(e[u]+" ",i[a],n).trim()}return t}function r(e,t,n){var r=t.charCodeAt(0);switch(33>r&&(r=(t=t.trim()).charCodeAt(0)),r){case 38:return t.replace(g,"$1"+e.trim());case 58:return e.trim()+t.replace(g,"$1"+e.trim());default:if(0<1*n&&0<t.indexOf("\f"))return t.replace(g,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+t}function i(e,t,n,r){var o=e+";",a=2*t+3*n+4*r;if(944===a){e=o.indexOf(":",9)+1;var c=o.substring(e,o.length-1).trim();return c=o.substring(0,e).trim()+c+";",1===O||2===O&&s(c,1)?"-webkit-"+c+c:c}if(0===O||2===O&&!s(o,1))return o;switch(a){case 1015:return 97===o.charCodeAt(10)?"-webkit-"+o+o:o;case 951:return 116===o.charCodeAt(3)?"-webkit-"+o+o:o;case 963:return 110===o.charCodeAt(5)?"-webkit-"+o+o:o;case 1009:if(100!==o.charCodeAt(4))break;case 969:case 942:return"-webkit-"+o+o;case 978:return"-webkit-"+o+"-moz-"+o+o;case 1019:case 983:return"-webkit-"+o+"-moz-"+o+"-ms-"+o+o;case 883:if(45===o.charCodeAt(8))return"-webkit-"+o+o;if(0<o.indexOf("image-set(",11))return o.replace(k,"$1-webkit-$2")+o;break;case 932:if(45===o.charCodeAt(4))switch(o.charCodeAt(5)){case 103:return"-webkit-box-"+o.replace("-grow","")+"-webkit-"+o+"-ms-"+o.replace("grow","positive")+o;case 115:return"-webkit-"+o+"-ms-"+o.replace("shrink","negative")+o;case 98:return"-webkit-"+o+"-ms-"+o.replace("basis","preferred-size")+o}return"-webkit-"+o+"-ms-"+o+o;case 964:return"-webkit-"+o+"-ms-flex-"+o+o;case 1023:if(99!==o.charCodeAt(8))break;return"-webkit-box-pack"+(c=o.substring(o.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+o+"-ms-flex-pack"+c+o;case 1005:return f.test(o)?o.replace(d,":-webkit-")+o.replace(d,":-moz-")+o:o;case 1e3:switch(t=(c=o.substring(13).trim()).indexOf("-")+1,c.charCodeAt(0)+c.charCodeAt(t)){case 226:c=o.replace(b,"tb");break;case 232:c=o.replace(b,"tb-rl");break;case 220:c=o.replace(b,"lr");break;default:return o}return"-webkit-"+o+"-ms-"+c+o;case 1017:if(-1===o.indexOf("sticky",9))break;case 975:switch(t=(o=e).length-10,a=(c=(33===o.charCodeAt(t)?o.substring(0,t):o).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|c.charCodeAt(7))){case 203:if(111>c.charCodeAt(8))break;case 115:o=o.replace(c,"-webkit-"+c)+";"+o;break;case 207:case 102:o=o.replace(c,"-webkit-"+(102<a?"inline-":"")+"box")+";"+o.replace(c,"-webkit-"+c)+";"+o.replace(c,"-ms-"+c+"box")+";"+o}return o+";";case 938:if(45===o.charCodeAt(5))switch(o.charCodeAt(6)){case 105:return c=o.replace("-items",""),"-webkit-"+o+"-webkit-box-"+c+"-ms-flex-"+c+o;case 115:return"-webkit-"+o+"-ms-flex-item-"+o.replace(E,"")+o;default:return"-webkit-"+o+"-ms-flex-line-pack"+o.replace("align-content","").replace(E,"")+o}break;case 973:case 989:if(45!==o.charCodeAt(3)||122===o.charCodeAt(4))break;case 931:case 953:if(!0===_.test(e))return 115===(c=e.substring(e.indexOf(":")+1)).charCodeAt(0)?i(e.replace("stretch","fill-available"),t,n,r).replace(":fill-available",":stretch"):o.replace(c,"-webkit-"+c)+o.replace(c,"-moz-"+c.replace("fill-",""))+o;break;case 962:if(o="-webkit-"+o+(102===o.charCodeAt(5)?"-ms-"+o:"")+o,211===n+r&&105===o.charCodeAt(13)&&0<o.indexOf("transform",10))return o.substring(0,o.indexOf(";",27)+1).replace(p,"$1-webkit-$2")+o}return o}function s(e,t){var n=e.indexOf(1===t?":":"{"),r=e.substring(0,3!==t?n:10);return n=e.substring(n+1,e.length-1),P(2!==t?r:r.replace(S,"$1"),n,t)}function o(e,t){var n=i(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return n!==t+";"?n.replace(T," or ($1)").substring(4):"("+t+")"}function a(e,t,n,r,i,s,o,a,c,h){for(var l,d=0,f=t;d<R;++d)switch(l=D[d].call(u,e,f,n,r,i,s,o,a,c,h)){case void 0:case!1:case!0:case null:break;default:f=l}if(f!==t)return f}function c(e){return void 0!==(e=e.prefix)&&(P=null,e?"function"!==typeof e?O=1:(O=2,P=e):O=0),c}function u(e,n){var r=e;if(33>r.charCodeAt(0)&&(r=r.trim()),r=[r],0<R){var i=a(-1,n,r,r,C,A,0,0,0,0);void 0!==i&&"string"===typeof i&&(n=i)}var s=t(x,r,n,0,0);return 0<R&&(void 0!==(i=a(-2,s,r,r,C,A,s.length,0,0,0))&&(s=i)),"",N=0,A=C=1,s}var h=/^\0+/g,l=/[\0\r\f]/g,d=/: */g,f=/zoo|gra/,p=/([,: ])(transform)/g,m=/,\r+?/g,g=/([\t\r\n ])*\f?&/g,y=/@(k\w+)\s*(\S*)\s*/,v=/::(place)/g,w=/:(read-only)/g,b=/[svh]\w+-[tblr]{2}/,I=/\(\s*(.*)\s*\)/g,T=/([\s\S]*?);/g,E=/-self|flex-/g,S=/[^]*?(:[rp][el]a[\w-]+)[^]*/,_=/stretch|:\s*\w+\-(?:conte|avail)/,k=/([^-])(image-set\()/,A=1,C=1,N=0,O=1,x=[],D=[],R=0,P=null,L=0;return u.use=function e(t){switch(t){case void 0:case null:R=D.length=0;break;default:if("function"===typeof t)D[R++]=t;else if("object"===typeof t)for(var n=0,r=t.length;n<r;++n)e(t[n]);else L=0|!!t}return e},u.set=c,void 0!==e&&c(e),u},c={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};var u=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|inert|itemProp|itemScope|itemType|itemID|itemRef|on|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,h=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}((function(e){return u.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),l=n(8679),d=n.n(l),f=n(4155);function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var m=function(e,t){for(var n=[e[0]],r=0,i=t.length;r<i;r+=1)n.push(t[r],e[r+1]);return n},g=function(e){return null!==e&&"object"==typeof e&&"[object Object]"===(e.toString?e.toString():Object.prototype.toString.call(e))&&!(0,r.typeOf)(e)},y=Object.freeze([]),v=Object.freeze({});function w(e){return"function"==typeof e}function b(e){return e.displayName||e.name||"Component"}function I(e){return e&&"string"==typeof e.styledComponentId}var T="undefined"!=typeof f&&(f.env.REACT_APP_SC_ATTR||f.env.SC_ATTR)||"data-styled",E="undefined"!=typeof window&&"HTMLElement"in window,S=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof f&&void 0!==f.env.REACT_APP_SC_DISABLE_SPEEDY&&""!==f.env.REACT_APP_SC_DISABLE_SPEEDY?"false"!==f.env.REACT_APP_SC_DISABLE_SPEEDY&&f.env.REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof f&&void 0!==f.env.SC_DISABLE_SPEEDY&&""!==f.env.SC_DISABLE_SPEEDY&&("false"!==f.env.SC_DISABLE_SPEEDY&&f.env.SC_DISABLE_SPEEDY)),_={};function k(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw new Error("An error occurred. See https://git.io/JUIaE#"+e+" for more information."+(n.length>0?" Args: "+n.join(", "):""))}var A=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}var t=e.prototype;return t.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},t.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,i=r;e>=i;)(i<<=1)<0&&k(16,""+e);this.groupSizes=new Uint32Array(i),this.groupSizes.set(n),this.length=i;for(var s=r;s<i;s++)this.groupSizes[s]=0}for(var o=this.indexOfGroup(e+1),a=0,c=t.length;a<c;a++)this.tag.insertRule(o,t[a])&&(this.groupSizes[e]++,o++)},t.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),r=n+t;this.groupSizes[e]=0;for(var i=n;i<r;i++)this.tag.deleteRule(n)}},t.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],r=this.indexOfGroup(e),i=r+n,s=r;s<i;s++)t+=this.tag.getRule(s)+"/*!sc*/\n";return t},e}(),C=new Map,N=new Map,O=1,x=function(e){if(C.has(e))return C.get(e);for(;N.has(O);)O++;var t=O++;return C.set(e,t),N.set(t,e),t},D=function(e){return N.get(e)},R=function(e,t){t>=O&&(O=t+1),C.set(e,t),N.set(t,e)},P="style["+T+'][data-styled-version="5.3.1"]',L=new RegExp("^"+T+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),M=function(e,t,n){for(var r,i=n.split(","),s=0,o=i.length;s<o;s++)(r=i[s])&&e.registerName(t,r)},F=function(e,t){for(var n=(t.innerHTML||"").split("/*!sc*/\n"),r=[],i=0,s=n.length;i<s;i++){var o=n[i].trim();if(o){var a=o.match(L);if(a){var c=0|parseInt(a[1],10),u=a[2];0!==c&&(R(u,c),M(e,u,a[3]),e.getTag().insertRules(c,r)),r.length=0}else r.push(o)}}},U=function(){return"undefined"!=typeof window&&void 0!==window.__webpack_nonce__?window.__webpack_nonce__:null},j=function(e){var t=document.head,n=e||t,r=document.createElement("style"),i=function(e){for(var t=e.childNodes,n=t.length;n>=0;n--){var r=t[n];if(r&&1===r.nodeType&&r.hasAttribute(T))return r}}(n),s=void 0!==i?i.nextSibling:null;r.setAttribute(T,"active"),r.setAttribute("data-styled-version","5.3.1");var o=U();return o&&r.setAttribute("nonce",o),n.insertBefore(r,s),r},V=function(){function e(e){var t=this.element=j(e);t.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,r=t.length;n<r;n++){var i=t[n];if(i.ownerNode===e)return i}k(17)}(t),this.length=0}var t=e.prototype;return t.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},t.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.getRule=function(e){var t=this.sheet.cssRules[e];return void 0!==t&&"string"==typeof t.cssText?t.cssText:""},e}(),z=function(){function e(e){var t=this.element=j(e);this.nodes=t.childNodes,this.length=0}var t=e.prototype;return t.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t),r=this.nodes[e];return this.element.insertBefore(n,r||null),this.length++,!0}return!1},t.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),B=function(){function e(e){this.rules=[],this.length=0}var t=e.prototype;return t.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},t.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),q=E,H={isServer:!E,useCSSOMInjection:!S},K=function(){function e(e,t,n){void 0===e&&(e=v),void 0===t&&(t={}),this.options=p({},H,{},e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&E&&q&&(q=!1,function(e){for(var t=document.querySelectorAll(P),n=0,r=t.length;n<r;n++){var i=t[n];i&&"active"!==i.getAttribute(T)&&(F(e,i),i.parentNode&&i.parentNode.removeChild(i))}}(this))}e.registerId=function(e){return x(e)};var t=e.prototype;return t.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(p({},this.options,{},t),this.gs,n&&this.names||void 0)},t.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.getTag=function(){return this.tag||(this.tag=(n=(t=this.options).isServer,r=t.useCSSOMInjection,i=t.target,e=n?new B(i):r?new V(i):new z(i),new A(e)));var e,t,n,r,i},t.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},t.registerName=function(e,t){if(x(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},t.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(x(e),n)},t.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.clearRules=function(e){this.getTag().clearGroup(x(e)),this.clearNames(e)},t.clearTag=function(){this.tag=void 0},t.toString=function(){return function(e){for(var t=e.getTag(),n=t.length,r="",i=0;i<n;i++){var s=D(i);if(void 0!==s){var o=e.names.get(s),a=t.getGroup(i);if(o&&a&&o.size){var c=T+".g"+i+'[id="'+s+'"]',u="";void 0!==o&&o.forEach((function(e){e.length>0&&(u+=e+",")})),r+=""+a+c+'{content:"'+u+'"}/*!sc*/\n'}}}return r}(this)},e}(),$=/(a)(d)/gi,G=function(e){return String.fromCharCode(e+(e>25?39:97))};function W(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=G(t%52)+n;return(G(t%52)+n).replace($,"$1-$2")}var X=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},J=function(e){return X(5381,e)};function Y(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(w(n)&&!I(n))return!1}return!0}var Q=J("5.3.1"),Z=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&Y(e),this.componentId=t,this.baseHash=X(Q,t),this.baseStyle=n,K.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var r=this.componentId,i=[];if(this.baseStyle&&i.push(this.baseStyle.generateAndInjectStyles(e,t,n)),this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(r,this.staticRulesId))i.push(this.staticRulesId);else{var s=ye(this.rules,e,t,n).join(""),o=W(X(this.baseHash,s)>>>0);if(!t.hasNameForId(r,o)){var a=n(s,"."+o,void 0,r);t.insertRules(r,o,a)}i.push(o),this.staticRulesId=o}else{for(var c=this.rules.length,u=X(this.baseHash,n.hash),h="",l=0;l<c;l++){var d=this.rules[l];if("string"==typeof d)h+=d;else if(d){var f=ye(d,e,t,n),p=Array.isArray(f)?f.join(""):f;u=X(u,p+l),h+=p}}if(h){var m=W(u>>>0);if(!t.hasNameForId(r,m)){var g=n(h,"."+m,void 0,r);t.insertRules(r,m,g)}i.push(m)}}return i.join(" ")},e}(),ee=/^\s*\/\/.*$/gm,te=[":","[",".","#"];function ne(e){var t,n,r,i,s=void 0===e?v:e,o=s.options,c=void 0===o?v:o,u=s.plugins,h=void 0===u?y:u,l=new a(c),d=[],f=function(e){function t(t){if(t)try{e(t+"}")}catch(e){}}return function(n,r,i,s,o,a,c,u,h,l){switch(n){case 1:if(0===h&&64===r.charCodeAt(0))return e(r+";"),"";break;case 2:if(0===u)return r+"/*|*/";break;case 3:switch(u){case 102:case 112:return e(i[0]+r),"";default:return r+(0===l?"/*|*/":"")}case-2:r.split("/*|*/}").forEach(t)}}}((function(e){d.push(e)})),p=function(e,r,s){return 0===r&&-1!==te.indexOf(s[n.length])||s.match(i)?e:"."+t};function m(e,s,o,a){void 0===a&&(a="&");var c=e.replace(ee,""),u=s&&o?o+" "+s+" { "+c+" }":c;return t=a,n=s,r=new RegExp("\\"+n+"\\b","g"),i=new RegExp("(\\"+n+"\\b){2,}"),l(o||!s?"":s,u)}return l.use([].concat(h,[function(e,t,i){2===e&&i.length&&i[0].lastIndexOf(n)>0&&(i[0]=i[0].replace(r,p))},f,function(e){if(-2===e){var t=d;return d=[],t}}])),m.hash=h.length?h.reduce((function(e,t){return t.name||k(15),X(e,t.name)}),5381).toString():"",m}var re=i.createContext(),ie=(re.Consumer,i.createContext()),se=(ie.Consumer,new K),oe=ne();function ae(){return(0,i.useContext)(re)||se}function ce(){return(0,i.useContext)(ie)||oe}function ue(e){var t=(0,i.useState)(e.stylisPlugins),n=t[0],r=t[1],s=ae(),a=(0,i.useMemo)((function(){var t=s;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t}),[e.disableCSSOMInjection,e.sheet,e.target]),c=(0,i.useMemo)((function(){return ne({options:{prefix:!e.disableVendorPrefixes},plugins:n})}),[e.disableVendorPrefixes,n]);return(0,i.useEffect)((function(){o()(n,e.stylisPlugins)||r(e.stylisPlugins)}),[e.stylisPlugins]),i.createElement(re.Provider,{value:a},i.createElement(ie.Provider,{value:c},e.children))}var he=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=oe);var r=n.name+t.hash;e.hasNameForId(n.id,r)||e.insertRules(n.id,r,t(n.rules,r,"@keyframes"))},this.toString=function(){return k(12,String(n.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=t}return e.prototype.getName=function(e){return void 0===e&&(e=oe),this.name+e.hash},e}(),le=/([A-Z])/,de=/([A-Z])/g,fe=/^ms-/,pe=function(e){return"-"+e.toLowerCase()};function me(e){return le.test(e)?e.replace(de,pe).replace(fe,"-ms-"):e}var ge=function(e){return null==e||!1===e||""===e};function ye(e,t,n,r){if(Array.isArray(e)){for(var i,s=[],o=0,a=e.length;o<a;o+=1)""!==(i=ye(e[o],t,n,r))&&(Array.isArray(i)?s.push.apply(s,i):s.push(i));return s}return ge(e)?"":I(e)?"."+e.styledComponentId:w(e)?"function"!=typeof(u=e)||u.prototype&&u.prototype.isReactComponent||!t?e:ye(e(t),t,n,r):e instanceof he?n?(e.inject(n,r),e.getName(r)):e:g(e)?function e(t,n){var r,i,s=[];for(var o in t)t.hasOwnProperty(o)&&!ge(t[o])&&(Array.isArray(t[o])&&t[o].isCss||w(t[o])?s.push(me(o)+":",t[o],";"):g(t[o])?s.push.apply(s,e(t[o],o)):s.push(me(o)+": "+(r=o,(null==(i=t[o])||"boolean"==typeof i||""===i?"":"number"!=typeof i||0===i||r in c?String(i).trim():i+"px")+";")));return n?[n+" {"].concat(s,["}"]):s}(e):e.toString();var u}var ve=function(e){return Array.isArray(e)&&(e.isCss=!0),e};function we(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return w(e)||g(e)?ve(ye(m(y,[e].concat(n)))):0===n.length&&1===e.length&&"string"==typeof e[0]?e:ve(ye(m(e,n)))}new Set;var be=function(e,t,n){return void 0===n&&(n=v),e.theme!==n.theme&&e.theme||t||n.theme},Ie=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,Te=/(^-|-$)/g;function Ee(e){return e.replace(Ie,"-").replace(Te,"")}var Se=function(e){return W(J(e)>>>0)};function _e(e){return"string"==typeof e&&!0}var ke=function(e){return"function"==typeof e||"object"==typeof e&&null!==e&&!Array.isArray(e)},Ae=function(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e};function Ce(e,t,n){var r=e[n];ke(t)&&ke(r)?Ne(r,t):e[n]=t}function Ne(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,s=n;i<s.length;i++){var o=s[i];if(ke(o))for(var a in o)Ae(a)&&Ce(e,o[a],a)}return e}var Oe=i.createContext();Oe.Consumer;function xe(e){var t=(0,i.useContext)(Oe),n=(0,i.useMemo)((function(){return function(e,t){return e?w(e)?e(t):Array.isArray(e)||"object"!=typeof e?k(8):t?p({},t,{},e):e:k(14)}(e.theme,t)}),[e.theme,t]);return e.children?i.createElement(Oe.Provider,{value:n},e.children):null}var De={};function Re(e,t,n){var r=I(e),s=!_e(e),o=t.attrs,a=void 0===o?y:o,c=t.componentId,u=void 0===c?function(e,t){var n="string"!=typeof e?"sc":Ee(e);De[n]=(De[n]||0)+1;var r=n+"-"+Se("5.3.1"+n+De[n]);return t?t+"-"+r:r}(t.displayName,t.parentComponentId):c,l=t.displayName,f=void 0===l?function(e){return _e(e)?"styled."+e:"Styled("+b(e)+")"}(e):l,m=t.displayName&&t.componentId?Ee(t.displayName)+"-"+t.componentId:t.componentId||u,g=r&&e.attrs?Array.prototype.concat(e.attrs,a).filter(Boolean):a,T=t.shouldForwardProp;r&&e.shouldForwardProp&&(T=t.shouldForwardProp?function(n,r,i){return e.shouldForwardProp(n,r,i)&&t.shouldForwardProp(n,r,i)}:e.shouldForwardProp);var E,S=new Z(n,m,r?e.componentStyle:void 0),_=S.isStatic&&0===a.length,k=function(e,t){return function(e,t,n,r){var s=e.attrs,o=e.componentStyle,a=e.defaultProps,c=e.foldedComponentIds,u=e.shouldForwardProp,l=e.styledComponentId,d=e.target,f=function(e,t,n){void 0===e&&(e=v);var r=p({},t,{theme:e}),i={};return n.forEach((function(e){var t,n,s,o=e;for(t in w(o)&&(o=o(r)),o)r[t]=i[t]="className"===t?(n=i[t],s=o[t],n&&s?n+" "+s:n||s):o[t]})),[r,i]}(be(t,(0,i.useContext)(Oe),a)||v,t,s),m=f[0],g=f[1],y=function(e,t,n,r){var i=ae(),s=ce();return t?e.generateAndInjectStyles(v,i,s):e.generateAndInjectStyles(n,i,s)}(o,r,m),b=n,I=g.$as||t.$as||g.as||t.as||d,T=_e(I),E=g!==t?p({},t,{},g):t,S={};for(var _ in E)"$"!==_[0]&&"as"!==_&&("forwardedAs"===_?S.as=E[_]:(u?u(_,h,I):!T||h(_))&&(S[_]=E[_]));return t.style&&g.style!==t.style&&(S.style=p({},t.style,{},g.style)),S.className=Array.prototype.concat(c,l,y!==l?y:null,t.className,g.className).filter(Boolean).join(" "),S.ref=b,(0,i.createElement)(I,S)}(E,e,t,_)};return k.displayName=f,(E=i.forwardRef(k)).attrs=g,E.componentStyle=S,E.displayName=f,E.shouldForwardProp=T,E.foldedComponentIds=r?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):y,E.styledComponentId=m,E.target=r?e.target:e,E.withComponent=function(e){var r=t.componentId,i=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(t,["componentId"]),s=r&&r+"-"+(_e(e)?e:Ee(b(e)));return Re(e,p({},i,{attrs:g,componentId:s}),n)},Object.defineProperty(E,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(t){this._foldedDefaultProps=r?Ne({},e.defaultProps,t):t}}),E.toString=function(){return"."+E.styledComponentId},s&&d()(E,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),E}var Pe=function(e){return function e(t,n,i){if(void 0===i&&(i=v),!(0,r.isValidElementType)(n))return k(1,String(n));var s=function(){return t(n,i,we.apply(void 0,arguments))};return s.withConfig=function(r){return e(t,n,p({},i,{},r))},s.attrs=function(r){return e(t,n,p({},i,{attrs:Array.prototype.concat(i.attrs,r).filter(Boolean)}))},s}(Re,e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach((function(e){Pe[e]=Pe(e)}));var Le=function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=Y(e),K.registerId(this.componentId+1)}var t=e.prototype;return t.createStyles=function(e,t,n,r){var i=r(ye(this.rules,t,n,r).join(""),""),s=this.componentId+e;n.insertRules(s,s,i)},t.removeStyles=function(e,t){t.clearRules(this.componentId+e)},t.renderStyles=function(e,t,n,r){e>2&&K.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,r)},e}();function Me(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var s=we.apply(void 0,[e].concat(n)),o="sc-global-"+Se(JSON.stringify(s)),a=new Le(s,o);function c(e){var t=ae(),n=ce(),r=(0,i.useContext)(Oe),s=(0,i.useRef)(t.allocateGSInstance(o)).current;return t.server&&u(s,e,t,r,n),(0,i.useLayoutEffect)((function(){if(!t.server)return u(s,e,t,r,n),function(){return a.removeStyles(s,t)}}),[s,e,t,r,n]),null}function u(e,t,n,r,i){if(a.isStatic)a.renderStyles(e,_,n,i);else{var s=p({},t,{theme:be(t,r,c.defaultProps)});a.renderStyles(e,s,n,i)}}return i.memo(c)}!function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString();if(!t)return"";var n=U();return"<style "+[n&&'nonce="'+n+'"',T+'="true"','data-styled-version="5.3.1"'].filter(Boolean).join(" ")+">"+t+"</style>"},this.getStyleTags=function(){return e.sealed?k(2):e._emitSheetCSS()},this.getStyleElement=function(){var t;if(e.sealed)return k(2);var n=((t={})[T]="",t["data-styled-version"]="5.3.1",t.dangerouslySetInnerHTML={__html:e.instance.toString()},t),r=U();return r&&(n.nonce=r),[i.createElement("style",p({},n,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new K({isServer:!0}),this.sealed=!1}var t=e.prototype;t.collectStyles=function(e){return this.sealed?k(2):i.createElement(ue,{sheet:this.instance},e)},t.interleaveWithNodeStream=function(e){return k(3)}}();var Fe=Pe},655:function(e,t,n){"use strict";n.d(t,{ZT:function(){return i},_T:function(){return s},mG:function(){return o},Jh:function(){return a},XA:function(){return c},CR:function(){return u},ev:function(){return h}});var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function s(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function o(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))}function a(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(a){s=[6,a],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}Object.create;function c(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function u(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,s=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o}function h(e,t,n){if(n||2===arguments.length)for(var r,i=0,s=t.length;i<s;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[774,179],(function(){return t(1780),t(2441)}));var n=e.O();_N_E=n}]);